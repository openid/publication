<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Draft: OpenID Connect Standard 1.0 - draft 19</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="OpenID Connect Standard 1.0 - draft 19">
<meta name="generator" content="xml2rfc v1.36 (http://xml.resource.org/)">
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: small; color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: small; font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: small; font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: small; text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Draft</td><td class="header">N. Sakimura</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">NRI</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">J. Bradley</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Ping Identity</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">M. Jones</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Microsoft</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">B. de Medeiros</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Google</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">E. Jay</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Illumila</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">May 3, 2013</td></tr>
</table></td></tr></table>
<h1><br />OpenID Connect Standard 1.0 - draft 19</h1>

<h3>Abstract</h3>

<p>OpenID Connect 1.0 is a simple identity layer on top of the OAuth 2.0
      protocol. It allows Clients to verify the identity of the End-User based
      on the authentication performed by an Authorization Server, as well as to
      obtain basic profile information about the End-User in an interoperable and
      REST-like manner.
</p>
<p>OpenID Connect Standard 1.0 is an HTTP protocol binding for
      the OpenID Connect Messages 1.0 request and response messages.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#Introduction">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rnc">1.1.</a>&nbsp;
Requirements Notation and Conventions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#terminology">1.2.</a>&nbsp;
Terminology<br />
<a href="#AuthorizationEndpoint">2.</a>&nbsp;
Authorization Endpoint<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#protocol_flows">2.1.</a>&nbsp;
Protocol Flows<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#retrieving_code_token">2.1.1.</a>&nbsp;
Obtaining the Authorization Code, ID Token, and Access Token<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#code_flow">2.1.2.</a>&nbsp;
Authorization Code Flow<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#implicit_flow">2.1.3.</a>&nbsp;
Implicit Flow<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#auth_request">2.2.</a>&nbsp;
Authorization Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#AuthorizationRequest">2.2.1.</a>&nbsp;
Client Prepares Authorization Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#RequestParameters">2.2.1.1.</a>&nbsp;
Request Parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#RequestMethods">2.2.2.</a>&nbsp;
Request Methods<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#SimpleRequestMethod">2.2.2.1.</a>&nbsp;
Simple Request Method<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#norm_req">2.2.2.1.1.</a>&nbsp;
Client Sends Request to Authorization Server<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#req_param_method">2.2.2.2.</a>&nbsp;
Request Parameter Method<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#request_req">2.2.2.2.1.</a>&nbsp;
Client Sends Request to Authorization Server<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Request_File_Method">2.2.2.3.</a>&nbsp;
Request File Method<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rurl_create">2.2.2.3.1.</a>&nbsp;
Client Generates the URL of the Request File<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#art_req">2.2.2.3.2.</a>&nbsp;
Client Sends Request to Authorization Server via HTTPS Redirect<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#FetchesRequestFile">2.2.2.3.3.</a>&nbsp;
Authorization Server Fetches Request File<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ValidatesRequestObject">2.2.3.</a>&nbsp;
Authorization Server Validates Request Object<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Authenticates">2.2.4.</a>&nbsp;
Authorization Server Authenticates End-User<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Consent">2.2.5.</a>&nbsp;
Authorization Server Obtains End-User Consent/Authorization<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#art_res">2.2.6.</a>&nbsp;
Authorization Server Sends End-User Back to Client<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#art_res_ok">2.2.6.1.</a>&nbsp;
End-User Grants Authorization<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#authz_error">2.2.6.2.</a>&nbsp;
End-User Denies Authorization or Invalid Request<br />
<a href="#token_ep">3.</a>&nbsp;
Token Endpoint<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#RequestingAccessToken">3.1.</a>&nbsp;
Requesting Access Token<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#AccessTokenRequest">3.1.1.</a>&nbsp;
Access Token Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#AccessTokenResponse">3.1.2.</a>&nbsp;
Access Token Response<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#AccessTokenErrorResponse">3.1.3.</a>&nbsp;
Access Token Error Response<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#RefreshingAccessToken">3.2.</a>&nbsp;
Refreshing Access Token<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#RefreshTokenResponse">3.2.1.</a>&nbsp;
Refresh Token Response<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#RefreshTokenErrorResponse">3.2.2.</a>&nbsp;
Refresh Token Error Response<br />
<a href="#userinfo">4.</a>&nbsp;
UserInfo Endpoint<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#UserInfoRequest">4.1.</a>&nbsp;
UserInfo Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#UserInfoResponse">4.2.</a>&nbsp;
UserInfo Response<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#UserInfoErrorResponse">4.3.</a>&nbsp;
UserInfo Error Response<br />
<a href="#self_issued">5.</a>&nbsp;
Self-Issued OpenID Provider<br />
<a href="#client_Initiate_login">6.</a>&nbsp;
Initiating Login at Client from Third Party<br />
<a href="#Serializations">7.</a>&nbsp;
Serializations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#qss">7.1.</a>&nbsp;
Query String Serialization<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#form_serialization">7.2.</a>&nbsp;
Form Serialization<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#js">7.3.</a>&nbsp;
JSON Serialization<br />
<a href="#ImplementationConsiderations">8.</a>&nbsp;
Implementation Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#disco_reg">8.1.</a>&nbsp;
Discovery and Registration<br />
<a href="#security_considerations">9.</a>&nbsp;
Security Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ImplicitGrantFlowThreats">9.1.</a>&nbsp;
Implicit Grant Flow Threats<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#TLS_requirements">9.2.</a>&nbsp;
TLS Requirements<br />
<a href="#privacy_considerations">10.</a>&nbsp;
Privacy Considerations<br />
<a href="#IANA">11.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">12.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">12.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">12.2.</a>&nbsp;
Informative References<br />
<a href="#Acknowledgements">Appendix&nbsp;A.</a>&nbsp;
Acknowledgements<br />
<a href="#Notices">Appendix&nbsp;B.</a>&nbsp;
Notices<br />
<a href="#History">Appendix&nbsp;C.</a>&nbsp;
Document History<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="Introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>This specification describes the binding of the HTTP
      protocol with the endpoints described in <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages].
</p>
<a name="rnc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Requirements Notation and Conventions</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
	"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
	document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> .
</p>
<p>Throughout this document, values are quoted to indicate that they are
	to be taken literally. When using these values in protocol messages, the
	quotes MUST NOT be used as part of the value.
</p>
<a name="terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Terminology</h3>

<p>This specification uses the terms "Access Token", "Refresh Token",
	"Authorization Code", "Authorization Grant", "Authorization Server",
	"Authorization Endpoint", "Client", "Client Identifier", "Client Secret",
	"Protected Resource", "Resource Owner", "Resource Server", and
	"Token Endpoint" defined by
	<a class='info' href='#RFC6749'>OAuth 2.0<span> (</span><span class='info'>Hardt, D., &ldquo;The OAuth 2.0 Authorization Framework,&rdquo; October&nbsp;2012.</span><span>)</span></a> [RFC6749],
	and the terms defined by
	<a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages].
	
</p>
<p>
	  This specification also defines the following terms:
	  </p>
<blockquote class="text"><dl>
<dt>Request File</dt>
<dd>Document whose contents
	    is a Request Object representing a set of Authorization Request
	    parameters.
</dd>
<dt>Request File URI</dt>
<dd>URL that references a Request File.
	    The Request File contents MUST be retrievable by the
	    Authorization Server.
</dd>
</dl></blockquote>

<a name="AuthorizationEndpoint"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Authorization Endpoint</h3>

<p>The Authorization Endpoint performs authentication services for the
      End-User and requests authorization from the End-User to release
      information to OpenID Connect Relying Party Clients. When an End-User 
      accesses a Relying Party Client application that requires
      the End-User's identifier and other information, it sends the End-User to
      the Authorization Server's Authorization Endpoint for authentication and
      authorization. The Authorization Server then issues an ID Token that
      asserts the End-User's identifier and an Access Token that allows the
      Client to access the End-User's information at Protected Resource
      endpoints. Protected Resource endpoints MAY perform different actions or
      return different information based on the scopes associated with the 
      presented Access Token.
      Clients MUST specify 
      how the Access Token and ID Token are to be returned by using the
      <tt>response_type</tt>
      parameter in the Authorization Request.
      
</p>
<a name="protocol_flows"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Protocol Flows</h3>

<p>Authorization Requests follow two main paths to obtain Access Tokens
        and ID Tokens, the Implicit Flow and the Authorization Code Flow. The 
        flows determine how the Access Token and ID Token are returned to the 
        Client. Access Tokens are credentials used to access Protected 
        Resources, as defined in Section 1.4 of 
        <a class='info' href='#RFC6749'>OAuth 2.0<span> (</span><span class='info'>Hardt, D., &ldquo;The OAuth 2.0 Authorization Framework,&rdquo; October&nbsp;2012.</span><span>)</span></a> [RFC6749]. Access Tokens represent 
        a Resource Owner's authorization and MUST NOT be exposed to 
        unauthorized parties.
</p>
<p>The Implicit Flow is mainly used by Clients implemented in a browser
        using a scripting language. The Access Token and ID Token are returned
        directly to the Client, which MAY expose them to the Resource Owner and
        other applications that have access to the Resource Owner's User-Agent.
        The Authorization Server does not perform Client Authentication before
        issuing the Access Token.
</p>
<p>The Authorization Code Flow returns an Authorization Code to the
        Client, which can then exchange it for an Access Token directly. This
        provides the added benefit of not exposing the Access Token to the 
        Resource Owner and possibly other malicious applications with access
        to the Resource Owner's User-Agent. The Authorization Server can also
        authenticate the Client before exchanging the Authorization Code for an
        Access Token. The Authorization Code flow is suitable for Clients that 
        can securely maintain a Client Secret between themselves and the
        Authorization Server whereas the Implicit flow is suitable for Clients
        that cannot.
</p>
<a name="retrieving_code_token"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1.1"></a><h3>2.1.1.&nbsp;
Obtaining the Authorization Code, ID Token, and Access Token</h3>

<p>In this specification, the Client sends the Authorization Request 
          to the Authorization Endpoint through the User-Agent to obtain the 
          ID Token and Access Token.
	  It can obtain them from the Token Endpoint utilizing the Authorization Code
          that it obtained from the Authorization Endpoint using the Authorization Code Flow
	  or from the Authorization Endpoint using the Implicit Flow.
          
</p>
<a name="code_flow"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1.2"></a><h3>2.1.2.&nbsp;
Authorization Code Flow</h3>

<p>The Authorization Code Flow goes through the following
          steps.
</p>
<p></p>
<ol class="text">
<li>Client prepares an Authorization Request containing the desired
              request parameters.
</li>
<li>Client sends a request to the Authorization Server.
</li>
<li>Authorization Server Authenticates the End-User.
</li>
<li>Authorization Server Obtains the End-User
              Consent/Authorization.
</li>
<li>Authorization Server Sends the End-User back to the Client with
              an Authorization Code.
</li>
<li>Client requests a response using the Authorization Code at the
              Token Endpoint, per <a class='info' href='#token_ep'>Section&nbsp;3<span> (</span><span class='info'>Token Endpoint</span><span>)</span></a>.
</li>
<li>Client receives a response that contains an Access Token and ID
              Token in the response body.
</li>
<li>Client validates the ID Token and retrieves the End-User's
              subject identifier.
</li>
<li>(OPTIONAL) Client accesses the UserInfo Endpoint with the Access Token,
	      per <a class='info' href='#userinfo'>Section&nbsp;4<span> (</span><span class='info'>UserInfo Endpoint</span><span>)</span></a>.
</li>
<li>(OPTIONAL) Client receives UserInfo Response.
</li>
</ol><p>Note that in each step, the party that receives a message
          MUST validate it according to the validation rules in <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages].
</p>
<a name="implicit_flow"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1.3"></a><h3>2.1.3.&nbsp;
Implicit Flow</h3>

<p>The Implicit Flow follows the following steps:
</p>
<p></p>
<ol class="text">
<li>Client prepares an Authorization Request containing the desired
              request parameters.
</li>
<li>Client sends a request to the Authorization Server.
</li>
<li>Authorization Server Authenticates the End-User.
</li>
<li>Authorization Server Obtains the End-User
              Consent/Authorization.
</li>
<li>Authorization Server Sends the End-User back to the Client with
              an Access Token and an ID Token if requested.
</li>
<li>Client validates the ID Token and retrieves the End-User's
              subject identifier.
</li>
<li>(OPTIONAL) Client accesses the UserInfo Endpoint with the Access Token,
	      per <a class='info' href='#userinfo'>Section&nbsp;4<span> (</span><span class='info'>UserInfo Endpoint</span><span>)</span></a>.
</li>
<li>(OPTIONAL) Client receives UserInfo Response.
</li>
</ol><p>Note that in each step, the party that receives a message
          MUST validate it according to the validation rules in <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages].
</p>
<a name="auth_request"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Authorization Request</h3>

<p>When the Client wishes to access a Protected Resource and the
        End-User Authorization has not yet been obtained, the Client
        prepares an Authorization Request to the Authorization Endpoint.
</p>
<p>
	  Communication with the Authorization Endpoint MUST utilize TLS.
	  See <a class='info' href='#TLS_requirements'>Section&nbsp;9.2<span> (</span><span class='info'>TLS Requirements</span><span>)</span></a> for more information on using TLS.
	
</p>
<p>Authorization Servers MUST support the use of the HTTP <tt>GET</tt> and 
        <tt>POST</tt> methods defined in <a class='info' href='#RFC2616'>RFC 2616<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2616] at the
        Authorization Endpoint. 
</p>
<p>Clients MAY use the HTTP <tt>GET</tt> or
	<tt>POST</tt> methods to send the
        Authorization Request to the Authorization Server. If using the HTTP
        <tt>GET</tt> method, the request parameters are serialized using
	URI Query String Serialization, per <a class='info' href='#qss'>Section&nbsp;7.1<span> (</span><span class='info'>Query String Serialization</span><span>)</span></a>.
	If using the HTTP <tt>POST</tt>
        method, the request parameters are serialized using 
        Form Serialization, per <a class='info' href='#form_serialization'>Section&nbsp;7.2<span> (</span><span class='info'>Form Serialization</span><span>)</span></a>.
</p>
<a name="AuthorizationRequest"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.1"></a><h3>2.2.1.&nbsp;
Client Prepares Authorization Request</h3>

<p>The Client prepares an Authorization Request to the Authorization Endpoint
	  with the request parameters using the HTTP <tt>GET</tt>
	  or <tt>POST</tt>
          method. The scheme used in the Authorization URL MUST be <tt>https</tt>.
	  
</p>
<a name="RequestParameters"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.1.1"></a><h3>2.2.1.1.&nbsp;
Request Parameters</h3>

<p>
              OpenID Connect uses the following OAuth 2.0 request parameters:
	    
</p>
<p>
	      </p>
<blockquote class="text"><dl>
<dt>response_type</dt>
<dd>
		  REQUIRED.
		  OAuth 2.0 registered
		  response type value that determines how the Authorization Response
		  is returned to the Client.  As described in
		  <a class='info' href='#OAuth.Responses'>OAuth 2.0 Multiple Response Type Encoding Practices<span> (</span><span class='info'>de Medeiros, B., Scurtescu, M., and P. Tarjan, &ldquo;OAuth 2.0 Multiple Response Type Encoding Practices,&rdquo; November&nbsp;2012.</span><span>)</span></a> [OAuth.Responses],
		  the following registered values are supported by OpenID Connect:
		  
<ul class="text">
<li><tt>code</tt>
</li>
<li><tt>code id_token</tt>
</li>
<li><tt>id_token</tt>
</li>
<li><tt>token id_token</tt>
</li>
<li><tt>code token</tt>
</li>
<li><tt>code token id_token</tt>
</li>
</ul>
		
</dd>
<dt>client_id</dt>
<dd>
                  REQUIRED.
                  OAuth 2.0 Client Identifier.
                
</dd>
<dt>scope</dt>
<dd>
                  REQUIRED.
		  Space delimited, case sensitive list of ASCII OAuth 2.0 scope values.
		  OpenID Connect requests MUST contain the <tt>openid</tt> scope value.
		  OPTIONAL scope values of
		  <tt>profile</tt>,
		  <tt>email</tt>,
		  <tt>address</tt>,
		  <tt>phone</tt>,
		  and <tt>offline_access</tt>
		  are also defined.
		  Section 2.4 of <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages]
		  defines the OpenID Connect scope values.
		
</dd>
<dt>redirect_uri</dt>
<dd>
                  REQUIRED.
		  Redirection URI to which the response
		  will be sent. The Scheme, Host, Path, and Query Parameter segments of this URI MUST 
		  match one of the <tt>redirect_uris</tt> registered 
		  for the <tt>client_id</tt> in the <a class='info' href='#OpenID.Registration'>OpenID Connect Dynamic Client 
		  Registration 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., and M. Jones, &ldquo;OpenID Connect Dynamic Client Registration 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Registration] specification.
		
</dd>
<dt>state</dt>
<dd>
		  RECOMMENDED.
		  Opaque value used to maintain state
		  between the request and the callback.
		
</dd>
</dl></blockquote><p>
            
</p>
<p>
	      This specification also uses the following request parameters.
	      Refer to <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages]
	      for more information about these parameters.
	    
</p>
<p>
              </p>
<blockquote class="text"><dl>
<dt>nonce</dt>
<dd>
		  REQUIRED or OPTIONAL.
		  String value used to associate a Client session 
		  with an ID Token, and to mitigate replay attacks. 
		  The value is passed through unmodified from the Authorization Request to the ID Token.
		  Use of the nonce is REQUIRED when using the implicit flow
		  and OPTIONAL when using the code flow.
		
</dd>
<dt>display</dt>
<dd>
		  OPTIONAL.
		  ASCII string value that specifies
                  how the Authorization Server displays the authentication and
                  consent user interface pages to the End-User.
		  The defined values are:
		  <tt>page</tt>,
		  <tt>popup</tt>,
		  <tt>touch</tt>, and
		  <tt>wap</tt>.
		
</dd>
<dt>prompt</dt>
<dd>
		  OPTIONAL.
		  Space delimited, case sensitive list of ASCII string values
		  that specifies whether the Authorization Server prompts
		  the End-User for reauthentication and consent.
		  The defined values are:
		  <tt>none</tt>,
		  <tt>login</tt>,
		  <tt>consent</tt>, and
		  <tt>select_account</tt>.
		
</dd>
<dt>max_age</dt>
<dd>
                  OPTIONAL.
                  Maximum Authentication Age.
                  Specifies that the End-User must be actively authenticated if the
                  End-User was authenticated longer ago than the specified number of seconds.
                
</dd>
<dt>ui_locales</dt>
<dd>
                  OPTIONAL.
                  End-User's preferred languages and scripts for the user interface,
                  represented as a space-separated list of
                  <a class='info' href='#RFC5646'>BCP47<span> (</span><span class='info'>Phillips, A. and M. Davis, &ldquo;Tags for Identifying Languages,&rdquo; September&nbsp;2009.</span><span>)</span></a> [RFC5646] language tag values,
                  ordered by preference.
                
</dd>
<dt>claims_locales</dt>
<dd>
                  OPTIONAL.
                  End-User's preferred languages and scripts for Claims being returned, 
                  represented as a space-separated list of
                  <a class='info' href='#RFC5646'>BCP47<span> (</span><span class='info'>Phillips, A. and M. Davis, &ldquo;Tags for Identifying Languages,&rdquo; September&nbsp;2009.</span><span>)</span></a> [RFC5646] language tag values,
                  ordered by preference.
                
</dd>
<dt>id_token_hint</dt>
<dd>
		  OPTIONAL.
		  Previously issued ID Token
		  passed to the Authorization Server as a hint about the End-User
		  this request is about.
		
</dd>
<dt>login_hint</dt>
<dd>
                  OPTIONAL.
                  Hint to the Authorization Server
                  about the login identifier the End-User may use to log in (if necessary). 
                
</dd>
<dt>acr_values</dt>
<dd>
                  OPTIONAL.
                  Requested Authentication Context Class Reference values. 
		  Space-separated string that specifies the <tt>acr</tt>
		  values that the Authorization Server MUST use 
		  for processing requests from this Client.
                
</dd>
<dt>claims</dt>
<dd>
                  OPTIONAL.
                  This parameter is used to request that specific Claims be returned.
                  The value is a JSON object listing the requested Claims.
                
</dd>
<dt>registration</dt>
<dd>
                  OPTIONAL.
		  This parameter is used by the Client to provide information about itself
		  to a Self-Issued OP that would normally be provided to an OP during
		  Dynamic Client Registration.
                
</dd>
<dt>request</dt>
<dd>
		  OPTIONAL.
		  Request Object value.
		
</dd>
<dt>request_uri</dt>
<dd>
		  OPTIONAL.
		  URL that references a resource containing a Request Object value.
		
</dd>
</dl></blockquote><p>
	    
</p>
<a name="RequestMethods"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.2"></a><h3>2.2.2.&nbsp;
Request Methods</h3>

<p>There are three methods to construct and send the request to the 
          Authorization Endpoint: 
          </p>
<ol class="text">
<li>Simple Request Method
</li>
<li>Request Parameter Method
</li>
<li>Request File Method
</li>
</ol>

<p>
	    The Simple Request Method can be used in cases where signed or
	    encrypted requests are not needed and where the size of the
	    request does not exceed limits imposed by User-Agents.
	  
</p>
<p>
	    The Request Parameter Method is used when the Client wants or needs to
	    send an OpenID Connect request as a single, self-contained
	    Request Object value.
	    This method enables requests to be signed and optionally encrypted.
	    Like the Simple Request Method, some requests using this method
	    may exceed limits imposed by User-Agents.
	  
</p>
<p>
	    The Request File Method works similarly to the Request Parameter
	    Method but differs in that it sends a URL as a reference to the
	    Request Object. It enables large requests to be sent
	    securely and compactly even on User-Agents with limited capabilities.
	    Clients MAY use the Request File Method to minimize the request
	    size.
	  
</p>
<a name="SimpleRequestMethod"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.2.1"></a><h3>2.2.2.1.&nbsp;
Simple Request Method</h3>

<p>The Client prepares an Authorization Request to the
            Authorization Endpoint using the appropriate parameters. If using 
            the HTTP <tt>GET</tt> method, the request parameters are serialized using
            URI Query String Serialization, per <a class='info' href='#qss'>Section&nbsp;7.1<span> (</span><span class='info'>Query String Serialization</span><span>)</span></a>.
	    If using
            the HTTP <tt>POST</tt> method, the request parameters are serialized using 
            Form Serialization, per <a class='info' href='#form_serialization'>Section&nbsp;7.2<span> (</span><span class='info'>Form Serialization</span><span>)</span></a>.
</p>
<p>
<p>The following is a non-normative example of an
	      Authorization Request URL
	      (with line wraps within the values for display purposes only):
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  https://server.example.com/op/authorize?
    response_type=code%20id_token
    &amp;client_id=s6BhdRkqt3
    &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
    &amp;scope=openid
    &amp;nonce=n-0S6_WzA2Mj
    &amp;state=af0ifjsldkj
</pre></div>

<a name="norm_req"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.2.1.1"></a><h3>2.2.2.1.1.&nbsp;
Client Sends Request to Authorization Server</h3>

<p>Having constructed the Authorization Request, the Client sends it
              to the Authorization Endpoint using HTTPS.
</p>
<p>Following is a non-normative example using HTTP redirect
		(with line wraps within the values for display purposes only):
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  HTTP/1.1 302 Found
  Location: https://server.example.com/authorize?
    response_type=code%20id_token
    &amp;client_id=s6BhdRkqt3
    &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
    &amp;scope=openid
    &amp;nonce=n-0S6_WzA2Mj
    &amp;state=af0ifjsldkj
</pre></div>
<a name="req_param_method"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.2.2"></a><h3>2.2.2.2.&nbsp;
Request Parameter Method</h3>

<p>The Client prepares an Authorization Request to the
            Authorization Endpoint using the appropriate HTTP parameter
            serialization. The Client SHOULD construct the request using the
            HTTP <tt>POST</tt> method,
	    but MAY use the HTTP <tt>GET</tt> method.
</p>
<p>The Authorization Request MUST include the 
            <tt>request</tt> parameter defined in <a class='info' href='#RequestParameters'>Section&nbsp;2.2.1.1<span> (</span><span class='info'>Request Parameters</span><span>)</span></a>.
	    The Authorization Request MUST NOT include the 
            <tt>request_uri</tt> parameter.
</p>
<p>The <tt>request</tt> parameter is
	      a Request Object represented as a
	      <a class='info' href='#JWT'>JWT<span> (</span><span class='info'>Jones, M., Bradley, J., and N. Sakimura, &ldquo;JSON Web Token (JWT),&rdquo; April&nbsp;2013.</span><span>)</span></a> [JWT] containing
	      a set of OpenID Connect request parameters.
	      The Request Object MAY be signed or signed and encrypted via
              <a class='info' href='#JWS'>JWS<span> (</span><span class='info'>Jones, M., Bradley, J., and N. Sakimura, &ldquo;JSON Web Signature (JWS),&rdquo; April&nbsp;2013.</span><span>)</span></a> [JWS] and <a class='info' href='#JWE'>JWE<span> (</span><span class='info'>Jones, M., Rescorla, E., and J. Hildebrand, &ldquo;JSON Web Encryption (JWE),&rdquo; April&nbsp;2013.</span><span>)</span></a> [JWE]
              respectively, thereby providing authentication, integrity,
              non-repudiation and/or confidentiality.
</p>
<p>
<p>
		  The following is a non-normative example of the Claims in
		  a Request Object before base64url encoding and signing:
		
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {
   "response_type": "code id_token",
   "client_id": "s6BhdRkqt3",
   "redirect_uri": "https://client.example.org/cb",
   "scope": "openid",
   "state": "af0ifjsldkj",
   "nonce": "n-0S6_WzA2Mj",
   "max_age": 86400,
   "claims":
    {
     "userinfo":
      {
       "given_name": {"essential": true},
       "nickname": null,
       "email": {"essential": true},
       "email_verified": {"essential": true},
       "picture": null
      },
     "id_token":
      {
       "gender": null,
       "birthdate": {"essential": true},
       "acr": {"values": ["urn:mace:incommon:iap:silver"]}
      }
    }
  }
</pre></div>
	      
<p>
		  Signing it with the <tt>RS256</tt> algorithm
		  results in this Request Object value
		  (with line breaks for display purposes only):
		
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJhbGciOiJSUzI1NiJ9.ew0KICJyZXNwb25zZV90eXBlIjogImNvZGUgaWRfdG9rZW
  4iLA0KICJjbGllbnRfaWQiOiAiczZCaGRSa3F0MyIsDQogInJlZGlyZWN0X3VyaSI6I
  CJodHRwczovL2NsaWVudC5leGFtcGxlLm9yZy9jYiIsDQogInNjb3BlIjogIm9wZW5p
  ZCIsDQogInN0YXRlIjogImFmMGlmanNsZGtqIiwNCiAibm9uY2UiOiAibi0wUzZfV3p
  BMk1qIiwNCiAibWF4X2FnZSI6IDg2NDAwLA0KICJjbGFpbXMiOiANCiAgew0KICAgIn
  VzZXJpbmZvIjogDQogICAgew0KICAgICAiZ2l2ZW5fbmFtZSI6IHsiZXNzZW50aWFsI
  jogdHJ1ZX0sDQogICAgICJuaWNrbmFtZSI6IG51bGwsDQogICAgICJlbWFpbCI6IHsi
  ZXNzZW50aWFsIjogdHJ1ZX0sDQogICAgICJlbWFpbF92ZXJpZmllZCI6IHsiZXNzZW5
  0aWFsIjogdHJ1ZX0sDQogICAgICJwaWN0dXJlIjogbnVsbA0KICAgIH0sDQogICAiaW
  RfdG9rZW4iOiANCiAgICB7DQogICAgICJnZW5kZXIiOiBudWxsLA0KICAgICAiYmlyd
  GhkYXRlIjogeyJlc3NlbnRpYWwiOiB0cnVlfSwNCiAgICAgImFjciI6IHsidmFsdWVz
  IjogWyIyIl19DQogICAgfQ0KICB9DQp9.bOD4rUiQfzh4QPIs_f_R2GVBhNHcc1p2cQ
  TgixB1tsYRs52xW4TO74USgb-nii3RPsLdfoPlsEbJLmtbxG8-TQBHqGAyZxMDPWy3p
  hjeRt9ApDRnLQrjYuvsCj6byu9TVaKX9r1KDFGT-HLqUNlUTpYtCyM2B2rLkWM08ufB
  q9JBCEzzaLRzjevYEPMaoLAOjb8LPuYOYTBqshRMUxy4Z380-FJ2Lc7VSfSu6HcB2nL
  SjiKrrfI35xkRJsaSSmjasMYeDZarYCl7r4o17rFclk5KacYMYgAs-JYFkwab6Dd56Z
  rAzakHt9cExMpg04lQIux56C-Qk6dAsB6W6W91AQ
</pre></div>
	      
<p>
		  The following is the RSA public key in JWK format that can be used to
		  validate the Request Object signature in the above example
		  (with line breaks for display purposes only):
		
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {
   "kty":"RSA",
   "n":"y9Lqv4fCp6Ei-u2-ZCKq83YvbFEk6JMs_pSj76eMkddWRuWX2aBKG
  HAtKlE5P7_vn__PCKZWePt3vGkB6ePgzAFu08NmKemwE5bQI0e6kIChtt_6KzT5OaaXDF
  I6qCLJmk51Cc4VYFaxgqevMncYrzaW_50mZ1yGSFIQzLYP8bijAHGVjdEFgZaZEN9lsn_
  GdWLaJpHrB3ROlS50E45wxrlg9xMncVb8qDPuXZarvghLL0HzOuYRadBJVoWZowDNTpKp
  k2RklZ7QaBO7XDv3uR7s_sf2g-bAjSYxYUGsqkNA9b3xVW53am_UZZ3tZbFTIh557JICW
  KHlWj5uzeJXaw",
   "e":"AQAB"
  }
</pre></div>
	    

<p>
	      
<p>The following is a non-normative example of an
                Authorization Request using the <tt>request</tt>
		parameter
                (with line wraps within the values for display purposes only):
                
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  https://server.example.com/authorize?
    response_type=code%02id_token
    &amp;client_id=s6BhdRkqt3
    &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
    &amp;scope=openid
    &amp;state=af0ifjsldkj
    &amp;nonce=n-0S6_WzA2Mj
    &amp;request=eyJhbGciOiJSUzI1NiJ9.ew0KICJyZXNwb25zZV90eXBlIjogImNvZG
    UgaWRfdG9rZW4iLA0KICJjbGllbnRfaWQiOiAiczZCaGRSa3F0MyIsDQogInJlZG
    lyZWN0X3VyaSI6ICJodHRwczovL2NsaWVudC5leGFtcGxlLm9yZy9jYiIsDQogIn
    Njb3BlIjogIm9wZW5pZCIsDQogInN0YXRlIjogImFmMGlmanNsZGtqIiwNCiAibm
    9uY2UiOiAibi0wUzZfV3pBMk1qIiwNCiAibWF4X2FnZSI6IDg2NDAwLA0KICJjbG
    FpbXMiOiANCiAgew0KICAgInVzZXJpbmZvIjogDQogICAgew0KICAgICAiZ2l2ZW
    5fbmFtZSI6IHsiZXNzZW50aWFsIjogdHJ1ZX0sDQogICAgICJuaWNrbmFtZSI6IG
    51bGwsDQogICAgICJlbWFpbCI6IHsiZXNzZW50aWFsIjogdHJ1ZX0sDQogICAgIC
    JlbWFpbF92ZXJpZmllZCI6IHsiZXNzZW50aWFsIjogdHJ1ZX0sDQogICAgICJwaW
    N0dXJlIjogbnVsbA0KICAgIH0sDQogICAiaWRfdG9rZW4iOiANCiAgICB7DQogIC
    AgICJnZW5kZXIiOiBudWxsLA0KICAgICAiYmlydGhkYXRlIjogeyJlc3NlbnRpYW
    wiOiB0cnVlfSwNCiAgICAgImFjciI6IHsidmFsdWVzIjogWyIyIl19DQogICAgfQ
    0KICB9DQp9.bOD4rUiQfzh4QPIs_f_R2GVBhNHcc1p2cQTgixB1tsYRs52xW4TO7
    4USgb-nii3RPsLdfoPlsEbJLmtbxG8-TQBHqGAyZxMDPWy3phjeRt9ApDRnLQrjY
    uvsCj6byu9TVaKX9r1KDFGT-HLqUNlUTpYtCyM2B2rLkWM08ufBq9JBCEzzaLRzj
    evYEPMaoLAOjb8LPuYOYTBqshRMUxy4Z380-FJ2Lc7VSfSu6HcB2nLSjiKrrfI35
    xkRJsaSSmjasMYeDZarYCl7r4o17rFclk5KacYMYgAs-JYFkwab6Dd56ZrAzakHt
    9cExMpg04lQIux56C-Qk6dAsB6W6W91AQ
</pre></div>

<a name="request_req"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.2.2.1"></a><h3>2.2.2.2.1.&nbsp;
Client Sends Request to Authorization Server</h3>

<p>Having constructed the Authorization Request, the Client sends
              it to the Authorization Endpoint using HTTPS.
</p>
<p>Following is a non-normative example using HTTP redirect
		(with line wraps within the values for display purposes only):
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  HTTP/1.1 302 Found
  Location: https://server.example.com/authorize?
    response_type=code%20id_token
    &amp;client_id=s6BhdRkqt3
    &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
    &amp;scope=openid
    &amp;state=af0ifjsldkj
    &amp;nonce=n-0S6_WzA2Mj
    &amp;request=eyJhbGciOiJSUzI1NiJ9.ew0KICJyZXNwb25zZV90eXBlIjogImNvZG
    UgaWRfdG9rZW4iLA0KICJjbGllbnRfaWQiOiAiczZCaGRSa3F0MyIsDQogInJlZG
    lyZWN0X3VyaSI6ICJodHRwczovL2NsaWVudC5leGFtcGxlLm9yZy9jYiIsDQogIn
    Njb3BlIjogIm9wZW5pZCIsDQogInN0YXRlIjogImFmMGlmanNsZGtqIiwNCiAibm
    9uY2UiOiAibi0wUzZfV3pBMk1qIiwNCiAibWF4X2FnZSI6IDg2NDAwLA0KICJjbG
    FpbXMiOiANCiAgew0KICAgInVzZXJpbmZvIjogDQogICAgew0KICAgICAiZ2l2ZW
    5fbmFtZSI6IHsiZXNzZW50aWFsIjogdHJ1ZX0sDQogICAgICJuaWNrbmFtZSI6IG
    51bGwsDQogICAgICJlbWFpbCI6IHsiZXNzZW50aWFsIjogdHJ1ZX0sDQogICAgIC
    JlbWFpbF92ZXJpZmllZCI6IHsiZXNzZW50aWFsIjogdHJ1ZX0sDQogICAgICJwaW
    N0dXJlIjogbnVsbA0KICAgIH0sDQogICAiaWRfdG9rZW4iOiANCiAgICB7DQogIC
    AgICJnZW5kZXIiOiBudWxsLA0KICAgICAiYmlydGhkYXRlIjogeyJlc3NlbnRpYW
    wiOiB0cnVlfSwNCiAgICAgImFjciI6IHsidmFsdWVzIjogWyIyIl19DQogICAgfQ
    0KICB9DQp9.bOD4rUiQfzh4QPIs_f_R2GVBhNHcc1p2cQTgixB1tsYRs52xW4TO7
    4USgb-nii3RPsLdfoPlsEbJLmtbxG8-TQBHqGAyZxMDPWy3phjeRt9ApDRnLQrjY
    uvsCj6byu9TVaKX9r1KDFGT-HLqUNlUTpYtCyM2B2rLkWM08ufBq9JBCEzzaLRzj
    evYEPMaoLAOjb8LPuYOYTBqshRMUxy4Z380-FJ2Lc7VSfSu6HcB2nLSjiKrrfI35
    xkRJsaSSmjasMYeDZarYCl7r4o17rFclk5KacYMYgAs-JYFkwab6Dd56ZrAzakHt
    9cExMpg04lQIux56C-Qk6dAsB6W6W91AQ
</pre></div>
<a name="Request_File_Method"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.2.3"></a><h3>2.2.2.3.&nbsp;
Request File Method</h3>

<p>The Request File Method differs from the other methods in that
            it uses a Request File that contains a Request Object.
	    It then sends the Request File URL as
            part of the Authorization Request.
</p>
<p>The Client prepares an Authorization Request using the desired 
            HTTP <tt>GET</tt> or <tt>POST</tt> method.
	    The Client SHOULD use the HTTP <tt>GET</tt>
            method, but MAY use the HTTP <tt>POST</tt> method.
	    The scheme used in the Authorization URL MUST be <tt>https</tt>.
	    
</p>
<p> The Authorization Request MUST NOT include the 
            <tt>request</tt> parameter. The Authorization Request
	    MUST include the <tt>request_uri</tt> parameter.
	    The contents of the resource referenced by the URL must be a Request Object.
	    The scheme used in the 
            <tt>request_uri</tt> value MUST be <tt>https</tt>, 
            unless the target Request Object is signed in a way that is verifiable by the 
            Authorization Server.
            The <tt>request_uri</tt> value MUST be reachable by the
            Authorization Server, and SHOULD be reachable by the Client.
            
</p>
<p>
<p>Following is a non-normative example of
		the contents of a Request File
		(with line wraps within the values for display purposes only):
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  eyJhbGciOiJSUzI1NiJ9.ew0KICJyZXNwb25zZV90eXBlIjogImNvZGUgaWRfdG9rZ
  W4iLA0KICJjbGllbnRfaWQiOiAiczZCaGRSa3F0MyIsDQogInJlZGlyZWN0X3VyaSI
  6ICJodHRwczovL2NsaWVudC5leGFtcGxlLm9yZy9jYiIsDQogInNjb3BlIjogIm9wZ
  W5pZCIsDQogInN0YXRlIjogImFmMGlmanNsZGtqIiwNCiAibm9uY2UiOiAibi0wUzZ
  fV3pBMk1qIiwNCiAibWF4X2FnZSI6IDg2NDAwLA0KICJjbGFpbXMiOiANCiAgew0KI
  CAgInVzZXJpbmZvIjogDQogICAgew0KICAgICAiZ2l2ZW5fbmFtZSI6IHsiZXNzZW5
  0aWFsIjogdHJ1ZX0sDQogICAgICJuaWNrbmFtZSI6IG51bGwsDQogICAgICJlbWFpb
  CI6IHsiZXNzZW50aWFsIjogdHJ1ZX0sDQogICAgICJlbWFpbF92ZXJpZmllZCI6IHs
  iZXNzZW50aWFsIjogdHJ1ZX0sDQogICAgICJwaWN0dXJlIjogbnVsbA0KICAgIH0sD
  QogICAiaWRfdG9rZW4iOiANCiAgICB7DQogICAgICJnZW5kZXIiOiBudWxsLA0KICA
  gICAiYmlydGhkYXRlIjogeyJlc3NlbnRpYWwiOiB0cnVlfSwNCiAgICAgImFjciI6I
  HsidmFsdWVzIjogWyIyIl19DQogICAgfQ0KICB9DQp9.bOD4rUiQfzh4QPIs_f_R2G
  VBhNHcc1p2cQTgixB1tsYRs52xW4TO74USgb-nii3RPsLdfoPlsEbJLmtbxG8-TQBH
  qGAyZxMDPWy3phjeRt9ApDRnLQrjYuvsCj6byu9TVaKX9r1KDFGT-HLqUNlUTpYtCy
  M2B2rLkWM08ufBq9JBCEzzaLRzjevYEPMaoLAOjb8LPuYOYTBqshRMUxy4Z380-FJ2
  Lc7VSfSu6HcB2nLSjiKrrfI35xkRJsaSSmjasMYeDZarYCl7r4o17rFclk5KacYMYg
  As-JYFkwab6Dd56ZrAzakHt9cExMpg04lQIux56C-Qk6dAsB6W6W91AQ
</pre></div>

<a name="rurl_create"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.2.3.1"></a><h3>2.2.2.3.1.&nbsp;
Client Generates the URL of the Request File</h3>

<p>
		The Client stores the Request File either locally or remotely.
		This is the Request URI, <tt>request_uri</tt>.
		Servers MAY cache the contents of the files referenced by request URIs.
		If the contents of the Request File could ever change,
		the URI SHOULD include the base64url encoded SHA-256 hash of the
		referenced file contents as the fragment component of the URI.
		If the fragment value used for a URI changes, that signals the server
		that any cached value for that URI with the old fragment value
		is no longer valid.
	      
</p>
<p>
		Note that Clients MAY pre-register
		<tt>request_uri</tt> values using the
		<tt>request_uris</tt> parameter defined in
		Section 2 of the <a class='info' href='#OpenID.Registration'>OpenID Connect
		Dynamic Client Registration 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., and M. Jones, &ldquo;OpenID Connect Dynamic Client Registration 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Registration] specification.
		OPs can require that <tt>request_uri</tt> values used
		be pre-registered with the <tt>require_request_uri_registration</tt>
		discovery parameter.
	      
</p>
<p>It should be noted that if the Request File includes user's attribute 
              values, it MUST NOT be revealed to anybody but the Authorization Server. 
              As such, the <tt>request_uri</tt> MUST have
              appropriate entropy for its lifetime, 
              and must be removed after successful authentication or a reasonable timeout.
              
</p>
<p>The Client then records the Request File either locally or
              remotely and obtains the Request File URI, <tt>request_uri</tt>.
              
</p>
<p>Following is a non-normative example
		(with line wraps for display purposes only):
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  https://client.example.org/rf.txt
    #GkurKxf5T0Y-mnPFCHqWOMiZi4VS138cQO_V7PZHAdM
</pre></div>
<a name="art_req"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.2.3.2"></a><h3>2.2.2.3.2.&nbsp;
Client Sends Request to Authorization Server via HTTPS Redirect</h3>

<p>The Client sends the Authorization Request to the
	      Authorization Endpoint.
</p>
<p>The entire URL MUST NOT exceed 512 bytes.
</p>
<p>Following is a non-normative example
		(with line wraps within the values for display purposes only):
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  HTTP/1.1 302 Found
  Location: https://server.example.com/authorize
    ?response_type=code%20id_token
    &amp;client_id=s6BhdRkqt3
    &amp;request_uri=https%3A%2F%2Fclient.example.org%2Frf.txt
    %23GkurKxf5T0Y-mnPFCHqWOMiZi4VS138cQO_V7PZHAdM
    &amp;state=af0ifjsldkj&amp;nonce=n-0S6_WzA2Mj&amp;scope=openid
</pre></div>
<a name="FetchesRequestFile"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.2.3.3"></a><h3>2.2.2.3.3.&nbsp;
Authorization Server Fetches Request File</h3>

<p>Upon receipt of the Request, the Authorization Server MUST
              send a <tt>GET</tt> request to the <tt>request_uri</tt>
              to retrieve the content unless it is already cached and parse it
              to recreate the Authorization Request parameters.
</p>
<p>Note that the RP SHOULD use a unique URI for each
              request utilizing distinct parameters, or otherwise
              prevent the Authorization Server from caching the <tt>request_uri</tt>.
              
</p>
<p>Following is a non-normative example of this fetch
                process:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  GET /rf.txt HTTP/1.1
  Host: client.example.org
</pre></div>
<a name="ValidatesRequestObject"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.3"></a><h3>2.2.3.&nbsp;
Authorization Server Validates Request Object</h3>

<p>The Authorization Server validates the request according to 
	  Section 5.1 of <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages].
</p>
<a name="Authenticates"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.4"></a><h3>2.2.4.&nbsp;
Authorization Server Authenticates End-User</h3>

<p>The Authorization Server validates the request to ensure all
          required parameters are present and valid. If the request is valid,
          the Authorization Server MUST authenticate the End-User. The way in
          which the Authorization Server authenticates the End-User (e.g.
          username and password login, session cookies) is beyond the scope of
          this specification. An authentication user interface MAY be displayed
          by the Authorization Server depending on the authentication method
          used.
</p>
<p>The Authorization Server MUST attempt to authenticate the 
          End-User in the following cases:
          </p>
<ul class="text">
<li>The End-User is not already authenticated by the
		Authorization Server.
</li>
<li>The Authorization Request contains the <tt>prompt</tt> parameter with the value
		<tt>login</tt>. The
                Authorization Server MUST reauthenticate the End-User
                even if the End-User is already authenticated.
</li>
</ul>

<p>The Authorization Server MUST NOT attempt authentication
          in the following cases:
          </p>
<ul class="text">
<li>The Authorization Request contains the <tt>prompt</tt> parameter with the value
		<tt>none</tt>.
                The Authorization Server MUST return an error if the End-User is 
                unauthenticated.
</li>
</ul>

<a name="Consent"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.5"></a><h3>2.2.5.&nbsp;
Authorization Server Obtains End-User Consent/Authorization</h3>

<p>Once the End-User is authenticated, the Authorization Server MUST
          obtain an authorization decision. This MAY be done by presenting the
          End-User with a dialogue that allows the End-User to recognize what he is
          consenting to and obtain his consent or by establishing consent via
          other means (for example, via previous administrative consent).
</p>
<p>The Authorization Server MUST attempt to request authorization
          from the End-User in the following cases:
          </p>
<ul class="text">
<li>The End-User has not pre-authorized the Client for the
                Authorization Request.
</li>
<li>The Authorization Request contains the <tt>prompt</tt> parameter with the value
		<tt>consent</tt>. The
                Authorization Server MUST request End-User authorization even if the
                End-User has previously authorized the Client.
</li>
</ul>

<p>The Authorization Server MUST NOT request End-User authorization in the
          following cases:
          </p>
<ul class="text">
<li>The Authorization Request contains the <tt>prompt</tt> parameter with the value
		<tt>none</tt>.
                The Authorization Server MUST return an error if the End-User has
                not pre-authorized the Client.
</li>
</ul>

<a name="art_res"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.6"></a><h3>2.2.6.&nbsp;
Authorization Server Sends End-User Back to Client</h3>

<p>Once the authorization is determined, the Authorization Server
          returns a successful or error response.
</p>
<a name="art_res_ok"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.6.1"></a><h3>2.2.6.1.&nbsp;
End-User Grants Authorization</h3>

<p>If the Resource Owner grants the access request, the
            Authorization Server issues an Authorization Response 
            as described in
	    Section 2.1.2 of <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages] 
            to the Client by adding the response parameters to <tt>redirect_uri</tt> specified in the Authorization Request
	    using the "application/x-www-form-urlencoded" format.
</p>
<p>
              Note that if the <tt>response_type</tt> parameter in the 
              Authorization Request includes the string value 
              <tt>token</tt> or <tt>id_token</tt>, 
              all response parameters SHOULD be added to the fragment 
              component of the redirection URI. Otherwise, the response parameters 
              are added to the query component of the redirection URI.
            
</p>
<p>
              The following are non-normative examples of requests with 
              differing <tt>response_type</tt> values and their responses 
              (with line wraps within the values for display purposes only):
            
</p>
<p>Case 1: response_type=code
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  https://server.example.com/op/authorize?
    response_type=code
    &amp;client_id=s6BhdRkqt3
    &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
    &amp;scope=openid
    &amp;nonce=n-0S6_WzA2Mj
    &amp;state=af0ifjsldkj

  HTTP/1.1 302 Found
  Location: https://client.example.org/cb?
    code=Qcb0Orv1zh30vL1MPRsbm-diHiMwcLyZvn1arpZv-Jxf_11jnpEX3Tgfvk
    &amp;state=af0ifjsldkj
</pre></div>
<p>Case 2: response_type=token id_token
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  https://server.example.com/op/authorize?
    response_type=token%20id_token
    &amp;client_id=s6BhdRkqt3
    &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
    &amp;scope=openid
    &amp;nonce=n-0S6_WzA2Mj
    &amp;state=af0ifjsldkj

  HTTP/1.1 302 Found
  Location: https://client.example.org/cb#
    access_token=jHkWEdUXMU1BwAsC4vtUsZwnNvTIxEl0z9K3vx5KF0Y
    &amp;token_type=Bearer
    &amp;id_token=eyJhbGciOiJSUzI1NiJ9.ew0KICJpc3MiOiAiaHR0cDovL3NlcnZlc
    i5leGFtcGxlLmNvbSIsDQogInN1YiI6ICIyNDgyODk3NjEwMDEiLA0KICJhdWQiO
    iAiczZCaGRSa3F0MyIsDQogIm5vbmNlIjogIm4tMFM2X1d6QTJNaiIsDQogImV4c
    CI6IDEzMTEyODE5NzAsDQogImlhdCI6IDEzMTEyODA5NzAsDQogImF0X2hhc2giO
    iAiNzdRbVVQdGpQZnpXdEYyQW5wSzlSUSINCn0.g7UR4IDBNIjoPFV8exQCosUNV
    eh8bNUTeL4wdQp-2WXIWnly0_4ZK0sh4A4uddfenzo4Cjh4wuPPrSw6lMeujYbGy
    zKspJrRYL3iiYWc2VQcl8RKdHPz_G-7yf5enut1YE8v7PhKucPJCRRoobMjqD73f
    1nJNwQ9KBrfh21Ggbx1p8hNqQeeLLXb9b63JD84hVOXwyHmmcVgvZskge-wExwnh
    Ivv_cxTzxIXsSxcYlh3d9hnu0wdxPZOGjT0_nNZJxvdIwDD4cAT_LE5Ae447qB90
    ZF89Nmb0Oj2b1GdGVQEIr8-FXrHlyD827f0N_hLYPdZ73YK6p10qY9oRtMimg
    &amp;state=af0ifjsldkj
</pre></div>
<p>
		Verifying and decoding the ID Token will yield the following Claims:
	      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {
   "iss": "http://server.example.com",
   "sub": "248289761001",
   "aud": "s6BhdRkqt3",
   "nonce": "n-0S6_WzA2Mj",
   "exp": 1311281970,
   "iat": 1311280970,
   "at_hash": "77QmUPtjPfzWtF2AnpK9RQ"
  }
</pre></div>
<p>Case 3: response_type=code id_token
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  https://server.example.com/op/authorize?
    response_type=code%20id_token
    &amp;client_id=s6BhdRkqt3
    &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
    &amp;scope=openid
    &amp;nonce=n-0S6_WzA2Mj
    &amp;state=af0ifjsldkj

  HTTP/1.1 302 Found
  Location: https://client.example.org/cb#
    code=Qcb0Orv1zh30vL1MPRsbm-diHiMwcLyZvn1arpZv-Jxf_11jnpEX3Tgfvk
    &amp;id_token=eyJhbGciOiJSUzI1NiJ9.ew0KICJpc3MiOiAiaHR0cDovL3NlcnZlc
    i5leGFtcGxlLmNvbSIsDQogInN1YiI6ICIyNDgyODk3NjEwMDEiLA0KICJhdWQiO
    iAiczZCaGRSa3F0MyIsDQogIm5vbmNlIjogIm4tMFM2X1d6QTJNaiIsDQogImV4c
    CI6IDEzMTEyODE5NzAsDQogImlhdCI6IDEzMTEyODA5NzAsDQogImNfaGFzaCI6I
    CJMRGt0S2RvUWFrM1BrMGNuWHhDbHRBIg0KfQ.dAVXerlNOJ_tqMUysD_k1Q_bRX
    RJbLkTOsCPVxpKUis5V6xMRvtjfRg8gUfPuAMYrKQMEqZZmL87Hxkv6cFKavb4ft
    BUrY2qUnrvqe_bNjVEz89QSdxGmdFwSTgFVGWkDf5dV5eIiRxXfIkmlgCltPNocR
    AyvdNrsWC661rHz5F9MzBho2vgi5epUa_KAl6tK4ksgl68pjZqlBqsWfTbGEsWQX
    Efu664dJkdXMLEnsPUeQQLjMhLH7qpZk2ry0nRx0sS1mRwOM_Q0Xmps0vOkNn284
    pMUpmWEAjqklWITgtVYXOzF4ilbmZK6ONpFyKCpnSkAYtTEuqz-m7MoLCD_A
    &amp;state=af0ifjsldkj
</pre></div>
<p>
		Verifying and decoding the ID Token will yield the following Claims:
	      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {
   "iss": "http://server.example.com",
   "sub": "248289761001",
   "aud": "s6BhdRkqt3",
   "nonce": "n-0S6_WzA2Mj",
   "exp": 1311281970,
   "iat": 1311280970,
   "c_hash": "LDktKdoQak3Pk0cnXxCltA"
  }
</pre></div>
<p>Case 4: response_type=token code
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  https://server.example.com/op/authorize?
    response_type=token%20code
    &amp;client_id=s6BhdRkqt3
    &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
    &amp;scope=openid
    &amp;nonce=n-0S6_WzA2Mj
    &amp;state=af0ifjsldkj

  HTTP/1.1 302 Found
  Location: https://client.example.org/cb#
    code=Qcb0Orv1zh30vL1MPRsbm-diHiMwcLyZvn1arpZv-Jxf_11jnpEX3Tgfvk
    &amp;access_token=jHkWEdUXMU1BwAsC4vtUsZwnNvTIxEl0z9K3vx5KF0Y
    &amp;token_type=Bearer
    &amp;state=af0ifjsldkj
</pre></div>
<p>Case 5: response_type=token code id_token
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  https://server.example.com/op/authorize?
    response_type=token%20code%20id_token
    &amp;client_id=s6BhdRkqt3
    &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
    &amp;scope=openid
    &amp;nonce=n-0S6_WzA2Mj
    &amp;state=af0ifjsldkj

  HTTP/1.1 302 Found
  Location: https://client.example.org/cb#
    code=Qcb0Orv1zh30vL1MPRsbm-diHiMwcLyZvn1arpZv-Jxf_11jnpEX3Tgfvk
    &amp;access_token=jHkWEdUXMU1BwAsC4vtUsZwnNvTIxEl0z9K3vx5KF0Y
    &amp;token_type=Bearer
    &amp;id_token=eyJhbGciOiJSUzI1NiJ9.ew0KICJpc3MiOiAiaHR0cDovL3NlcnZlc
    i5leGFtcGxlLmNvbSIsDQogInN1YiI6ICIyNDgyODk3NjEwMDEiLA0KICJhdWQiO
    iAiczZCaGRSa3F0MyIsDQogIm5vbmNlIjogIm4tMFM2X1d6QTJNaiIsDQogImV4c
    CI6IDEzMTEyODE5NzAsDQogImlhdCI6IDEzMTEyODA5NzAsDQogImF0X2hhc2giO
    iAiNzdRbVVQdGpQZnpXdEYyQW5wSzlSUSIsDQogImNfaGFzaCI6ICJMRGt0S2RvU
    WFrM1BrMGNuWHhDbHRBIg0KfQ.JQthrBsOirujair9aD5gj1Yd5qEv0j4fhLgl8h
    3RaH3soYhwPOiN2Iy_yb7wMCO6I3bPoGJc3zCkpjgUtdB4O2eEhFqXHdwnE4c0oV
    TaTHJi_PdV2ox9g-1ikDB0ckWk0f0SzBd7yM2RoYYxJCiGBQlsSSRQz6ehykonI3
    hLAhXFdpfbK-3_a3HBNKOv_9Mr_JJrz2pqSygk5IBNvwzf1ouVeM91KKvr7EdriK
    N8ysk68fctbFAga1p8rE3cfBOX7Acn4p9QSNpUx0i_x4WHktyKDvH_hLdUw91Fql
    _UOgMP_9h8TYdkAjcq8n1tFzaO7kVaazlZ5SM32J7OSDgNSA
    &amp;state=af0ifjsldkj
</pre></div>
<p>
		Verifying and decoding the ID Token will yield the following Claims:
	      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {
   "iss": "http://server.example.com",
   "sub": "248289761001",
   "aud": "s6BhdRkqt3",
   "nonce": "n-0S6_WzA2Mj",
   "exp": 1311281970,
   "iat": 1311280970,
   "at_hash": "77QmUPtjPfzWtF2AnpK9RQ",
   "c_hash": "LDktKdoQak3Pk0cnXxCltA"
  }
</pre></div>
<p>
	      This following example makes a request using a
	      <tt>request</tt> parameter value
	      requesting that specific Claims be returned in the ID Token.
	      The sample Request Object used is described in
	      <a class='info' href='#req_param_method'>Section&nbsp;2.2.2.2<span> (</span><span class='info'>Request Parameter Method</span><span>)</span></a>.
            
</p>
<p>Case 6: response_type=code id_token
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  https://server.example.com/op/authorize?
    response_type=code%20id_token
    &amp;client_id=s6BhdRkqt3
    &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
    &amp;scope=openid
    &amp;request=eyJhbGciOiJSUzI1NiJ9.ew0KICJyZXNwb25zZV90eXBlIjogImNvZG
    UgaWRfdG9rZW4iLA0KICJjbGllbnRfaWQiOiAiczZCaGRSa3F0MyIsDQogInJlZG
    lyZWN0X3VyaSI6ICJodHRwczovL2NsaWVudC5leGFtcGxlLm9yZy9jYiIsDQogIn
    Njb3BlIjogIm9wZW5pZCIsDQogInN0YXRlIjogImFmMGlmanNsZGtqIiwNCiAibm
    9uY2UiOiAibi0wUzZfV3pBMk1qIiwNCiAibWF4X2FnZSI6IDg2NDAwLA0KICJjbG
    FpbXMiOiANCiAgew0KICAgInVzZXJpbmZvIjogDQogICAgew0KICAgICAiZ2l2ZW
    5fbmFtZSI6IHsiZXNzZW50aWFsIjogdHJ1ZX0sDQogICAgICJuaWNrbmFtZSI6IG
    51bGwsDQogICAgICJlbWFpbCI6IHsiZXNzZW50aWFsIjogdHJ1ZX0sDQogICAgIC
    JlbWFpbF92ZXJpZmllZCI6IHsiZXNzZW50aWFsIjogdHJ1ZX0sDQogICAgICJwaW
    N0dXJlIjogbnVsbA0KICAgIH0sDQogICAiaWRfdG9rZW4iOiANCiAgICB7DQogIC
    AgICJnZW5kZXIiOiBudWxsLA0KICAgICAiYmlydGhkYXRlIjogeyJlc3NlbnRpYW
    wiOiB0cnVlfSwNCiAgICAgImFjciI6IHsidmFsdWVzIjogWyIyIl19DQogICAgfQ
    0KICB9DQp9.bOD4rUiQfzh4QPIs_f_R2GVBhNHcc1p2cQTgixB1tsYRs52xW4TO7
    4USgb-nii3RPsLdfoPlsEbJLmtbxG8-TQBHqGAyZxMDPWy3phjeRt9ApDRnLQrjY
    uvsCj6byu9TVaKX9r1KDFGT-HLqUNlUTpYtCyM2B2rLkWM08ufBq9JBCEzzaLRzj
    evYEPMaoLAOjb8LPuYOYTBqshRMUxy4Z380-FJ2Lc7VSfSu6HcB2nLSjiKrrfI35
    xkRJsaSSmjasMYeDZarYCl7r4o17rFclk5KacYMYgAs-JYFkwab6Dd56ZrAzakHt
    9cExMpg04lQIux56C-Qk6dAsB6W6W91AQ
    &amp;nonce=n-0S6_WzA2Mj
    &amp;state=af0ifjsldkj

  HTTP/1.1 302 Found
  Location: https://client.example.org/cb#
    code=Qcb0Orv1zh30vL1MPRsbm-diHiMwcLyZvn1arpZv-Jxf_11jnpEX3Tgfvk
    &amp;token_type=Bearer
    &amp;id_token=eyJhbGciOiJSUzI1NiJ9.ew0KICJpc3MiOiAiaHR0cDovL3NlcnZlc
    i5leGFtcGxlLmNvbSIsDQogInN1YiI6ICIyNDgyODk3NjEwMDEiLA0KICJhdWQiO
    iAiczZCaGRSa3F0MyIsDQogIm5vbmNlIjogIm4tMFM2X1d6QTJNaiIsDQogImV4c
    CI6IDEzMTEyODE5NzAsDQogImlhdCI6IDEzMTEyODA5NzAsDQogImdlbmRlciI6I
    CJmZW1hbGUiLA0KICJiaXJ0aGRhdGUiOiAiMDAwMC0xMC0zMSIsDQogImFjciI6I
    CIyIiwNCiAiY19oYXNoIjogIkxEa3RLZG9RYWszUGswY25YeENsdEEiDQp9.d8vv
    NPuPR01zA_6RTArFMCtct1Oy6Q0gTCTXa9oDEuk7Sd3Hv0i34M6xFccrrbYtCzVn
    AjnJnJCgixJSlMsYJBTx168HgqdBcBwFLmd28i1Q_7cyfoglw4GkblXn7UxUgdAZ
    1ILyDAOV3dMS2ZxaCPK_HE2-_kzlIXtOamdWruHickUBA3_xlzMorMvbmHnU47qA
    u3AgCJF9RmKhgVY1cjUiHmEF8GBugxMn6eE7-ji6houeM-WL0nudHJEBikVmpnhQ
    ezFyj6tZhfeVcWoEsCwzbDts4pPQVcDHFq2dSnq1ZuhX1svDYnV-TRUW9ri7V9ik
    K7TBhtqtk7e5cIWSPw
    &amp;state=af0ifjsldkj
</pre></div>
<p>
		Verifying and decoding the ID Token will yield the following Claims:
	      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {
   "iss": "http://server.example.com",
   "sub": "248289761001",
   "aud": "s6BhdRkqt3",
   "nonce": "n-0S6_WzA2Mj",
   "exp": 1311281970,
   "iat": 1311280970,
   "gender": "female",
   "birthdate": "0000-10-31",
   "acr": "urn:mace:incommon:iap:silver",
   "c_hash": "LDktKdoQak3Pk0cnXxCltA"
  }
</pre></div>
<p>
		  The following is the RSA public key in JWK format that can be used to
		  validate the Request Object signature in the above examples
		  (with line breaks for display purposes only):
		
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {
   "kty":"RSA",
   "n":"zhEWTBJVTfcUeqnMzOQFMCEVQWOyOUZwP8LrBWh88tKrZyPGCvBkT
  Dp-E2BzyHMQV4pK51Uys2YOwzL9se5THDWMda9rtsCJVcj1V7WaE7wPgl-kIIdWWf4o2g
  6ZszOy_Fp4q0nG3OTtDRCkBu2iEP21j82pRSRrkCBxnzaChflA7KZbI1n_yhKtxyA7FdA
  480LaSVZyKApvrKiYhocACSwf0y6CQ-wkEi6mVXRJt1aBSywlLYA08ojp5hkZQ39eCM2k
  1EdXdhbar998Q9PZTwXA1cfvuGTZbDWxEKLjMKVuKrT1Yvs-2NTXhZAW1KjFS_3UwLkDk
  -w4dVN-x5tDnw",
   "e":"AQAB"
  }
</pre></div>
<a name="authz_error"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.6.2"></a><h3>2.2.6.2.&nbsp;
End-User Denies Authorization or Invalid Request</h3>

<p>If the End-User denies the authorization or the user authentication
            fails, the Authorization Server MUST return the
	    Authorization Error Response as defined in
	    Section 2.1.3 of <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages].
	    The Authorization Server returns the Client to
            the redirection URI specified in the Authorization Request
            with the appropriate error parameters. No
            other parameters SHOULD be returned.
</p>
<p>The error response parameters are the following:
              </p>
<blockquote class="text"><dl>
<dt>error</dt>
<dd>REQUIRED. Error code.
</dd>
<dt>error_description</dt>
<dd>OPTIONAL. Human-readable ASCII
                encoded text description of the error.
</dd>
<dt>error_uri</dt>
<dd>OPTIONAL. URI of a web page that
                includes additional information about the error.
</dd>
<dt>state</dt>
<dd>
		  OAuth 2.0 state value.
		  REQUIRED if the Authorization Request
                included the <tt>state</tt> parameter. Set
                to the exact value received from the Client.
</dd>
</dl></blockquote>

<p>If the <tt>response_type</tt> parameter in the
            Authorization Request includes the string value
	    <tt>token</tt> or <tt>id_token</tt>,
	    all error response parameters SHOULD be added to the 
            fragment component of the redirection URI. Otherwise, the response
            parameters are added to the query component of the redirection URI.
            
</p>
<p>
<p>The following is a non-normative example
		(with line wraps within the values for the display purposes only):
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  HTTP/1.1 302 Found
  Location: https://client.example.org/cb?
    error=invalid_request
    &amp;error_description=
      the%20request%20is%20not%20valid%20or%20malformed
    &amp;state=af0ifjsldkj
</pre></div>

<a name="token_ep"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Token Endpoint</h3>

<p>The Token Endpoint handles requests for retrieving and refreshing
      Access Tokens as well as ID Token and other variables.
</p>
<p>Clients MUST use the HTTP <tt>POST</tt> method to make requests to the Token Endpoint.
      Request parameters are added using
      Form Serialization, per <a class='info' href='#form_serialization'>Section&nbsp;7.2<span> (</span><span class='info'>Form Serialization</span><span>)</span></a>.
</p>
<p>Clients MAY provide authentication parameters in the request to the
      Token Endpoint as described in
      Section 2.2.1 of <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages].
</p>
<p>The Token Endpoint MUST support the use of the HTTP <tt>POST</tt>
      method defined in <a class='info' href='#RFC2616'>RFC 2616<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2616] at the
      Token Endpoint.
</p>
<p>
	Communication with the Token Endpoint MUST utilize TLS.
	See <a class='info' href='#TLS_requirements'>Section&nbsp;9.2<span> (</span><span class='info'>TLS Requirements</span><span>)</span></a> for more information on using TLS.
      
</p>
<p>All Token Endpoint responses that contain tokens, secrets, or other
      sensitive information MUST include the following HTTP response header
      fields and values:
</p><br /><hr class="insert" />
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Header Name</th><th align="left">Header Value</th></tr>
<tr>
<td align="left">Cache-Control</td>
<td align="left">no-store</td>
</tr>
<tr>
<td align="left">Pragma</td>
<td align="left">no-cache</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;HTTP Response Headers and Values&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="RequestingAccessToken"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Requesting Access Token</h3>

<p>
	  To retrieve an Access Token when using the Authorization Code Flow,
	  a Client MUST have an Authorization Code
	  obtained as described in <a class='info' href='#code_flow'>Section&nbsp;2.1.2<span> (</span><span class='info'>Authorization Code Flow</span><span>)</span></a>.
	
</p>
<a name="AccessTokenRequest"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.1"></a><h3>3.1.1.&nbsp;
Access Token Request</h3>

<p>To obtain an Access Token, Refresh Token or ID Token, the Client MUST
          authenticate to the Token Endpoint using the authentication method
	  registered for its <tt>client_id</tt>, as documented in
	  Section 2.2.1 of <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages].
          The Client sends the parameters via HTTPS <tt>POST</tt> to the Token Endpoint using
          Form Serialization, per <a class='info' href='#form_serialization'>Section&nbsp;7.2<span> (</span><span class='info'>Form Serialization</span><span>)</span></a>,
	  as described in Section 4.1.3 of 
          <a class='info' href='#RFC6749'>OAuth 2.0<span> (</span><span class='info'>Hardt, D., &ldquo;The OAuth 2.0 Authorization Framework,&rdquo; October&nbsp;2012.</span><span>)</span></a> [RFC6749].
</p>
<p>The following is a non-normative example of an Access Token Request:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  POST /token HTTP/1.1
  Host: server.example.com
  Content-Type: application/x-www-form-urlencoded
  Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW

  grant_type=authorization_code&amp;code=SplxlOBeZQQYbYS6WxSbIA
    &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
</pre></div>
<p>
            The Authorization Server MUST:
          
</p>
<p>
            </p>
<ul class="text">
<li>
                Authenticate any Clients that were issued Client Credentials
		(or for which other Client Authentication methods can be used),
              
</li>
<li>
                Ensure the
                Authorization Code was issued to the authenticated Client,
              
</li>
<li>
                Verify that the Authorization Code is valid, and
              
</li>
<li>
                Ensure that, if <tt>redirect_uri</tt> parameter is
		present (which it should be), that the
		Scheme, Host, Path, and Query Parameter segments
		are identical to the <tt>redirect_uri</tt>
		parameter value that was included in the initial Authorization Request
		(which also should have been present).
		Should the <tt>redirect_uri</tt> parameter value
		not be present when there is only one registered
		<tt>redirect_uri</tt> value,
		the Authorization Server MAY return an error
		(since the Client should have included the parameter)
		or MAY proceed without an error
		(since OAuth 2.0 permits the parameter to be omitted in this case).
              
</li>
</ul><p>
          
</p>
<a name="AccessTokenResponse"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.2"></a><h3>3.1.2.&nbsp;
Access Token Response</h3>

<p>Upon receipt of the Token Request, the Authorization Server MUST
          return either a successful response or an error response that corresponds to
          the received Authorization Code.
</p>
<p>A successful response returns the <tt>application/json</tt>
	  media type and the response body is the Access Token Response documented in
	  Section 2.2.3 of <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages].
</p>
<p>Following is a non-normative example of a
	    successful response:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  HTTP/1.1 200 OK
  Content-Type: application/json
  Cache-Control: no-store
  Pragma: no-cache

  {
   "access_token": "SlAV32hkKG",
   "token_type": "Bearer",
   "refresh_token": "8xLOxBtZp8",
   "expires_in": 3600,
   "id_token": "eyJhbGciOiJSUzI1NiJ9.ew0KICAgICJpc3MiOiAiaHR0cDovL
     3NlcnZlci5leGFtcGxlLmNvbSIsDQogICAgInVzZXJfaWQiOiAiMjQ4Mjg5NzYxM
     DAxIiwNCiAgICAiYXVkIjogInM2QmhkUmtxdDMiLA0KICAgICJub25jZSI6ICJuL
     TBTNl9XekEyTWoiLA0KICAgICJleHAiOiAxMzExMjgxOTcwLA0KICAgICJpYXQiO
     iAxMzExMjgwOTcwDQp9.lsQI_KNHpl58YY24G9tUHXr3Yp7OKYnEaVpRL0KI4szT
     D6GXpZcgxIpkOCcajyDiIv62R9rBWASV191Akk1BM36gUMm8H5s8xyxNdRfBViCa
     xTqHA7X_vV3U-tSWl6McR5qaSJaNQBpg1oGPjZdPG7zWCG-yEJC4-Fbx2FPOS7-h
     5V0k33O5Okd-OoDUKoFPMd6ur5cIwsNyBazcsHdFHqWlCby5nl_HZdW-PHq0gjzy
     JydB5eYIvOfOHYBRVML9fKwdOLM2xVxJsPwvy3BqlVKc593p2WwItIg52ILWrc6A
     tqkqHxKsAXLVyAoVInYkl_NDBkCqYe2KgNJFzfEC8g"
  }
</pre></div>
<a name="AccessTokenErrorResponse"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.3"></a><h3>3.1.3.&nbsp;
Access Token Error Response</h3>

<p>If the Token Request is invalid or unauthorized, the
	  Authorization Server constructs the response by returning the
	  Token Error Response defined in <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages] in the
	  entity body of the HTTP response using the <tt>application/json</tt>
	  media type with HTTP response code 400.
</p>
<p>Following is a non-normative example:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  HTTP/1.1 400 Bad Request
  Content-Type: application/json
  Cache-Control: no-store
  Pragma: no-cache

  {
   "error": "invalid_request"
  }
</pre></div>
<a name="RefreshingAccessToken"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Refreshing Access Token</h3>

<p>To refresh an Access Token, the Client MUST
          authenticate to the Token Endpoint using the authentication method registered
	  for its <tt>client_id</tt>, as documented in
	  Section 2.2.1 of <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages].
	  The Client sends the parameters via HTTPS <tt>POST</tt> to the Token Endpoint using
          Form Serialization, per <a class='info' href='#form_serialization'>Section&nbsp;7.2<span> (</span><span class='info'>Form Serialization</span><span>)</span></a>,
	  as described in Section 6 of 
          <a class='info' href='#RFC6749'>OAuth 2.0<span> (</span><span class='info'>Hardt, D., &ldquo;The OAuth 2.0 Authorization Framework,&rdquo; October&nbsp;2012.</span><span>)</span></a> [RFC6749]:
</p>
<p>The Authorization Server MUST validate the Refresh Token.
        
</p>
<a name="RefreshTokenResponse"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.1"></a><h3>3.2.1.&nbsp;
Refresh Token Response</h3>

<p>Upon receipt of the Refresh Token Request, the Authorization Server MUST
          return either a successful response or an error response that corresponds to
          the received Refresh Token.
</p>
<p>Upon successful validation of the Refresh Token, a successful
          response returns the <tt>application/json</tt>
          media type and the response body is the Access Token Response of 
          Section 2.2.3 of <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages]
	  except that it MUST NOT return an <tt>id_token</tt>.
</p>
<p>Following is a non-normative example of a
	    Refresh Token Request and response:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  POST /token HTTP/1.1
  Host: server.example.com
  Content-Type: application/x-www-form-urlencoded

  client_id=s6BhdRkqt3
    &amp;client_secret=some_secret12345
    &amp;grant_type=refresh_token
    &amp;refresh_token=8xLOxBtZp8
    &amp;scope=openid%20profile

  HTTP/1.1 200 OK
  Content-Type: application/json
  Cache-Control: no-store
  Pragma: no-cache

  {
   "access_token": "TlBN45jURg",
   "token_type": "Bearer",
   "refresh_token": "9yNOxJtZa5",
   "expires_in": 3600
  }
</pre></div>
<a name="RefreshTokenErrorResponse"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2"></a><h3>3.2.2.&nbsp;
Refresh Token Error Response</h3>

<p>If the Refresh Token Request is invalid or unauthorized, the
	  Authorization Server returns the 
	  Token Error Response as defined in Section 5.2 of <a class='info' href='#RFC6749'>OAuth 2.0<span> (</span><span class='info'>Hardt, D., &ldquo;The OAuth 2.0 Authorization Framework,&rdquo; October&nbsp;2012.</span><span>)</span></a> [RFC6749].
</p>
<a name="userinfo"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
UserInfo Endpoint</h3>

<p>
	The UserInfo Endpoint is an OAuth 2.0 Protected Resource that
        returns Claims about the authenticated End-User.
	To obtain the requested Claims about the End-User, the Client
	makes a <tt>GET</tt> or
	<tt>POST</tt> request to the UserInfo Endpoint as in
	Section 2.3.1 of <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages].
      
</p>
<p>
	Communication with the UserInfo Endpoint MUST utilize TLS.
	See <a class='info' href='#TLS_requirements'>Section&nbsp;9.2<span> (</span><span class='info'>TLS Requirements</span><span>)</span></a> for more information on using TLS.
      
</p>
<p>The UserInfo Endpoint MUST support the use of the HTTP <tt>GET</tt> and HTTP
      <tt>POST</tt> methods defined in <a class='info' href='#RFC2616'>RFC 2616<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2616] at the
      UserInfo Endpoint. 
</p>
<p>The UserInfo Endpoint MUST accept Access Tokens as
      <a class='info' href='#RFC6750'>OAuth 2.0 Bearer Token Usage<span> (</span><span class='info'>Jones, M. and D. Hardt, &ldquo;The OAuth 2.0 Authorization Framework: Bearer Token Usage,&rdquo; October&nbsp;2012.</span><span>)</span></a> [RFC6750].
</p>
<p>The UserInfo Endpoint SHOULD support the use of 
      <a class='info' href='#CORS'>Cross Origin Resource Sharing (CORS)<span> (</span><span class='info'>Opera Software ASA, &ldquo;Cross-Origin Resource Sharing,&rdquo; July&nbsp;2010.</span><span>)</span></a> [CORS] and
      or other methods as appropriate to enable Java Script Clients to access the endpoint.
</p>
<a name="UserInfoRequest"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
UserInfo Request</h3>

<p>Client SHOULD send the UserInfo Request defined in
	Section 2.3.1 of <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages]
        either in an HTTPS <tt>GET</tt> or HTTPS <tt>POST</tt> request.
</p>
<p>The Access Token obtained
            from an OpenID Connect Authorization Request MUST be sent as a Bearer Token.
            Section 2 of the <a class='info' href='#RFC6750'>OAuth 2.0 Bearer Token Usage<span> (</span><span class='info'>Jones, M. and D. Hardt, &ldquo;The OAuth 2.0 Authorization Framework: Bearer Token Usage,&rdquo; October&nbsp;2012.</span><span>)</span></a> [RFC6750]
            specification documents the permissible methods of sending the Access Token.
</p>
<p>It is RECOMMENDED that the Client use the
	    <tt>Authorization</tt> header field
	    method for all requests and that they use the <tt>GET</tt> method.
</p>
<p>
	    The following is a non-normative example of a UserInfo request:
	  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  GET /userinfo HTTP/1.1
  Host: server.example.com
  Authorization: Bearer SlAV32hkKG
</pre></div>
<a name="UserInfoResponse"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
UserInfo Response</h3>

<p>The <tt>sub</tt> (subject) Claim in the UserInfo Endpoint response MUST exactly match the 
        <tt>sub</tt> Claim in the ID Token, before using additional UserInfo Endpoint Claims.
</p>
<p>Upon receipt of the UserInfo request, the UserInfo Endpoint MUST
        return the JSON Serialization of the UserInfo response as in
	Section 2.3.2 of <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages] in the HTTP response
        body unless a
	different format was specified during Registration
	<a class='info' href='#OpenID.Registration'>[OpenID.Registration]<span> (</span><span class='info'>Sakimura, N., Bradley, J., and M. Jones, &ldquo;OpenID Connect Dynamic Client Registration 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a>.
	The content-type of the HTTP response MUST be set to <tt>application/json</tt> if the response body is a text
        JSON structure;
	the response body SHOULD be encoded using UTF-8.
	If the JSON response is
        signed or encrypted, then the
        content-type MUST be set to <tt>application/jwt</tt>.
</p>
<p>Upon receipt of the UserInfo Response, the Client MUST verify 
        the response in accordance with
	Section 5.3 (UserInfo Response Validation) of <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages].
        
</p>
<p>Following is a non-normative example of such
          response:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  HTTP/1.1 200 OK
  Content-Type: application/json

  {
   "sub": "248289761001",
   "name": "Jane Doe"
   "given_name": "Jane",
   "family_name": "Doe",
   "email": "janedoe@example.com",
   "picture": "http://example.com/janedoe/me.jpg"
  }
</pre></div>
<a name="UserInfoErrorResponse"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
UserInfo Error Response</h3>

<p>When an error condition occurs, the UserInfo Endpoint returns
  an Error Response as defined in Section 3 of
  the <a class='info' href='#RFC6750'>OAuth 2.0 Bearer Token Usage<span> (</span><span class='info'>Jones, M. and D. Hardt, &ldquo;The OAuth 2.0 Authorization Framework: Bearer Token Usage,&rdquo; October&nbsp;2012.</span><span>)</span></a> [RFC6750] specification
  utilizing an error code as specified in
  Section 2.3.3 of <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages].
</p>
<p>Following is a non-normative example of an error
      response:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  HTTP/1.1 401 Unauthorized
  WWW-Authenticate: Bearer realm="example.com",
                       error="invalid_token",
                       error_description="The Access Token expired"
</pre></div>
<a name="self_issued"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Self-Issued OpenID Provider</h3>

<p>
	OpenID Connect supports Self-Issued OpenID Providers -
	personal OPs that issue self-signed ID Tokens.
	Self-Issued OPs use the special Issuer Identifier
	<tt>https://self-issued.me</tt>.
      
</p>
<p>
	The messages used to communicate with Self-Issued OPs are
	mostly the same as those used to communicate with other OPs.
	Specifications for the few additional parameters used and
	for the values of some parameters in the Self-Issued case
	are described in Section 7 of the
	<a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages]
	specification.
      
</p>
<a name="client_Initiate_login"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Initiating Login at Client from Third Party</h3>

<p>
	In some cases, the login flow may start at the Authorization Server
	or another party by contacting the Client via a stored link.
	The target resource at the Client may be a deep link,
	rather than a default landing page.
      
</p>
<p>
	The Client may optionally <a class='info' href='#OpenID.Registration'>register<span> (</span><span class='info'>Sakimura, N., Bradley, J., and M. Jones, &ldquo;OpenID Connect Dynamic Client Registration 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Registration]
	an <tt>initiate_login_uri</tt> that
	can be used by the Authorization Server
	or another party to initiate a login for an End-User at the Client.
      
</p>
<p>
	The Authorization Server or a third party sends a
	Login Initiation Request to the
	Client Initiation URI with the following parameters:
      
</p>
<p>
	</p>
<blockquote class="text"><dl>
<dt>login_hint</dt>
<dd>REQUIRED.
	    Hint to the Authorization Server
            about the login identifier the End-User may use to log in (if necessary).
          
</dd>
<dt>iss</dt>
<dd>REQUIRED.
	    Issuer Identifier for the Issuer that the Client is to send
	    the authentication request to. 
            Its value MUST be a URL using the <tt>https</tt> scheme.
          
</dd>
<dt>target_link_uri</dt>
<dd>OPTIONAL.
	    URI that the Client is requested to redirect to after authentication.
	    Clients MUST verify the value of the
            <tt>target_link_uri</tt> to prevent being used as
	    an open redirector to external sites.
          
</dd>
</dl></blockquote><p>
      
</p>
<p>
	Other parameters MAY be sent, if defined by extensions.
	Any parameters used that are not understood MUST be ignored by the Client.
      
</p>
<p>Clients SHOULD employ frame busting and other techniques to prevent
      users from being logged in by third party sites without their knowledge.
</p>
<a name="Serializations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Serializations</h3>

<p>
	Messages are serialized using one of the following methods:
        </p>
<ol class="text">
<li>Query String Serialization
</li>
<li>Form Serialization
</li>
<li>JSON Serialization
</li>
</ol><p>
	Not all methods can be used for all messages.
      
</p>
<a name="qss"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Query String Serialization</h3>

<p>In order to serialize the parameters using the Query String
        Serialization, the Client constructs the string by adding the
        parameters and values to the query component of a URL using the <tt>application/x-www-form-urlencoded</tt> format as
        defined by <a class='info' href='#W3C.REC-html401-19991224'>[W3C.REC&#8209;html401&#8209;19991224]<span> (</span><span class='info'>Hors, A., Raggett, D., and I. Jacobs, &ldquo;HTML 4.01 Specification,&rdquo; December&nbsp;1999.</span><span>)</span></a>.
	Query String Serialization is typically used in HTTP <tt>GET</tt> requests.
</p>
<p>Following is a non-normative example of such
          serialization:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  GET /authorize?scope=openid&amp;response_type=code
    &amp;client_id=s6BhdRkqt3
    &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb HTTP/1.1
  Host: server.example.com
</pre></div>
<a name="form_serialization"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
Form Serialization</h3>

<p>Parameters and their values are Form Serialized by adding the 
        parameter names and values to the entity body of the HTTP request using
        the <tt>application/x-www-form-urlencoded</tt> format
        as defined by <a class='info' href='#W3C.REC-html401-19991224'>[W3C.REC&#8209;html401&#8209;19991224]<span> (</span><span class='info'>Hors, A., Raggett, D., and I. Jacobs, &ldquo;HTML 4.01 Specification,&rdquo; December&nbsp;1999.</span><span>)</span></a>.
	Form Serialization is typically used in HTTP <tt>POST</tt> requests.
</p>
<p>Following is a non-normative example of such
          serialization:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  POST /authorize HTTP/1.1
  Host: server.example.com
  Content-Type: application/x-www-form-urlencoded

  scope=openid&amp;response_type=code
    &amp;client_id=s6BhdRkqt3
    &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
</pre></div>
<a name="js"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3"></a><h3>7.3.&nbsp;
JSON Serialization</h3>

<p>The parameters are serialized into a JSON structure by adding each
	parameter at the highest structure level. Parameter names and string
	values are included as JSON strings. Numerical values are included as
	JSON numbers. Each parameter MAY have a JSON structure as its value.
</p>
<p>Following is a non-normative example of such
	  serialization:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  {
   "access_token":"SlAV32hkKG",
   "expires_in":3600,
   "refresh_token":"8xLOxBtZp8"
  }
</pre></div>
<a name="ImplementationConsiderations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Implementation Considerations</h3>

<p>
	This specification defines features used by both Relying Parties and
	OpenID Providers.  Features that are mandatory to implement for
	Relying Parties are already described in the
	<a class='info' href='#OpenID.Basic'>OpenID Connect Basic Client Profile 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., and C. Mortimore, &ldquo;OpenID Connect Basic Client Profile 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Basic] and
	<a class='info' href='#OpenID.Implicit'>OpenID Connect Implicit Client Profile 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Implicit Client Profile 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Implicit]
	specifications, and so are not discussed again here.
      
</p>
<p>
	All OpenID Providers MUST implement the features that are already listed elsewhere
	in this specification as being "REQUIRED" or are described with a "MUST".
	Since this specification is a protocol binding for the
	<a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages] specification,
	all the implementation considerations described in that specification
	also apply here.
      
</p>
<a name="disco_reg"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
Discovery and Registration</h3>

<p>Some OpenID Connect installations can use a pre-configured set of
	OpenID Providers and/or Relying Parties. In those cases, it may not be
	necessary to support dynamic discovery of information about identities
	or services or dynamic registration of Clients.
</p>
<p>However, if installations choose to support unanticipated
	interactions between Relying Parties and OpenID Providers that do not
	have pre-configured relationships, they SHOULD accomplish this by
	implementing the facilities defined in the <a class='info' href='#OpenID.Discovery'>OpenID Connect Discovery 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., and E. Jay, &ldquo;OpenID Connect Discovery 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Discovery] and <a class='info' href='#OpenID.Registration'>OpenID Connect Dynamic Client Registration
	1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., and M. Jones, &ldquo;OpenID Connect Dynamic Client Registration 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Registration] specifications.
</p>
<a name="security_considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Security Considerations</h3>

<p>This specification references the security considerations defined in
      <a class='info' href='#OpenID.Messages'>OpenID Connect Messages 1.0<span> (</span><span class='info'>Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;OpenID Connect Messages 1.0,&rdquo; May&nbsp;2013.</span><span>)</span></a> [OpenID.Messages].
</p>
<p>In addition, the following list of attack vectors and remedies are
      also considered.
</p>
<a name="ImplicitGrantFlowThreats"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.1"></a><h3>9.1.&nbsp;
Implicit Grant Flow Threats</h3>

<p>In the implicit grant flow, the Access Token is returned in the
        fragment part of the Client's <tt>redirect_uri</tt> through HTTPS, thus it is
        protected between the OP and the User-Agent, and User-Agent and the
        RP. The only the place it can be captured is the User-Agent where the
        TLS session is terminated, and is possible if the User-Agent is
        infested by malware.
</p>
<a name="TLS_requirements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.2"></a><h3>9.2.&nbsp;
TLS Requirements</h3>

<p>
	  Implementations MUST support TLS.
	  Which version(s) ought to be implemented will vary over
	  time, and depend on the widespread deployment and known
	  security vulnerabilities at the time of implementation.
	  At the time of this writing,
	  TLS version 1.2 <a class='info' href='#RFC5246'>[RFC5246]<span> (</span><span class='info'>Dierks, T. and E. Rescorla, &ldquo;The Transport Layer Security (TLS) Protocol Version 1.2,&rdquo; August&nbsp;2008.</span><span>)</span></a>
	  is the most recent version, but has very limited actual
	  deployment, and might not be readily available in
	  implementation toolkits.
	  TLS version 1.0 <a class='info' href='#RFC2246'>[RFC2246]<span> (</span><span class='info'>Dierks, T. and C. Allen, &ldquo;The TLS Protocol Version 1.0,&rdquo; January&nbsp;1999.</span><span>)</span></a>
	  is the most widely deployed version, and will give the
	  broadest interoperability.
	
</p>
<p>
	  To protect against information disclosure and tampering,
	  confidentiality protection MUST be applied using TLS
	  with a ciphersuite that provides confidentiality and
	  integrity protection.
	
</p>
<p>
	  Whenever TLS is used, a TLS server certificate check
	  MUST be performed, per <a class='info' href='#RFC6125'>RFC 6125<span> (</span><span class='info'>Saint-Andre, P. and J. Hodges, &ldquo;Representation and Verification of Domain-Based Application Service Identity within Internet Public Key Infrastructure Using X.509 (PKIX) Certificates in the Context of Transport Layer Security (TLS),&rdquo; March&nbsp;2011.</span><span>)</span></a> [RFC6125].
	
</p>
<a name="privacy_considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Privacy Considerations</h3>

<p>The UserInfo response typically contains Personally Identifiable
      Information. As such, End-User consent for the release of the information
      for the specified purpose SHOULD be obtained at or prior to the
      authorization time in accordance with relevant regulations. The purpose
      of use is typically registered in association with the <tt>redirect_uri</tt>.
</p>
<p>Only necessary UserInfo data should be stored at the Client and the
      Client SHOULD associate the received data with the purpose of use
      statement.
</p>
<p>The Resource Server SHOULD make the UserInfo access log available to 
      the End-User so that the End-User can monitor who accessed his data.
</p>
<p>To protect the End-User from a possible correlation among Clients, the
      use of a Pairwise Pseudonymous Identifier (PPID) as the
      <tt>sub</tt> (subject) SHOULD be considered.
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
IANA Considerations</h3>

<p>This document makes no requests of IANA.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="JWE">[JWE]</a></td>
<td class="author-text">Jones, M., Rescorla, E., and J. Hildebrand, &ldquo;<a href="http://tools.ietf.org/html/draft-ietf-jose-json-web-encryption">JSON Web Encryption (JWE)</a>,&rdquo; draft-ietf-jose-json-web-encryption (work in progress), April&nbsp;2013 (<a href="http://tools.ietf.org/html/draft-ietf-jose-json-web-encryption">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="JWS">[JWS]</a></td>
<td class="author-text">Jones, M., Bradley, J., and N. Sakimura, &ldquo;<a href="http://tools.ietf.org/html/draft-ietf-jose-json-web-signature">JSON Web Signature (JWS)</a>,&rdquo; draft-ietf-jose-json-web-signature (work in progress), April&nbsp;2013 (<a href="http://tools.ietf.org/html/draft-ietf-jose-json-web-signature">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="JWT">[JWT]</a></td>
<td class="author-text">Jones, M., Bradley, J., and N. Sakimura, &ldquo;<a href="http://tools.ietf.org/html/draft-ietf-oauth-json-web-token">JSON Web Token (JWT)</a>,&rdquo; draft-ietf-oauth-json-web-token (work in progress), April&nbsp;2013 (<a href="http://tools.ietf.org/html/draft-ietf-oauth-json-web-token">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="OAuth.Responses">[OAuth.Responses]</a></td>
<td class="author-text">de Medeiros, B., Scurtescu, M., and P. Tarjan, &ldquo;<a href="http://openid.net/specs/oauth-v2-multiple-response-types-1_0.html">OAuth 2.0 Multiple Response Type Encoding Practices</a>,&rdquo; November&nbsp;2012.</td></tr>
<tr><td class="author-text" valign="top"><a name="OpenID.Discovery">[OpenID.Discovery]</a></td>
<td class="author-text">Sakimura, N., Bradley, J., Jones, M., and E. Jay, &ldquo;<a href="http://openid.net/specs/openid-connect-discovery-1_0.html">OpenID Connect Discovery 1.0</a>,&rdquo; May&nbsp;2013.</td></tr>
<tr><td class="author-text" valign="top"><a name="OpenID.Messages">[OpenID.Messages]</a></td>
<td class="author-text">Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;<a href="http://openid.net/specs/openid-connect-messages-1_0.html">OpenID Connect Messages 1.0</a>,&rdquo; May&nbsp;2013.</td></tr>
<tr><td class="author-text" valign="top"><a name="OpenID.Registration">[OpenID.Registration]</a></td>
<td class="author-text">Sakimura, N., Bradley, J., and M. Jones, &ldquo;<a href="http://openid.net/specs/openid-connect-registration-1_0.html">OpenID Connect Dynamic Client Registration 1.0</a>,&rdquo; May&nbsp;2013.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2246">[RFC2246]</a></td>
<td class="author-text"><a href="mailto:tdierks@certicom.com">Dierks, T.</a> and <a href="mailto:callen@certicom.com">C. Allen</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2246">The TLS Protocol Version 1.0</a>,&rdquo; RFC&nbsp;2246, January&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2246.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2616.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.pdf">PDF</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2616.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2616.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5246">[RFC5246]</a></td>
<td class="author-text">Dierks, T. and E. Rescorla, &ldquo;<a href="http://tools.ietf.org/html/rfc5246">The Transport Layer Security (TLS) Protocol Version 1.2</a>,&rdquo; RFC&nbsp;5246, August&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5246.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5646">[RFC5646]</a></td>
<td class="author-text">Phillips, A. and M. Davis, &ldquo;<a href="http://tools.ietf.org/html/rfc5646">Tags for Identifying Languages</a>,&rdquo; BCP&nbsp;47, RFC&nbsp;5646, September&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5646.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC6125">[RFC6125]</a></td>
<td class="author-text">Saint-Andre, P. and J. Hodges, &ldquo;<a href="http://tools.ietf.org/html/rfc6125">Representation and Verification of Domain-Based Application Service Identity within Internet Public Key Infrastructure Using X.509 (PKIX) Certificates in the Context of Transport Layer Security (TLS)</a>,&rdquo; RFC&nbsp;6125, March&nbsp;2011 (<a href="http://www.rfc-editor.org/rfc/rfc6125.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC6749">[RFC6749]</a></td>
<td class="author-text">Hardt, D., &ldquo;<a href="http://tools.ietf.org/html/rfc6749">The OAuth 2.0 Authorization Framework</a>,&rdquo; RFC&nbsp;6749, October&nbsp;2012 (<a href="http://www.rfc-editor.org/rfc/rfc6749.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC6750">[RFC6750]</a></td>
<td class="author-text">Jones, M. and D. Hardt, &ldquo;<a href="http://tools.ietf.org/html/rfc6750">The OAuth 2.0 Authorization Framework: Bearer Token Usage</a>,&rdquo; RFC&nbsp;6750, October&nbsp;2012 (<a href="http://www.rfc-editor.org/rfc/rfc6750.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.REC-html401-19991224">[W3C.REC-html401-19991224]</a></td>
<td class="author-text">Hors, A., Raggett, D., and I. Jacobs, &ldquo;<a href="http://www.w3.org/TR/1999/REC-html401-19991224">HTML 4.01 Specification</a>,&rdquo; World Wide Web Consortium Recommendation&nbsp;REC-html401-19991224, December&nbsp;1999 (<a href="http://www.w3.org/TR/1999/REC-html401-19991224">HTML</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="CORS">[CORS]</a></td>
<td class="author-text">Opera Software ASA, &ldquo;<a href="http://www.w3.org/TR/access-control/">Cross-Origin Resource Sharing</a>,&rdquo; July&nbsp;2010.</td></tr>
<tr><td class="author-text" valign="top"><a name="OpenID.Basic">[OpenID.Basic]</a></td>
<td class="author-text">Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., and C. Mortimore, &ldquo;<a href="http://openid.net/specs/openid-connect-basic-1_0.html">OpenID Connect Basic Client Profile 1.0</a>,&rdquo; May&nbsp;2013.</td></tr>
<tr><td class="author-text" valign="top"><a name="OpenID.Implicit">[OpenID.Implicit]</a></td>
<td class="author-text">Sakimura, N., Bradley, J., Jones, M., de Medeiros, B., Mortimore, C., and E. Jay, &ldquo;<a href="http://openid.net/specs/openid-connect-implicit-1_0.html">OpenID Connect Implicit Client Profile 1.0</a>,&rdquo; May&nbsp;2013.</td></tr>
</table>

<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Acknowledgements</h3>

<p>The OpenID Community would like to thank the following people for the
      work they've done in the drafting and editing of this specification.
</p>
<p></p>
<blockquote class="text">
<p>Naveen Agarwal (naa@google.com), Google
</p>
<p>John Bradley (ve7jtb@ve7jtb.com), Ping Identity
</p>
<p>Tim Bray (tbray@textuality.com), Google
</p>
<p>Breno de Medeiros (breno@gmail.com), Google
</p>
<p>George Fletcher (gffletch@aol.com), AOL
</p>
<p>Ryo Ito (ryo.ito@mixi.co.jp), mixi, Inc.
</p>
<p>Michael B. Jones (mbj@microsoft.com), Microsoft
</p>
<p>Hideki Nara (hideki.nara@gmail.com), Takt Communications
</p>
<p>Axel Nennker (axel.nennker@telekom.de), Deutsche Telekom
</p>
<p>Nat Sakimura (n-sakimura@nri.co.jp), Nomura Research Institute, Ltd.
</p>
</blockquote>

<a name="Notices"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Notices</h3>

<p>Copyright (c) 2013 The OpenID Foundation.
</p>
<p>
	The OpenID Foundation (OIDF) grants to any Contributor, developer, 
	implementer, or other interested party a non-exclusive, royalty free, 
	worldwide copyright license to reproduce, prepare derivative works from, 
	distribute, perform and display, this Implementers Draft or 
	Final Specification solely for the purposes of (i) developing 
	specifications, and (ii) implementing Implementers Drafts and 
	Final Specifications based on such documents, provided that attribution 
	be made to the OIDF as the source of the material, but that such attribution 
	does not indicate an endorsement by the OIDF.
      
</p>
<p>
	The technology described in this specification was 
	made available from contributions from various sources, 
	including members of the OpenID Foundation and others.  
	Although the OpenID Foundation has taken steps to help ensure 
	that the technology is available for distribution, it takes 
	no position regarding the validity or scope of any intellectual 
	property or other rights that might be claimed to pertain to 
	the implementation or use of the technology described in 
	this specification or the extent to which any license under 
	such rights might or might not be available; neither does it 
	represent that it has made any independent effort to identify 
	any such rights.  The OpenID Foundation and the contributors 
	to this specification make no (and hereby expressly disclaim any) 
	warranties (express, implied, or otherwise), including implied 
	warranties of merchantability, non-infringement, fitness for 
	a particular purpose, or title, related to this specification, 
	and the entire risk as to implementing this specification is 
	assumed by the implementer.  The OpenID Intellectual 
	Property Rights policy requires contributors to offer 
	a patent promise not to assert certain patent claims against 
	other contributors and against implementers.  The OpenID Foundation invites 
	any interested party to bring to its attention any copyrights, 
	patents, patent applications, or other proprietary rights 
	that may cover technology that may be required to practice 
	this specification.
      
</p>
<a name="History"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C"></a><h3>Appendix C.&nbsp;
Document History</h3>

<p>[[ To be removed from the final specification ]]
</p>
<p>-19
	</p>
<ul class="text">
<li>
	    Fixed #821 - Moved definition of JSON Serialization to where it's used.
	  
</li>
</ul><p>
      
</p>
<p>-18
	</p>
<ul class="text">
<li>
	    Fixed #801 - Removed <tt>schema</tt> and <tt>id</tt>
	    parameters to UserInfo Endpoint.
	    Also fixed related issue #791 - Removed <tt>invalid_schema</tt> error.
	  
</li>
</ul><p>
      
</p>
<p>-17
        </p>
<ul class="text">
<li>
	    Fixed #715 - Delete "profile" from request object example.
	  
</li>
<li>
	    Fixed #722 - Text on "id_token_hint" needs to be clarified.
	  
</li>
<li>
	    Fixed #718 - Text on re-encrypting should be clearer.
	  
</li>
<li>
	    Fixed #714 - Clarified text specifying response_type behaviors, including
	    prohibiting the use of the "token" response_type, since it returns no ID Token.
	  
</li>
<li>
	    Added Security Considerations section about TLS version requirements and usage.
	  
</li>
<li>
	    Removed language about supporting other transport-layer
	    mechanisms with equivalent security to TLS.
	  
</li>
<li>
	    State that when any validations fail, any operations requiring
	    the information that failed to correctly validate MUST be aborted and
	    the information that failed to validate MUST NOT be used.
	  
</li>
<li>
	    Fixed #744 - Promoted <tt>max_age</tt>
	    to being a top-level parameter.
	  
</li>
<li>
	    Fixed #748 - Promoted <tt>claims</tt> to being a
	    top-level parameter separate from the OpenID Request Object.
	  
</li>
<li>
	    Fixed #597 - Changed representation of omitted year in <tt>birthdate</tt>
	    from <tt>9999</tt> to <tt>0000</tt>.
	  
</li>
<li>
	    Fixed #773 - Added <tt>request_uris</tt>
	    registration parameter to pre-register
	    <tt>request_uri</tt> values.
	    Also clarified that Request File contents may be cached.
	  
</li>
<li>
	    Deleted top-level <tt>policy_url</tt> parameter from the
	    Self-Issued case, since it is already a
	    <tt>registration</tt> parameter member.
	  
</li>
<li>
	    Fixed #778 - Added <tt>registration</tt> parameter
	    to Self-Issued request example.
	  
</li>
<li>
	    Fixed #782 - Changed uses of "_url" in identifiers to "_uri".
	  
</li>
<li>
	    Fixed #719 - Moved message definitions for Self-Issued OPs to the Messages spec.
	  
</li>
<li>
	    Fixed #788 - Renamed "OpenID Request Object" to "Request Object".
	  
</li>
<li>
	    Use legal <tt>acr</tt> values in examples.
	  
</li>
</ul><p>
      
</p>
<p>-16
        </p>
<ul class="text">
<li>
	    Added Implementation Considerations section.
	  
</li>
<li>
	    Fixed #698 - Inconsistent use of articles.
	  
</li>
<li>
	    Fixed #655 - Specify UTF-8 as encoding scheme whenever necessary.
	  
</li>
<li>
	    To remove ambiguity in the self-issued <tt>sub</tt>
	    computation, changed the text "the concatenation of the key values" to
	    "the concatenation of the bytes of the UTF-8 representations of
	    the base64url encoded key values".
	  
</li>
<li>
	    Renamed the <tt>user_jwk</tt> Claim to
	    <tt>sub_jwk</tt>, paralleling the change from
	    <tt>user_id</tt> to <tt>sub</tt>.
	  
</li>
<li>
	    Tracked JWK parameter name changes alg -> kty, mod -> n, exp -> e.
	  
</li>
</ul>

<p>-15
        </p>
<ul class="text">
<li>
	    Fixed #687 - Inconsistency between <tt>user_id</tt>
	    and <tt>prn</tt> claims.  The fix changed these names:
	    user_id -> sub, user_id_types_supported -> subject_types_supported,
	    user_id_type -> subject_type, and prn -> sub.
	  
</li>
<li>
	    Fixed #689 - Track JWT change that allows JWTs to have multiple audiences.
	  
</li>
<li>
	    Fixed #539 - Add scope for offline access.
	  
</li>
<li>Re #601 add Initiating login at a client from a third party
</li>
<li>
	    Made the OpenID Foundation Artifact Binding Working Group the change controller for
	    the values registered with IANA.
	  
</li>
<li>
	    Moved OAuth error registrations from Standard to Messages
	    since the errors are defined in Messages and not in Standard.
	  
</li>
<li> Re #657 Changed id_token to id_token_hint in Sec 2.3.1
</li>
</ul>

<p>-14
        </p>
<ul class="text">
<li>
	    Fixed #614 - Discovery - 3.2 Distinguishing between signature and integrity parameters for HMAC algorithms.
	    This fix tracks the parameter changes made to the JWE spec in draft-ietf-jose-json-web-encryption-06.
	    It deletes the parameters {userinfo,id_token}_encrypted_response_int.
	    It replaces the parameters {userinfo,id_token,request_object,token_endpoint}_algs_supported
	    with {userinfo,id_token,request_object,token_endpoint}_signing_alg_values_supported
	    and {userinfo,id_token,request_object,token_endpoint}_encryption_{alg,enc}_values_supported.
	  
</li>
<li>Fixed #666 - JWS signature validation vs. verification.
</li>
<li>Fixed #681 - Change remaining uses of "birthday" to "birthdate".
</li>
<li>Fixed #669 - Inconsistent treatment of redirect_uri parameter.
</li>
<li>Referenced OAuth 2.0 RFCs -- RFC 6749 and RFC 6750.
</li>
</ul>

<p>-13
        </p>
<ul class="text">
<li>Defined means of using a self-issued OP
</li>
</ul>

<p>-12
        </p>
<ul class="text">
<li>Updated matching of redirect URI to include query parameters
	  to match Google's implementation
</li>
</ul>

<p>-11
        </p>
<ul class="text">
<li>Removed <tt>claims_in_id_token</tt> scope value,
	  per decision on June 15, 2012 special working group call
</li>
</ul>

<p>-10
        </p>
<ul class="text">
<li>Changed <tt>verified</tt> to
	  <tt>email_verified</tt>, per issue #564
</li>
<li>Added scope value  <tt>claims_in_id_token</tt> as a switch
	  to indicate that the UserInfo claims should be returned in the
	  <tt>id_token</tt>, per issue #561
</li>
<li>Changed  <tt>optional</tt> claim request parameter
	  to <tt>essential</tt>, per issue #577
</li>
<li>Removed Check ID Endpoint, per issue #570
</li>
<li>Specified that parameters present in both the OpenID Request Object and the
	  OAuth 2.0 Authorization Request MUST exactly match, per issue #575
</li>
<li>Changed OpenID Request Object from being specified as a JWT
	  to being specified as a JWS signed base64url encoded JSON object, per issue #592
</li>
<li>Made use of the nonce REQUIRED when using the implicit flow
	  and OPTIONAL when using the code flow, per issue #569
</li>
<li>Changed client.example.com to client.example.org, per issue #251
</li>
<li>Removed example text for generating a nonce via a signed session cookie,
	  per issue #562
</li>
<li>Use standards track version of JSON Web Token spec
	  (draft-ietf-oauth-json-web-token)
</li>
</ul><p>
      
</p>
<p>-09</p>
<ul class="text">
<li>Added error interaction_required and removed
	  user_mismatched, per issue #523
</li>
<li>Changed invalid_request_request_uri to invalid_request_uri and
	  invalid_request_redirect_uri to invalid_redirect_uri, per issue #553
</li>
<li>Added optional id_token to authorization request parameters, per issue #535
</li>
<li>Removed use of non-existent scope parameters registry, per issue #558
</li>
<li>Updated Notices
</li>
<li>Updated References
</li>
</ul>

<p>-08</p>
<ul class="text">
<li>Updated version number and date
</li>
<li>Fix #543 Section 2.3.1.3 Request file requiring all request params to be included is false
</li>
<li>Fix Section 5.1 to reference Messages 2.4.1 rather than 3.3
</li>
<li>Added reference to CORS for JS clients to userinfo and check_id endpoints
</li>
</ul>

<p>-07</p>
<ul class="text">
<li>Removed definition and usage for assertion and claim object
</li>
<li>Removed Request File Registration Service
</li>
<li>Consistent use of End-User
</li>
<li>email scope allows access to the 'verified' claim
</li>
<li>Removed language pertaining to custom userinfo schemas
</li>
<li>Updated error section for refreshing access token
</li>
<li>Remove 'audience' parameter from Authorization Request
</li>
<li>Moved display=none to prompt=none
</li>
<li>Moved IANA considerations from Messages
</li>
<li>Check ID Endpoint returns only JSON
</li>
<li>Removed PPID scope value
</li>
<li>Reference Messages for validation of request object encryption and signature
</li>
<li>Redefined 'nonce' in Authorization Request. Changed to REQUIRED parameter.
</li>
<li>Changed usage of "approval" to "consent"
</li>
<li>Use RFC 6125 to verify TLS endpoints
</li>
<li>Added Privacy considerations
</li>
<li>Changed 'request_uri' to require HTTPS unless the referenced content is signed
	    and only needs to be reachable by AS
</li>
<li>Added hash and entropy considerations to 'request_uri'
</li>
<li>Added requirement to compare user_id from userinfo endpoint to id_token
</li>
<li>Check ID Endpoint SHOULD use POST
</li>
<li>Changed UserInfo Error Response to augment and return OAuth 2.0 Bearer Token Error Response
</li>
<li>Added section about string comparison rules needed
</li>
<li>Added Response Encoding according to Multiple Response Types spec
</li>
<li>Allows only 'id_token' for 'response_type' parameter in Authorization Request
</li>
<li>Clarified redirect_uris matching
</li>
<li>Added explanation of select_account
</li>
<li>Changed Security Considerations to refer to corresponding section in Messages
</li>
<li>Check ID Endpoint uses ID Token as Access Token according to Bearer Token spec
</li>
<li>Update John Bradley email and affiliation for Implementer's Draft
</li>
<li>Removed invalid_authorization_code, invalid_id_token error codes
</li>
</ul>

<p>-06</p>
<ul class="text">
<li>Reworked return type wording in section 4.4.1 per ticket #174.
</li>
<li>Added reference to registered return types.
</li>
<li>Bumped Version number and date.
</li>
<li>Make clear the server passes the value of nonce through untouched. Ticket #97.
</li>
<li>Prevent caching of request_uri. Ticket #148.
</li>
<li>Add nonce to request examples. Ticket #147.
</li>
<li>Fixed 4.3.1.3 per ticket #150.
</li>
<li>Fixed 4.3.2 to remove display scopes per ticket #172.
</li>
<li>Make scope optional for refresh in 5.2.
</li>
<li>Reference messages 3.2.2 for field definitions in section 5.2.1 per ticket #159.
</li>
<li>Removed scopes from display value in 4.3.1 per ticket #172.
</li>
<li>Make "code" and "id_token token" response types mandatory for Authorization Servers to support.
</li>
</ul>

<p>-05</p>
<ul class="text">
<li>Changed check_session to check_id.
</li>
<li>schema=openid now required when requesting UserInfo.
</li>
<li>Removed display values popup, touch, and mobile, since not well defined.
</li>
<li>Resolve issue #135, clarifying that the access_token MAY
          be sent in the message body.
</li>
</ul>

<p>-04 </p>
<ul class="text">
<li>Changes associated with renaming "Lite" to "Basic Client"
          and replacing "Core" and "Framework" with "Messages" and
          "Standard".
</li>
<li>Numerous cleanups, including updating references.
</li>
</ul>

<p>-03 </p>
<ul class="text">
<li>Added secret_type to the Token Endpoint.
</li>
<li>Minor edits to the samples.
</li>
</ul>

<p>-02 </p>
<ul class="text">
<li>Incorporates feedback from Nat Sakimura.
</li>
</ul>

<p>-01 </p>
<ul class="text">
<li>First Draft that incorporates the merge of the Core and Framework
          specs.
</li>
</ul>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nat Sakimura</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nomura Research Institute, Ltd.</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:n-sakimura@nri.co.jp">n-sakimura@nri.co.jp</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">John Bradley</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ping Identity</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:ve7jtb@ve7jtb.com">ve7jtb@ve7jtb.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Michael B. Jones</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Microsoft</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mbj@microsoft.com">mbj@microsoft.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Breno de Medeiros</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Google</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:breno@google.com">breno@google.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Edmund Jay</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Illumila</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:ejay@mgi1.com">ejay@mgi1.com</a></td></tr>
</table>
</body></html>
