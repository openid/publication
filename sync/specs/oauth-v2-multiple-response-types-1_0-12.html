<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Final: OAuth 2.0 Multiple Response Type Encoding Practices</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="OAuth 2.0 Multiple Response Type Encoding Practices">
<meta name="generator" content="xml2rfc v1.36 (http://xml.resource.org/)">
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: small; color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: small; font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: small; font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: small; text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Final</td><td class="header">B. de Medeiros, Ed.</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">M. Scurtescu</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Google</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">P. Tarjan</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Facebook</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">M. Jones</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Microsoft</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">February 25, 2014</td></tr>
</table></td></tr></table>
<h1><br />OAuth 2.0 Multiple Response Type Encoding Practices</h1>

<h3>Abstract</h3>

<p>
	This specification provides guidance on the proper encoding of responses to
        OAuth 2.0 Authorization Requests in which the request uses a Response Type
	value that includes space characters.
	Furthermore, this specification registers several new Response Type values
	in the OAuth Authorization Endpoint Response Types registry.
      
</p>
<p>
	This specification also defines a
	Response Mode Authorization Request parameter that
	informs the Authorization Server of the mechanism to be used
	for returning Authorization Response parameters from the Authorization Endpoint.
       
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#Introduction">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rnc">1.1.</a>&nbsp;
Requirements Notation and Conventions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Terminology">1.2.</a>&nbsp;
Terminology<br />
<a href="#ResponseTypesAndModes">2.</a>&nbsp;
Response Types and Response Modes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ResponseModes">2.1.</a>&nbsp;
Response Modes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#MultiValueResponseTypes">2.2.</a>&nbsp;
Multiple-Valued Response Types<br />
<a href="#id_token">3.</a>&nbsp;
ID Token Response Type<br />
<a href="#none">4.</a>&nbsp;
None Response Type<br />
<a href="#Combinations">5.</a>&nbsp;
Definitions of Multiple-Valued Response Type Combinations<br />
<a href="#IANA">6.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#OAuthResponseTypesReg">6.1.</a>&nbsp;
OAuth Authorization Endpoint Response Types Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#RegistryContents">6.1.1.</a>&nbsp;
Registry Contents<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#OAuthParametersRegistry">6.2.</a>&nbsp;
OAuth Parameters Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ParametersContents">6.2.1.</a>&nbsp;
Registry Contents<br />
<a href="#Security">7.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative References<br />
<a href="#FragmentExample">Appendix&nbsp;A.</a>&nbsp;
Example using Multiple-Valued Response Type<br />
<a href="#Acknowledgements">Appendix&nbsp;B.</a>&nbsp;
Acknowledgements<br />
<a href="#Notices">Appendix&nbsp;C.</a>&nbsp;
Notices<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="Introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<a name="rnc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Requirements Notation and Conventions</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
	"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
	document are to be interpreted as described in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
</p>
<p>
	  In the .txt version of this document,
	  values are quoted to indicate that they are to be taken literally.
	  When using these values in protocol messages,
	  the quotes MUST NOT be used as part of the value.
	  In the HTML version of this document,
	  values to be taken literally are indicated by
	  the use of <tt>this fixed-width font</tt>.
	
</p>
<a name="Terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Terminology</h3>

<p>
	  This specification uses the terms "Access Token", "Authorization Code",
	  "Authorization Endpoint", "Authorization Grant", "Authorization Server",
	  "Client", "Client Identifier", "Client Secret",
	  "Protected Resource", "Redirection URI", "Refresh Token",
	  "Resource Owner", "Resource Server", "Response Type", and "Token Endpoint"
	  defined by <a class='info' href='#RFC6749'>OAuth 2.0<span> (</span><span class='info'>Hardt, D., &ldquo;The OAuth 2.0 Authorization Framework,&rdquo; October&nbsp;2012.</span><span>)</span></a> [RFC6749]
	  and the term "User Agent" defined by <a class='info' href='#RFC2616'>RFC 2616<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2616].
	  This specification also defines the following terms:
	  </p>
<blockquote class="text"><dl>
<dt>Multiple-Valued Response Types</dt>
<dd>
	      
	      The OAuth 2.0 specification allows
	      for registration of space-separated <tt>response_type</tt> parameter values. 
	      If a Response Type contains one of more space characters (%20), it is
	      compared as a space-delimited list of values in which the order of
	      values does not matter.
	    
</dd>
<dt>Response Mode</dt>
<dd>
	      
	      The Response Mode determines how the Authorization Server
	      returns result parameters from the Authorization Endpoint.
	      Non-default modes are specified using the
	      <tt>response_mode</tt> request parameter.
	      If <tt>response_mode</tt> is not present
	      in a request, the default Response Mode mechanism specified
	      by the Response Type is used.
	    
</dd>
</dl></blockquote><p>
	
</p>
<a name="ResponseTypesAndModes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Response Types and Response Modes</h3>

<p>
	The Response Type request parameter <tt>response_type</tt>
	informs the Authorization Server of the
	desired authorization processing flow,
	including what parameters are returned from the endpoints used.
	The Response Mode request parameter
	<tt>response_mode</tt>
	informs the Authorization Server of the mechanism to be used
	for returning Authorization Response parameters from the Authorization Endpoint.
	Each Response Type value also defines a default Response Mode
	mechanism to be used, if no Response Mode is specified
	using the request parameter.	
      
</p>
<a name="ResponseModes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Response Modes</h3>

<p>
	  This specification defines the following OAuth Authorization Request parameter:

	</p>
<blockquote class="text"><dl>
<dt>response_mode</dt>
<dd>
	    
	    OPTIONAL.
	    Informs the Authorization Server of the mechanism to be used
	    for returning Authorization Response parameters from the Authorization Endpoint.
	    This use of this parameter is NOT RECOMMENDED with a value that specifies
	    the same Response Mode as the default Response Mode for the Response Type used.
	  
</dd>
</dl></blockquote><p>
	
</p>
<p>
	  This specification defines the following Response Modes, which are described
	  with their <tt>response_mode</tt> parameter values:
	
</p>
<p>
	  </p>
<blockquote class="text"><dl>
<dt>query</dt>
<dd>
	      
	      In this mode, Authorization Response parameters are encoded in
	      the query string added to the <tt>redirect_uri</tt>
	      when redirecting back to the Client.
	    
</dd>
<dt>fragment</dt>
<dd>
	      
	      In this mode, Authorization Response parameters are encoded in
	      the fragment added to the <tt>redirect_uri</tt>
	      when redirecting back to the Client.
	    
</dd>
</dl></blockquote><p>
	
</p>
<p>
	  For purposes of this specification, the default Response Mode for the
	  OAuth 2.0 <tt>code</tt>
	  Response Type is the <tt>query</tt> encoding.
	  For purposes of this specification, the default Response Mode for the
	  OAuth 2.0 <tt>token</tt>
	  Response Type is the <tt>fragment</tt> encoding.
	
</p>
<p>
	  See <a class='info' href='#OAuth.Post'>OAuth 2.0 Form Post Response Mode<span> (</span><span class='info'>Jones, M. and B. Campbell, &ldquo;OAuth 2.0 Form Post Response Mode,&rdquo; February&nbsp;2014.</span><span>)</span></a> [OAuth.Post]
	  for an example of a specification that defines an additional Response Mode.
	  Note that it is expected that additional Response Modes may be defined
	  by other specifications in the future, including possibly
	  ones utilizing the HTML5 postMessage API
	  and Cross Origin Resource Sharing (CORS).
	
</p>
<a name="MultiValueResponseTypes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Multiple-Valued Response Types</h3>

<p>
	  When a multiple-valued Response Type is defined, it is RECOMMENDED
	  that the following encoding rules be applied for the issued response
	  from the Authorization Endpoint.
	
</p>
<p>
	  All parameters returned from the Authorization Endpoint SHOULD
	  use the same Response Mode.
	  This recommendation applies to both success and error responses.
	
</p>
<p>
	  Rationale:  This significantly simplifies Client parameter processing.
	  It also can have positive performance benefits, as described below.
	
</p>
<p>
	  For instance, if a response includes fragment encoded parts,
	  a User Agent Client component must be involved to complete processing of the response.
	  If a new query parameter is added to the Client URI, it will cause the User Agent
	  to re-fetch the Client URI,
	  causing discontinuity of operation of the User Agent based Client components. If
	  only fragment encoding is used, the User Agent will simply reactivate the Client
	  component, which can then process the fragment and
	  also convey any parameters to a Client host as necessary, e.g., via XmlHttpRequest.
	  Therefore, full fragment encoding always results in lower latency for response processing.
	
</p>
<a name="id_token"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
ID Token Response Type</h3>

<p>This section registers a new Response Type, the <tt>id_token</tt>, in accordance
        with the stipulations in the OAuth 2.0 specification, Section 8.4. The intended purpose of
        the <tt>id_token</tt> is that it MUST provide an assertion of
        the identity of the Resource Owner as understood by the Authorization Server.
	The assertion MUST 
        specify a targeted audience, e.g. the requesting Client. However, the specific semantics of
        the assertion and how it can be validated are not specified in this document.
</p>
<p>
	</p>
<blockquote class="text"><dl>
<dt>id_token</dt>
<dd>
	  
	  When supplied as the <tt>response_type</tt> parameter in an OAuth 2.0
          Authorization Request, a successful response MUST include the parameter
          <tt>id_token</tt>.
	  The Authorization Server SHOULD NOT return an OAuth 2.0
	  Authorization Code, Access Token, or Access Token Type in a successful
          response to the grant request. If a <tt>redirect_uri</tt>
	  is supplied, the User Agent SHOULD be redirected
          there after granting or denying access.
	  The request MAY include a <tt>state</tt> parameter,
	  and if so, the
          Authorization Server MUST echo its value as a response parameter when issuing
	  either a successful response or an error response.
	  The default Response Mode for this Response Type is the fragment encoding
	  and the query encoding MUST NOT be used.
	  Both successful and error responses SHOULD be returned using the supplied
	  Response Mode, or if none is supplied, using the default Response Mode.
	
</dd>
</dl></blockquote><p>
      
</p>
<p>Returning the <tt>id_token</tt> in a fragment reduces the likelihood that the <tt>id_token</tt> leaks
        during transport and mitigates the associated risks to the privacy of the user (Resource Owner).
</p>
<a name="none"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
None Response Type</h3>

<p>This section registers the Response Type <tt>none</tt>, in accordance
        with the stipulations in the OAuth 2.0 specification, Section 8.4.
        The intended purpose is to enable
        use cases where a party requests the Authorization Server to register a
	grant of access to a Protected Resource on behalf of a Client but requires
        no access credentials to be returned to the Client at that time. The means
        by which the Client eventually obtains the access credentials is left unspecified here.
</p>
<p>One scenario is where a user wishes to purchase an
        application from a market, and desires to authorize application installation and grant
        the application access to Protected Resources in a single step. However, since the user is
        not presently interacting with the (not yet active) application, it is not appropriate
        to return access credentials simultaneously in the authorization step.
</p>
<p>
	</p>
<blockquote class="text"><dl>
<dt>none</dt>
<dd>
	  
	  When supplied as the <tt>response_type</tt> parameter in an OAuth 2.0
	  Authorization Request, the Authorization Server SHOULD NOT return an OAuth 2.0
	  Authorization Code, Access Token, Access Token Type, or ID Token in a successful
          response to the grant request. If a <tt>redirect_uri</tt>
	  is supplied, the User Agent SHOULD be redirected
          there after granting or denying access.
	  The request MAY include a <tt>state</tt> parameter,
	  and if so, the
          Authorization Server MUST echo its value as a response parameter when issuing
	  either a successful response or an error response.
	  The default Response Mode for this Response Type is the query encoding.
	  Both successful and error responses SHOULD be returned using the supplied
	  Response Mode, or if none is supplied, using the default Response Mode.
	
</dd>
</dl></blockquote><p>
      
</p>
<p>
      The Response Type <tt>none</tt>
      SHOULD NOT be combined with other Response Types.
      
</p>
<a name="Combinations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Definitions of Multiple-Valued Response Type Combinations</h3>

<p>This section defines combinations of the values <tt>code</tt>, <tt>token</tt>, and <tt>id_token</tt>, which are each
        individually registered Response Types.
</p>
<p>
	  </p>
<blockquote class="text"><dl>
<dt>code&nbsp;token</dt>
<dd>
	      
	      When supplied as the value for the <tt>response_type</tt>
	      parameter, a successful response MUST include
	      an Access Token, an Access Token Type,
	      and an Authorization Code.
	      The default Response Mode for this Response Type is the fragment encoding
	      and the query encoding MUST NOT be used.
	      Both successful and error responses SHOULD be returned using the supplied
	      Response Mode, or if none is supplied, using the default Response Mode.
	    
</dd>
<dt>code&nbsp;id_token</dt>
<dd>
	      
	      When supplied as the value for the <tt>response_type</tt>
	      parameter, a successful response MUST include
	      both an Authorization Code and an <tt>id_token</tt>.
	      The default Response Mode for this Response Type is the fragment encoding
	      and the query encoding MUST NOT be used.
	      Both successful and error responses SHOULD be returned using the supplied
	      Response Mode, or if none is supplied, using the default Response Mode.
	    
</dd>
<dt>id_token&nbsp;token</dt>
<dd>
	      
	      When supplied as the value for the <tt>response_type</tt>
	      parameter, a successful response MUST include
	      an Access Token, an Access Token Type,
	      and an <tt>id_token</tt>.
	      The default Response Mode for this Response Type is the fragment encoding
	      and the query encoding MUST NOT be used.
	      Both successful and error responses SHOULD be returned using the supplied
	      Response Mode, or if none is supplied, using the default Response Mode.
	    
</dd>
<dt>code&nbsp;id_token&nbsp;token</dt>
<dd>
	      
	      When supplied as the value for the <tt>response_type</tt>
	      parameter, a successful response MUST include
	      an Authorization Code, an <tt>id_token</tt>,
	      an Access Token, and an Access Token Type.
	      The default Response Mode for this Response Type is the fragment encoding
	      and the query encoding MUST NOT be used.
	      Both successful and error responses SHOULD be returned using the supplied
	      Response Mode, or if none is supplied, using the default Response Mode.
	    
</dd>
</dl></blockquote><p>
	
</p>
<p>
	For all these Response Types,
	the request MAY include a <tt>state</tt> parameter,
	and if so, the
	Authorization Server MUST echo its value as a response parameter when issuing
	either a successful response or an error response.
      
</p>
<p>
	A non-normative request/response example as issued/received by the User Agent
	(with extra line breaks for display purposes only) is:
	</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  GET /authorize?
    response_type=id_token%20token
    &amp;client_id=s6BhdRkqt3
    &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
    &amp;state=af0ifjsldkj HTTP/1.1
  Host: server.example.com
</pre></div><p>

	</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  HTTP/1.1 302 Found
  Location: https://client.example.org/cb#
  access_token=SlAV32hkKG
  &amp;token_type=bearer
  &amp;id_token=eyJ0 ... NiJ9.eyJ1c ... I6IjIifX0.DeWt4Qu ... ZXso
  &amp;expires_in=3600
  &amp;state=af0ifjsldkj
</pre></div><p>

      
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<a name="OAuthResponseTypesReg"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
OAuth Authorization Endpoint Response Types Registration</h3>

<p>
	  This specification registers the <tt>response_type</tt>
	  values defined by this specification in the IANA
	  OAuth Authorization Endpoint Response Types registry
	  defined in <a class='info' href='#RFC6749'>RFC 6749<span> (</span><span class='info'>Hardt, D., &ldquo;The OAuth 2.0 Authorization Framework,&rdquo; October&nbsp;2012.</span><span>)</span></a> [RFC6749].
	
</p>
<a name="RegistryContents"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.1"></a><h3>6.1.1.&nbsp;
Registry Contents</h3>

<p> 

	  </p>
<ul class="text">
<li>
	      Response Type Name: <tt>id_token</tt>
	    
</li>
<li>
	      Change Controller:  OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net
	    
</li>
<li>
	      Specification Document(s):  http://openid.net/specs/oauth-v2-multiple-response-types-1_0.html
	    
</li>
</ul><p>
	  
</p>
<p>
	    </p>
<ul class="text">
<li>
		Response Type Name: <tt>none</tt>
	      
</li>
<li>
		Change Controller:  OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net
	      
</li>
<li>
		Specification Document(s):  http://openid.net/specs/oauth-v2-multiple-response-types-1_0.html
	      
</li>
</ul><p>
	  
</p>
<p>
	    </p>
<ul class="text">
<li>
		Response Type Name: <tt>code&nbsp;token</tt>
	      
</li>
<li>
		Change Controller:  OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net
	      
</li>
<li>
		Specification Document(s):  http://openid.net/specs/oauth-v2-multiple-response-types-1_0.html
	      
</li>
</ul><p>
	  
</p>
<p>
	    </p>
<ul class="text">
<li>
		Response Type Name: <tt>code&nbsp;id_token</tt>
	      
</li>
<li>
		Change Controller:  OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net
	      
</li>
<li>
		Specification Document(s):  http://openid.net/specs/oauth-v2-multiple-response-types-1_0.html
	      
</li>
</ul><p>
	  
</p>
<p>
	    </p>
<ul class="text">
<li>
		Response Type Name: <tt>id_token&nbsp;token</tt>
	      
</li>
<li>
		Change Controller:  OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net
	      
</li>
<li>
		Specification Document(s):  http://openid.net/specs/oauth-v2-multiple-response-types-1_0.html
	      
</li>
</ul><p>
	  
</p>
<p>
	    </p>
<ul class="text">
<li>
		Response Type Name: <tt>code&nbsp;id_token&nbsp;token</tt>
	      
</li>
<li>
		Change Controller:  OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net
	      
</li>
<li>
		Specification Document(s):  http://openid.net/specs/oauth-v2-multiple-response-types-1_0.html
	      
</li>
</ul><p>
	  
</p>
<a name="OAuthParametersRegistry"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
OAuth Parameters Registration</h3>

<p>
	  This specification registers the following parameter
	  in the IANA
	  OAuth Parameters registry
	  defined in <a class='info' href='#RFC6749'>RFC 6749<span> (</span><span class='info'>Hardt, D., &ldquo;The OAuth 2.0 Authorization Framework,&rdquo; October&nbsp;2012.</span><span>)</span></a> [RFC6749].
	
</p>
<a name="ParametersContents"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.1"></a><h3>6.2.1.&nbsp;
Registry Contents</h3>

<p> 
	  </p>
<ul class="text">
<li>Parameter name: <tt>response_mode</tt>
</li>
<li>Parameter usage location: Authorization Request
</li>
<li>Change controller: OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net
</li>
<li>Specification document(s): <a class='info' href='#ResponseModes'>Section&nbsp;2.1<span> (</span><span class='info'>Response Modes</span><span>)</span></a> of this document
</li>
<li>Related information: None
</li>
</ul><p>
	  
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>
	There are security implications to encoding response values in the query string.
	The HTTP Referer header includes query parameters,
	and so any values encoded in query parameters will leak to third parties.
	Thus, while it is safe to encode an Authorization Code as a query parameter
	when using a Confidential Client (because it can't be used without the
	Client Secret, which third parties won't have), more sensitive information
	such as Access Tokens and ID Tokens MUST NOT be encoded in the query string.
	In no case should a set of Authorization Response parameters whose default Response Mode
	is the fragment encoding be encoded using the query encoding.
      
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2616.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.pdf">PDF</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2616.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2616.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC6749">[RFC6749]</a></td>
<td class="author-text">Hardt, D., &ldquo;<a href="http://tools.ietf.org/html/rfc6749">The OAuth 2.0 Authorization Framework</a>,&rdquo; RFC&nbsp;6749, October&nbsp;2012 (<a href="http://www.rfc-editor.org/rfc/rfc6749.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="OAuth.Post">[OAuth.Post]</a></td>
<td class="author-text">Jones, M. and B. Campbell, &ldquo;<a href="http://openid.net/specs/oauth-v2-form-post-response-mode-1_0.html">OAuth 2.0 Form Post Response Mode</a>,&rdquo; February&nbsp;2014.</td></tr>
</table>

<a name="FragmentExample"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Example using Multiple-Valued Response Type</h3>

<p>
	The following is non-normative example of an Authorization Request using
	the Multiple-Valued Response Type <tt>code&nbsp;token</tt>
	and a resulting Authorization Response.
	The response uses the <tt>fragment</tt> Response Mode,
	which is the default for this Response Type.
	Line wraps within values are for display purposes only.
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  GET /authorize?
    response_type=code%20token
    &amp;client_id=s6BhdRkqt3
    &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
    &amp;state=af0ifjsldkj HTTP/1.1
  Host: server.example.com

  HTTP/1.1 302 Found
  Location: https://client.example.org/cb#
    access_token=2YotnFZFEjr1zCsicMWpAA
    &amp;token_type=Bearer
    &amp;code=SplxlOBeZQQYbYS6WxSbIA
    &amp;state=af0ifjsldkj
    &amp;expires_in=3600
</pre></div>
<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Acknowledgements</h3>

<p>
	The OpenID Community would like to thank the following people for
	their contributions to this specification:
      
</p>
<p>
	</p>
<blockquote class="text">
<p>Naveen Agarwal (naa@google.com), Google
</p>
<p>John Bradley (ve7jtb@ve7jtb.com), Ping Identity
</p>
<p>Brian Campbell (bcampbell@pingidentity.com), Ping Identity
</p>
<p>George Fletcher (george.fletcher@corp.aol.com), AOL
</p>
<p>Michael B. Jones (mbj@microsoft.com), Microsoft
</p>
<p>Torsten Lodderstedt (t.lodderstedt@telekom.de), Deutsche Telekom
</p>
<p>Breno de Medeiros (breno@google.com), Google
</p>
<p>Nat Sakimura (n-sakimura@nri.co.jp), Nomura Research Institute, Ltd.
</p>
<p>David Recordon (dr@fb.com), Facebook
</p>
<p>Marius Scurtescu (mscurtescu@google.com), Google
</p>
<p>Paul Tarjan (pt@fb.com), Facebook
</p>
</blockquote><p>
      
</p>
<a name="Notices"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C"></a><h3>Appendix C.&nbsp;
Notices</h3>

<p>Copyright (c) 2014 The OpenID Foundation.
</p>
<p>
	The OpenID Foundation (OIDF) grants to any Contributor, developer, 
	implementer, or other interested party a non-exclusive, royalty free, 
	worldwide copyright license to reproduce, prepare derivative works from, 
	distribute, perform and display, this Implementers Draft or 
	Final Specification solely for the purposes of (i) developing 
	specifications, and (ii) implementing Implementers Drafts and 
	Final Specifications based on such documents, provided that attribution 
	be made to the OIDF as the source of the material, but that such attribution 
	does not indicate an endorsement by the OIDF.
      
</p>
<p>
	The technology described in this specification was 
	made available from contributions from various sources, 
	including members of the OpenID Foundation and others.  
	Although the OpenID Foundation has taken steps to help ensure 
	that the technology is available for distribution, it takes 
	no position regarding the validity or scope of any intellectual 
	property or other rights that might be claimed to pertain to 
	the implementation or use of the technology described in 
	this specification or the extent to which any license under 
	such rights might or might not be available; neither does it 
	represent that it has made any independent effort to identify 
	any such rights.  The OpenID Foundation and the contributors 
	to this specification make no (and hereby expressly disclaim any) 
	warranties (express, implied, or otherwise), including implied 
	warranties of merchantability, non-infringement, fitness for 
	a particular purpose, or title, related to this specification, 
	and the entire risk as to implementing this specification is 
	assumed by the implementer.  The OpenID Intellectual 
	Property Rights policy requires contributors to offer 
	a patent promise not to assert certain patent claims against 
	other contributors and against implementers.  The OpenID Foundation invites 
	any interested party to bring to its attention any copyrights, 
	patents, patent applications, or other proprietary rights 
	that may cover technology that may be required to practice 
	this specification.
      
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Breno de Medeiros (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Google</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:breno@google.com">breno@google.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://stackoverflow.com/users/311376/breno">http://stackoverflow.com/users/311376/breno</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Marius Scurtescu</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Google</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mscurtescu@google.com">mscurtescu@google.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="https://twitter.com/mscurtescu">https://twitter.com/mscurtescu</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Paul Tarjan</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Facebook</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:pt@fb.com">pt@fb.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Michael B. Jones</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Microsoft</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mbj@microsoft.com">mbj@microsoft.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://self-issued.info/">http://self-issued.info/</a></td></tr>
</table>
</body></html>
