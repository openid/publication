<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>OpenID Connect UserInfo Verifiable Credentials - Draft 00</title>
<meta content="Morteza Ansari" name="author">
<meta content="Richard Barnes" name="author">
<meta content="Pieter Kasselman" name="author">
<meta content="Kristina Yasuda" name="author">
<meta content='
       The OpenID Connect UserInfo endpoint provides user attributes to OpenID Clients.
Providing these attributes in the form of a Verifiable Credential enables new
use cases.  This specification defines a new Verifiable Credential type
"UserInfoCredential" for this purpose, and defines a profile of the OpenID for
Verifiable Credential Issuance protocol for issuing these credentials.  We also
define an interoperable profile of the StatusList2021 credential revocation
mechanism, and a mechanism for distributing OpenID Provider JWK Sets that
enables credential verification even if the OpenID Provider is unreachable. 
    ' name="description">
<meta content="xml2rfc 3.16.0" name="generator">
<meta content="security" name="keyword">
<meta content="openid" name="keyword">
<meta content="verifiable credential" name="keyword">
<meta content="openid-connect-userinfo-vc-1_0-00" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.16.0
    Python 3.10.2
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.2
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.2
    MarkupSafe 2.1.2
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.28.2
    setuptools 57.5.0
    six 1.16.0
    wcwidth 0.2.6
-->
<link href="./openid-connect-userinfo-vc-1_0-00.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
</head>
<body class="xml2rfc">
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left"></td>
<td class="center">UserInfo VC</td>
<td class="right">May 2023</td>
</tr></thead>
<tfoot><tr>
<td class="left">Ansari, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">OpenID Connect</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2023-05-18" class="published">18 May 2023</time>
    </dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">M. Ansari</div>
<div class="org">Individual</div>
</div>
<div class="author">
      <div class="author-name">R. Barnes</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">P. Kasselman</div>
<div class="org">Microsoft</div>
</div>
<div class="author">
      <div class="author-name">K. Yasuda</div>
<div class="org">Microsoft</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">OpenID Connect UserInfo Verifiable Credentials - Draft 00</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">The OpenID Connect UserInfo endpoint provides user attributes to OpenID Clients.
Providing these attributes in the form of a Verifiable Credential enables new
use cases.  This specification defines a new Verifiable Credential type
"UserInfoCredential" for this purpose, and defines a profile of the OpenID for
Verifiable Credential Issuance protocol for issuing these credentials.  We also
define an interoperable profile of the StatusList2021 credential revocation
mechanism, and a mechanism for distributing OpenID Provider JWK Sets that
enables credential verification even if the OpenID Provider is unreachable.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-terminology" class="internal xref">Terminology</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-overview" class="internal xref">Overview</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-out-of-scope" class="internal xref">Out of Scope</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-userinfo-verifiable-credent" class="internal xref">UserInfo Verifiable Credential Type</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-revocation-information" class="internal xref">Revocation Information</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-userinfo-vc-verification" class="internal xref">UserInfo VC Verification</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-profile-of-openid-for-vc-is" class="internal xref">Profile of OpenID for VC Issuance</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-server-metadata" class="internal xref">Server Metadata</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-authorization-endpoint" class="internal xref">Authorization Endpoint</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="auto internal xref">5.3</a>.  <a href="#name-token-endpoint" class="internal xref">Token Endpoint</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a href="#section-5.4" class="auto internal xref">5.4</a>.  <a href="#name-credential-endpoint" class="internal xref">Credential Endpoint</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4.2.1">
                    <p id="section-toc.1-1.5.2.4.2.1.1"><a href="#section-5.4.1" class="auto internal xref">5.4.1</a>.  <a href="#name-credential-request" class="internal xref">Credential Request</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4.2.2">
                    <p id="section-toc.1-1.5.2.4.2.2.1"><a href="#section-5.4.2" class="auto internal xref">5.4.2</a>.  <a href="#name-credential-response" class="internal xref">Credential Response</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4.2.3">
                    <p id="section-toc.1-1.5.2.4.2.3.1"><a href="#section-5.4.3" class="auto internal xref">5.4.3</a>.  <a href="#name-priming-requests" class="internal xref">Priming Requests</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.5">
                <p id="section-toc.1-1.5.2.5.1"><a href="#section-5.5" class="auto internal xref">5.5</a>.  <a href="#name-client-nonce-handling" class="internal xref">Client Nonce Handling</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-signed-openid-provider-jwk-" class="internal xref">Signed OpenID Provider JWK Sets</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-implementation-consideratio" class="internal xref">Implementation Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-privacy-considerations" class="internal xref">Privacy Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.  <a href="#name-use-cases" class="internal xref">Use Cases</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#appendix-A.1" class="auto internal xref">A.1</a>.  <a href="#name-end-to-end-identity" class="internal xref">End-to-End Identity</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#appendix-A.2" class="auto internal xref">A.2</a>.  <a href="#name-openid-for-verifiable-prese" class="internal xref">OpenID for Verifiable Presentations</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-C" class="auto internal xref">Appendix C</a>.  <a href="#name-acknowledgements" class="internal xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#appendix-D" class="auto internal xref">Appendix D</a>.  <a href="#name-notices" class="internal xref">Notices</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#appendix-E" class="auto internal xref">Appendix E</a>.  <a href="#name-appendix" class="internal xref">Appendix</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#appendix-F" class="auto internal xref">Appendix F</a>.  <a href="#name-document-history" class="internal xref">Document History</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a href="#appendix-G" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">The OpenID Connect UserInfo endpoint is the channel by which an OpenID Provider
(OP) exposes user attributes to OpenID Client.  The standard claims defined in
the OpenID Connect Core specification <span>[<a href="#OpenID.Core" class="cite xref">OpenID.Core</a>]</span> are widely supported,
forming the basis of much of today's identity ecosystem.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">However, the bearer token structure of OpenID Connect means that each party that
wants to authenticate a user's attributes needs to be independently registered
as a Client of the OP and needs to do an independent OpenID Connect interaction
to authenticate the user.  This constraint is not too onerous in the cases where
OpenID Connect is typically deployed today, but it rules out other use cases.
For example, in the End-to-End Identity use case discussed in
<a href="#end-to-end-identity" class="auto internal xref">Appendix A.1</a>, each individual user would have to be registered as a
Client of every OP involved in a session, which clearly does not scale.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">Verifiable Credentials provide a more flexible model for distributing
information about a user <span>[<a href="#W3C.vc-data-model" class="cite xref">W3C.vc-data-model</a>]</span>.  In this model, an Issuer that
knows a user's identity attributes issues a Verifiable Credential to a Holder
that acts on behalf of the user.  The Holder can then present the Verifiable
Credential to any Verifier that trusts the issuer, without the Verifier or the
verification transaction having to be known to the Issuer.<a href="#section-1-3" class="pilcrow">¶</a></p>
<div class="lang-aasvg sourcecode" id="section-1-4">
<pre>+--------+               +--------+                   +----------+
| Issuer |--(issuance)--&gt;| Holder |--(presentation)--&gt;| Verifier |
+--------+               +--------+                   +----------+
    ^                                                      .
    .                                                      .
    .......................(trust)..........................
</pre><a href="#section-1-4" class="pilcrow">¶</a>
</div>
<p id="section-1-5">This specification defines the interfaces required for an OpenID Provider to
expose the information provided by the UserInfo endpoint in the form of a
Verifiable Credential:<a href="#section-1-5" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-1-6.1">A new "UserInfoCredential" Verifiable Credential type that carries UserInfo claims<a href="#section-1-6.1" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-1-6.2">A profile of the OpenID for Verifiable Credential Issuance <span>[<a href="#OpenID4VCI" class="cite xref">OpenID4VCI</a>]</span><a href="#section-1-6.2" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-1-6.3">A profile of the StatusList2021 mechanism for credential revocation <span>[<a href="#StatusList2021" class="cite xref">StatusList2021</a>]</span><a href="#section-1-6.3" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-1-6.4">A new mechanism for asynchronously distributing an OpenID Provider's JWK Set<a href="#section-1-6.4" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-1-7">Together, these interfaces allow the issuance of Verifiable Credentials
containing OpenID Connect claims with the same degree of simplicity and
interoperability as OpenID Connect itself.<a href="#section-1-7" class="pilcrow">¶</a></p>
<div id="terminology">
<section id="section-1.1">
        <h3 id="name-terminology">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
        </h3>
<p id="section-1.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
"SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this
document are to be interpreted as described in RFC 2119 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span>.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">We use the terminology defined in <span>[<a href="#OpenID.Core" class="cite xref">OpenID.Core</a>]</span>, <span>[<a href="#W3C.vc-data-model" class="cite xref">W3C.vc-data-model</a>]</span>, and
<span>[<a href="#OpenID4VCI" class="cite xref">OpenID4VCI</a>]</span>.<a href="#section-1.1-2" class="pilcrow">¶</a></p>
<p id="section-1.1-3">This document introduces the following terms:<a href="#section-1.1-3" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlCompact dlParallel" id="section-1.1-4">
          <dt id="section-1.1-4.1">UserInfo Verifiable Credential (UserInfo VC):</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-4.2">A Verifiable Credential carrying a set of claims that would be provided by the
OpenID Connect UserInfo endpoint, as specified in
<a href="#userinfo-verifiable-credential-type" class="auto internal xref">Section 4</a><a href="#section-1.1-4.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-4.3">Signed JWK Set:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-4.4">A JWK Set for an OpenID Provider, encapsulated on a JWT as described in
<a href="#signed-openid-provider-jwk-sets" class="auto internal xref">Section 6</a>.  Distributing an OP's keys in a Signed JWK
Set allows them to be trusted even when the OP's discovery endpoint is
unreachable.<a href="#section-1.1-4.4" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="overview">
<section id="section-2">
      <h2 id="name-overview">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-overview" class="section-name selfRef">Overview</a>
      </h2>
<p id="section-2-1">Since this specification is mainly a profile of OpenID for Verifiable Credential
Issuance <span>[<a href="#OpenID4VCI" class="cite xref">OpenID4VCI</a>]</span>, the overall flow of the protocol is the same.
<a href="#fig-overview" class="auto internal xref">Figure 1</a> shows how an OP is involved in the issuance and verification of
a UserInfo Verifiable Credential:<a href="#section-2-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2-2">
<li id="section-2-2.1">
          <p id="section-2-2.1.1">The Client (Holder in the VC model) obtains the OP's server metadata, which
indicates support for issuance of UserInfo VCs.<a href="#section-2-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-2-2.2">
          <p id="section-2-2.2.1">The Client issues an authorization request including the
<code>userinfo_credential</code> scope to request authorization to obtain UserInfo VCs,
as well as the <code>openid</code> scope and other scopes to request access to UserInfo
information (e.g., <code>profile</code>, <code>email</code>).<a href="#section-2-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-2-2.3">
          <p id="section-2-2.3.1">The OP authenticates the user and obtains the user's consent to credential
issuance.<a href="#section-2-2.3.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-2-2.4">
          <p id="section-2-2.4.1">The Authorization Response provides the Client with an authorization code<a href="#section-2-2.4.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-2-2.5">
          <p id="section-2-2.5.1">The Client sends a Token Request containing the authorization code<a href="#section-2-2.5.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-2-2.6">
          <p id="section-2-2.6.1">The Token Response provides the Client with:<a href="#section-2-2.6.1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-2-2.6.2.1">An access token that can be used to access the credential endpoint<a href="#section-2-2.6.2.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-2-2.6.2.2">A nonce that can be used to prove possession of a private key<a href="#section-2-2.6.2.2" class="pilcrow">¶</a>
</li>
          </ul>
</li>
        <li id="section-2-2.7">
          <p id="section-2-2.7.1">The Client sends a Credential Request specifying that it desires a UserInfo
VC, together with a proof that it controls the private key of a signature key
pair.<a href="#section-2-2.7.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-2-2.8">
          <p id="section-2-2.8.1">The Credential Response contains a UserInfo VC that attests to the following
attributes of the Holder:<a href="#section-2-2.8.1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-2-2.8.2.1">The claims that would have been provided by the UserInfo endpoint<a href="#section-2-2.8.2.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-2-2.8.2.2">The public key corresponding to the private key used to compute the proof
in the Credential Request<a href="#section-2-2.8.2.2" class="pilcrow">¶</a>
</li>
          </ul>
</li>
        <li id="section-2-2.9">
          <p id="section-2-2.9.1">The Client sends the credential to a Verifier in some presentation protocol
(outside the scope of this document)<a href="#section-2-2.9.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-2-2.10">
          <p id="section-2-2.10.1">The Verifier fetches the OP's JWK Set<a href="#section-2-2.10.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-2-2.11">
          <p id="section-2-2.11.1">The Verifier uses a public key from the OP's JWK Set to verify the signature
on the credential.<a href="#section-2-2.11.1" class="pilcrow">¶</a></p>
</li>
      </ol>
<span id="name-issuance-presentation-and-v"></span><div id="fig-overview">
<figure id="figure-1">
        <div class="lang-aasvg sourcecode" id="section-2-3.1">
<pre>+--------+                                    +--------+              +----------+
| Client |                                    |   OP   |              |          |
|   ==   |                                    |   ==   |              | Verifier |
| Holder |                                    | Issuer |              |          |
+---+----+                                    +---+----+              +-----+----+
    |                                             |                         |
    | 1. Obtain Issuer server metadata            |                         |
    |    (types=UserInfoCredential)               |                         |
    |&lt;--------------------------------------------+                         |
    |                                             |                         |
    | 2. Authorization Request                    |                         |
    |    (scope=userinfo_credential)              |                         |
    +--------------------------------------------&gt;|                         |
    |                                             |                         |
    |~~~~~~ 3. User authentication / consent ~~~~~|                         |
    |                                             |                         |
    | 4. Authorization Response (code)            |                         |
    |&lt;--------------------------------------------+                         |
    |                                             |                         |
    | 5. Token Request (code)                     |                         |
    +--------------------------------------------&gt;|                         |
    |                                             |                         |
    | 6. Token Response (access_token, c_nonce)   |                         |
    |&lt;--------------------------------------------+                         |
    |                                             |                         |
    | 7. Credential Request                       |                         |
    |    (type=UserInfoCredential, proof)         |                         |
    +--------------------------------------------&gt;|                         |
    |                                             |                         |
    | 8. Credential Response (credential)         |                         |
    |&lt;--------------------------------------------+                         |
    |                                             |                         |
    |                                                                       |
    |~~~~~~~~~~~~~~~~~ 9. Presentation protocol (credential) ~~~~~~~~~~~~~~~|
    |                                                                       |
    |                                             |                         |
    |                                             | 10. Obtain Issuer JWKS  |
    |                                             +------------------------&gt;|
    |                                             |                         |
    |                                             | 11. Verify credential   |
    |                                             |                 .-------+
    |                                             |                |        |
    |                                             |                 '------&gt;|
    |                                             |                         |
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-issuance-presentation-and-v" class="selfRef">Issuance, presentation, and verification of a UserInfo VC</a>
        </figcaption></figure>
</div>
</section>
</div>
<div id="out-of-scope">
<section id="section-3">
      <h2 id="name-out-of-scope">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-out-of-scope" class="section-name selfRef">Out of Scope</a>
      </h2>
<p id="section-3-1">The focus of this specification is on the Verifiable Credential issuance
interaction, and on the processes to verify credentials so issued.  We do not
address the presentation interaction.  This step can be accomplished with a
standard presentation protocol such as OpenID for Verifiable Presentations
<span>[<a href="#OpenID4VP" class="cite xref">OpenID4VP</a>]</span>, or via integration with another protocol that provides
proof-of-possession mechanics, such as MLS or TLS <span>[<a href="#I-D.ietf-mls-protocol" class="cite xref">I-D.ietf-mls-protocol</a>]</span>
        <span>[<a href="#RFC8446" class="cite xref">RFC8446</a>]</span>.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">This specification is intended as a minimal profile of the more general OpenID
for VC Issuance mechanism, and places no constraints on how an OP implements VC
Issuance for credential types other than <code>UserInfoCredential</code>.<a href="#section-3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="userinfo-verifiable-credential-type">
<section id="section-4">
      <h2 id="name-userinfo-verifiable-credent">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-userinfo-verifiable-credent" class="section-name selfRef">UserInfo Verifiable Credential Type</a>
      </h2>
<p id="section-4-1">A UserInfo Verifiable Credential enapsulates the claims that the OP offers via
the UserInfo endpoint as a Verifiable Credential that can be presented to a
third-party Verifier.  Having the UserInfo endpoint and the Credential Endpoint
return the same set of claims allows for the re-use of existing mechanisms for
negotiating which claims are provided to a client (e.g., the <code>profile</code> and
<code>email</code> scopes).  A UserInfo VC is distinguished from other Verifiable
Credentials by including the <code>UserInfoCredential</code> value in its list of types.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">A UserInfo VC issued by an OpenID Provider MUST satisfy the following
requirements:<a href="#section-4-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-3.1">
          <p id="section-4-3.1.1">An UserInfo VC MUST be represented as a JWT-formatted VC, as specified in
Section 6.3.1 of <span>[<a href="#W3C.vc-data-model" class="cite xref">W3C.vc-data-model</a>]</span>.<a href="#section-4-3.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-3.1.2.1">
              <p id="section-4-3.1.2.1.1">The <code>alg</code>, <code>kid</code>, and <code>typ</code> fields in the JWT header and the <code>exp</code>, <code>iss</code>,
<code>nbf</code>, and <code>jti</code> claims MUST be populated as specified in that section.<a href="#section-4-3.1.2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4-3.1.2.2">
              <p id="section-4-3.1.2.2.1">The <code>sub</code> claim at the top level MUST be omitted. The <code>id</code> field in the
<code>credentialSubject</code> object is used instead, as describe below.<a href="#section-4-3.1.2.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4-3.1.2.3">
              <p id="section-4-3.1.2.3.1">The corresponding subfields of the <code>vc</code> claim SHOULD be omitted.<a href="#section-4-3.1.2.3.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</li>
        <li class="normal" id="section-4-3.2">
          <p id="section-4-3.2.1">The <code>kid</code> field in the JWT header MUST be set to the identifier of the public
key in the OP's JWK Set that should be used to verify the credential.<a href="#section-4-3.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-3.3">
          <p id="section-4-3.3.1">The <code>iss</code> claim MUST be set to the OP's Issuer Identifier.<a href="#section-4-3.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-3.4">
          <p id="section-4-3.4.1">The <code>aud</code> claim MAY be omitted.  If present, it MUST contain the OAuth 2.0
<code>client_id</code> of the Client, just as in an OpenID Connect ID Token.  Note that
this value represents the Holder of the VC, not the Verifier to whom it will
be presented.<a href="#section-4-3.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-3.5">
          <p id="section-4-3.5.1">In the <code>vc</code> claim, the <code>@context</code> field MUST be a JSON array with the
following single entry:<a href="#section-4-3.5.1" class="pilcrow">¶</a></p>
<ul class="compact normal">
<li class="compact normal" id="section-4-3.5.2.1">
              <code>"https://www.w3.org/2018/credentials/v1"</code><a href="#section-4-3.5.2.1" class="pilcrow">¶</a>
</li>
          </ul>
</li>
        <li class="normal" id="section-4-3.6">
          <p id="section-4-3.6.1">In the <code>vc</code> claim, the <code>type</code> field MUST be a JSON array with the following
two entries, in order:<a href="#section-4-3.6.1" class="pilcrow">¶</a></p>
<ul class="compact normal">
<li class="compact normal" id="section-4-3.6.2.1">
              <code>"VerifiableCredential"</code><a href="#section-4-3.6.2.1" class="pilcrow">¶</a>
</li>
            <li class="compact normal" id="section-4-3.6.2.2">
              <code>"OpenIDCredential"</code><a href="#section-4-3.6.2.2" class="pilcrow">¶</a>
</li>
          </ul>
</li>
        <li class="normal" id="section-4-3.7">
          <p id="section-4-3.7.1">In the <code>vc</code> claim, the <code>credentialSubject</code> field MUST be a JSON object.<a href="#section-4-3.7.1" class="pilcrow">¶</a></p>
<ul class="compact normal">
<li class="compact normal" id="section-4-3.7.2.1">The <code>id</code> field of this object a MUST be a Decentralized Identifier with DID
method <code>jwk</code> <span>[<a href="#W3C.did-core" class="cite xref">W3C.did-core</a>]</span> <span>[<a href="#W3C.did-spec-registries" class="cite xref">W3C.did-spec-registries</a>]</span>, reflecting the
public key that the credential subject presented in their credential request
(see <a href="#credential-request" class="auto internal xref">Section 5.4.1</a>).<a href="#section-4-3.7.2.1" class="pilcrow">¶</a>
</li>
            <li class="compact normal" id="section-4-3.7.2.2">The other fields in this object MUST include all of the claims that would
be returned on a successful UserInfo request made with the access token
that was used in the Credential Request.<a href="#section-4-3.7.2.2" class="pilcrow">¶</a>
</li>
          </ul>
</li>
        <li class="normal" id="section-4-3.8">
          <p id="section-4-3.8.1">In the <code>vc</code> claim, the <code>credentialStatus</code> field MAY be populated.  If it is
populated, then it MUST meet the requirements of <a href="#revocation-information" class="auto internal xref">Section 4.1</a>.<a href="#section-4-3.8.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-4-4">An UserInfo VC is thus a JWT that can be signed and verified in largely the same
way as the other JWTs produced by OpenID Connect (e.g., ID tokens), but using
the VC syntax to present a public key for the credential subject in addition to
the claims provided by the OP.<a href="#section-4-4" class="pilcrow">¶</a></p>
<p id="section-4-5">A non-normative example of a UserInfo VC is shown below:<a href="#section-4-5" class="pilcrow">¶</a></p>
<span id="name-the-contents-of-an-openid-v"></span><figure id="figure-2">
        <div class="alignLeft art-text artwork" id="section-4-6.1">
<pre>JWT Header:
{
  "alg": "ES256",
  "typ": "JWT",
  "kid": "XTSGmh734_J6fOWUbI7BNim7wyvj5LWx8GzuIH7WHw8"
}

JWT Payload:
{
  "vc": {
    "@context": [
      "https://www.w3.org/2018/credentials/v1"
    ],
    "type": [
      "VerifiableCredential",
      "UserInfoCredential"
    ],
    "credentialSubject": {
      "id": "did:jwk:eyJrdHkiOiJFQyIsInVzZSI6InNpZyIsImNydiI6IlAtMjU2Iiwi
             eCI6InFpR0tMd1hSSm1KUl9BT1FwV09IWExYNXVZSWZ6dlB3RHVyV3ZtWkJ3
             dnciLCJ5IjoiaXA4bnl1THBKNU5wcmlaekNWS2lHMFR0ZXFQTWtyemZOT1VR
             OFl6ZUdkayIsImFsZyI6IkVTMjU2In0",
      "sub": "248289761001",
      "name": "Jane Doe",
      "given_name": "Jane",
      "family_name": "Doe",
      "preferred_username": "j.doe",
      "email": "janedoe@example.com",
      "picture": "http://example.com/janedoe/me.jpg",
      "phone_number": "+1 202 555 1212"
    }
    "credentialStatus": {
      "id": "https://server.example.com/credentials/status/3#94567"
      "type": "StatusList2021Entry",
      "statusPurpose": "revocation",
      "statusListIndex": "94567",
      "statusListCredential": "https://server.example.com/credentials/status/3"
    }
  },
  "iat": 1667575982,
  "exp": 1668180782,
  "iss": "https://server.example.com"
}
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-the-contents-of-an-openid-v" class="selfRef">The contents of an OpenID Verifiable Credential</a>
        </figcaption></figure>
<div id="revocation-information">
<section id="section-4.1">
        <h3 id="name-revocation-information">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-revocation-information" class="section-name selfRef">Revocation Information</a>
        </h3>
<p id="section-4.1-1">If present, credential status information in a UserInfo VC MUST use the
StatusList2021 mechanism <span>[<a href="#StatusList2021" class="cite xref">StatusList2021</a>]</span>.  This mechanism provides a concise
list of credentials revoked by an OP in a "status list credential". Status list
credentials for OIDC VCs MUST meet the following requirements, in addition to
the requirements of <span>[<a href="#StatusList2021" class="cite xref">StatusList2021</a>]</span>:<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-2.1">
            <p id="section-4.1-2.1.1">A status list credential MUST be represented as a JWT-formatted VC, as
specified in Section 6.3.1 of <span>[<a href="#W3C.vc-data-model" class="cite xref">W3C.vc-data-model</a>]</span>.  The <code>alg</code>, <code>kid</code>, and
<code>typ</code> fields in the JWT header and the <code>exp</code>, <code>iss</code>, <code>nbf</code>, <code>jti</code>, and <code>sub</code>
claims MUST be populated as specified in that section.  The corresponding
subfields of the <code>vc</code> claim SHOULD be omitted.<a href="#section-4.1-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.1-2.2">
            <p id="section-4.1-2.2.1">The <code>iss</code> claim MUST be equal to the <code>iss</code> claim of the credential being
validated.<a href="#section-4.1-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.1-2.3">
            <p id="section-4.1-2.3.1">The <code>jti</code> claim, if present, MUST be equal to the <code>statusListCredential</code> field
of the credential being validated.<a href="#section-4.1-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.1-2.4">
            <p id="section-4.1-2.4.1">The <code>vc</code> claim MUST NOT contain a <code>credentialStatus</code> field.<a href="#section-4.1-2.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.1-2.5">
            <p id="section-4.1-2.5.1">The <code>statusPurpose</code> value in the <code>credentialSubject</code> object MUST be <code>revocation</code>.
Suspension of UserInfo VCs is not supported.<a href="#section-4.1-2.5.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<span id="name-a-status-list-credential"></span><figure id="figure-3">
          <div class="alignLeft art-text artwork" id="section-4.1-3.1">
<pre>JWT header = {
  "alg": "ES256",
  "kid": "50615383-48AA-454D-B1E8-8721FBB7D7D1",
  "typ": "JWT"
}

JWT payload = {
  "iss": "https://server.example.com/",
  "iat": 1617632860,
  "exp": 1618237660,
  "jti": "https://server.example.com/credentials/status/3",
  "sub": "https://server.example.com/status/3#list"

  "vc": {
    "@context": [
      "https://www.w3.org/2018/credentials/v1",
      "https://w3id.org/vc/status-list/2021/v1"
    ],
    "type": [
      "VerifiableCredential",
      "StatusList2021Credential"
    ],
    "credentialSubject": {
      "type": "StatusList2021",
      "statusPurpose": "revocation",
      "encodedList": "H4sIAAAAAAAAA-3BMQEAAADCoPVPbQwfoAAAAAAAAAAAAAAAAAAAAIC3AYbSVKsAQAAA"
    },
  },
}
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-a-status-list-credential" class="selfRef">A status list credential</a>
          </figcaption></figure>
</section>
</div>
<div id="userinfo-vc-verification">
<section id="section-4.2">
        <h3 id="name-userinfo-vc-verification">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-userinfo-vc-verification" class="section-name selfRef">UserInfo VC Verification</a>
        </h3>
<p id="section-4.2-1">A Verifier processing an OIDC VC MUST validate it using the following steps:<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.2-2">
<li id="section-4.2-2.1">
            <p id="section-4.2-2.1.1">Verify that the <code>alg</code> value represents an algorithm supported by the
Verifier.<a href="#section-4.2-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li id="section-4.2-2.2">
            <p id="section-4.2-2.2.1">Obtain a JWK Set for the Issuer from a trusted source.  For example:<a href="#section-4.2-2.2.1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-4.2-2.2.2.1">Obtain and verify a Signed JWK Set (see <a href="#signed-openid-provider-jwk-sets" class="auto internal xref">Section 6</a>)<a href="#section-4.2-2.2.2.1" class="pilcrow">¶</a>
</li>
              <li class="compact" id="section-4.2-2.2.2.2">
                <p id="section-4.2-2.2.2.2.1">Extract the OP's Issuer ID from the <code>iss</code> claim in the payload of the VC,
and use OpenID Connect Discovery <span>[<a href="#OpenID.Discovery" class="cite xref">OpenID.Discovery</a>]</span>:<a href="#section-4.2-2.2.2.2.1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-4.2-2.2.2.2.2.1">Send a Discovery request for the specified Issuer Identifier<a href="#section-4.2-2.2.2.2.2.1" class="pilcrow">¶</a>
</li>
                  <li class="compact" id="section-4.2-2.2.2.2.2.2">Fetch the JWK Set referenced by the <code>jwks_uri</code> field in the provider metadata<a href="#section-4.2-2.2.2.2.2.2" class="pilcrow">¶</a>
</li>
                  <li class="compact" id="section-4.2-2.2.2.2.2.3">Identifies the key in the JWK Set corresponding to the <code>kid</code> field in the VC<a href="#section-4.2-2.2.2.2.2.3" class="pilcrow">¶</a>
</li>
                </ul>
</li>
            </ul>
</li>
          <li id="section-4.2-2.3">
            <p id="section-4.2-2.3.1">Identify a key in the JWK Set that has the same <code>kid</code> value as the JWT Header
of the UserInfo VC.<a href="#section-4.2-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li id="section-4.2-2.4">
            <p id="section-4.2-2.4.1">Use the identified key to verify the signature on the UserInfo VC.<a href="#section-4.2-2.4.1" class="pilcrow">¶</a></p>
</li>
          <li id="section-4.2-2.5">
            <p id="section-4.2-2.5.1">Verify that the current time is after the time represented in the <code>nbf</code> claim
(if present) and before the time represented by the <code>exp</code> claim.<a href="#section-4.2-2.5.1" class="pilcrow">¶</a></p>
</li>
          <li id="section-4.2-2.6">
            <p id="section-4.2-2.6.1">If the <code>vc</code> claim has a <code>credentialStatus</code> field, verify the VC's
revocation status as follows:<a href="#section-4.2-2.6.1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.2-2.6.2">
<li id="section-4.2-2.6.2.1">
                <p id="section-4.2-2.6.2.1.1">Fetch the status list credential from URL in the <code>statusListCredential</code>
field of the <code>credentialStatus</code> object.<a href="#section-4.2-2.6.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-4.2-2.6.2.2">
                <p id="section-4.2-2.6.2.2.1">Verify that the credential meets the criteria above.<a href="#section-4.2-2.6.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-4.2-2.6.2.3">
                <p id="section-4.2-2.6.2.3.1">Verify the signature and expiration status of the status list credential.<a href="#section-4.2-2.6.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-4.2-2.6.2.4">
                <p id="section-4.2-2.6.2.4.1">Perform the "Validate Algorithm" defined in <span>[<a href="#StatusList2021" class="cite xref">StatusList2021</a>]</span>.<a href="#section-4.2-2.6.2.4.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-4.2-2.6.2.5">
                <p id="section-4.2-2.6.2.5.1">If the final step returns <code>true</code>, then the Verifier MUST reject the
certificate as revoked (depending on the <code>statusPurpose</code>).<a href="#section-4.2-2.6.2.5.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-4.2-2.6.2.6">
                <p id="section-4.2-2.6.2.6.1">If any step in revocation status checking fails, then the Verifier SHOULD
reject the credential.<a href="#section-4.2-2.6.2.6.1" class="pilcrow">¶</a></p>
</li>
            </ol>
</li>
        </ol>
</section>
</div>
</section>
</div>
<div id="profile-of-openid-for-vc-issuance">
<section id="section-5">
      <h2 id="name-profile-of-openid-for-vc-is">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-profile-of-openid-for-vc-is" class="section-name selfRef">Profile of OpenID for VC Issuance</a>
      </h2>
<p id="section-5-1">An OP implementing this specification MUST support OpenID for Verifiable
Credential Issuance <span>[<a href="#OpenID4VCI" class="cite xref">OpenID4VCI</a>]</span>, supporting at least profile defined
in this section.  The Wallet-initiated, authorized code flow MUST be supported,
since this corresponds to the most common usage pattern for OpenID Connect.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">Endpoints that are optional in the general OpenID for Verifiable Credential
Issuance specification are also optional here.<a href="#section-5-2" class="pilcrow">¶</a></p>
<p id="section-5-3">The remainder of this section specifies additional requirements for a
single, interoperable flow for issuing UserInfo VCs.<a href="#section-5-3" class="pilcrow">¶</a></p>
<div id="server-metadata">
<section id="section-5.1">
        <h3 id="name-server-metadata">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-server-metadata" class="section-name selfRef">Server Metadata</a>
        </h3>
<p id="section-5.1-1">The server's metadata MUST have a <code>supportedCredentials</code> entry for the format
<code>jwt_vc_json</code>, with the following properties:<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-5.1-2.1">
            <code>cryptographic_suites_supported</code> MUST be present.<a href="#section-5.1-2.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-5.1-2.2">
            <code>cryptographic_binding_methods_supported</code> MUST be present and MUST include <code>jwk</code>.<a href="#section-5.1-2.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-5.1-2.3">
            <code>types</code> MUST include the values <code>VerifiableCredential</code> and <code>UserInfoCredential</code>.<a href="#section-5.1-2.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.1-3">A non-normative example server metadata object is shown below:<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.1-4">
<pre>{
  // ... other server metadata fields ...
  "credential_endpoint": "https://server.example.com/connect/credential",
  "credentials_supported": [{
    "format": "jwt_vc_json",
    "types": [
        "VerifiableCredential",
        "UserInfoCredential"
    ],
    "cryptographic_binding_methods_supported": [
        "jwk"
    ],
    "cryptographic_suites_supported": [
        "ES256"
    ],
  }]
}
</pre><a href="#section-5.1-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="authorization-endpoint">
<section id="section-5.2">
        <h3 id="name-authorization-endpoint">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-authorization-endpoint" class="section-name selfRef">Authorization Endpoint</a>
        </h3>
<p id="section-5.2-1">A Client requests authorization to obtain UserInfo VCs by including the scope
value <code>userinfo_credential</code> in its authorization request.  The OP MUST support
this scope value.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2">A non-normative example authorization request is shown below:<a href="#section-5.2-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.2-3">
<pre>GET /auth?client_id=C6pfRp679ez9HvDhg3TgI
   &amp;scope=openid%20email%20profile%20userinfo_credential
   &amp;response_type=code
   &amp;redirect_uri=https%3A%2F%2Foidc-client.invalid%3A4000%2Fcb
   &amp;code_challenge=7slr54gqLAj4gAc_FHYo9xx9pcFrACc-DSyofu7SjMk
   &amp;code_challenge_method=S256 HTTP/1.1
</pre><a href="#section-5.2-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="token-endpoint">
<section id="section-5.3">
        <h3 id="name-token-endpoint">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-token-endpoint" class="section-name selfRef">Token Endpoint</a>
        </h3>
<p id="section-5.3-1">If the Client has been granted the <code>userinfo_credential</code> scope, then the Token
Response MUST include an <code>access_token</code> value that can be used to access the
Credential Endpoint.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3-2">The Token Response SHOULD include <code>c_nonce</code> and <code>c_nonce_expires_in</code> fields.
This avoids the need for a client to make an additional request to the
Credential Endpoint to obtain a nonce.<a href="#section-5.3-2" class="pilcrow">¶</a></p>
<p id="section-5.3-3">A non-normative example token request and response are shown below:<a href="#section-5.3-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.3-4">
<pre>POST /token HTTP/1.1
Accept: application/json
Authorization: Basic /* base64(client_id + ':' + client_secret)*/

grant_type=authorization_code
&amp;code=L8_66PBAv_nIO4LsXCW1mj2P9M2j5J8MXBQQxdQW6mC
&amp;redirect_uri=https%3A%2F%2Foidc-client.invalid%3A4000%2Fcb
&amp;code_verifier=aipxCdREzMCkTnBZVjLUG8mHNSXErrfQ9P6YqzT5hfU

HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8

{
  "access_token": "S_-WDgsXG8s3V7qrTbI3kZHf4mIcTByLPU2Rd5FoDib",
  "expires_in": 3600,
  "id_token": "eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjFQVzVyT3pDWTNI
               RFIzb2FvX3ZsSTBDY2JEN1J2WXVCTFJjdEJtZ24wQWsifQ.eyJzdWIiOiJiY
               WNrZW5kLjExMzMwNDE4ODMwNjI2NzA4NzMyNCIsImF0X2hhc2giOiItNkhkZ
               EU5aE1TQnNFSlFtS2tjdERRIiwiYXVkIjoiQzZwZlJwNjc5ZXo5SHZEaGczV
               GdJIiwiZXhwIjoxNjY3NTc4MTYxLCJpYXQiOjE2Njc1NzQ1NjEsImlzcyI6I
               mh0dHBzOi8vbG9jYWxob3N0OjMwMDAifQ.IJfXA64d--xEt-TATIZnFLdSMd
               H6LZu_glRAGw_qLFyQ8kXnxlNFeMGQqQ2PSA6vtO9zDyH3CHzJSfEAHYUQ2Q",
  "scope": "openid email profile userinfo_credential",
  "c_nonce": "N7cbtWrD1Uoq3TOxS87QiQ",
  "c_nonce_expires_in": "86400",
}
</pre><a href="#section-5.3-4" class="pilcrow">¶</a>
</div>
<p id="section-5.3-5">Note that the <code>id_token</code> field is included here because this is an OpenID
Connect token request.  It is not necessary for VC issuance, but may be used by
the Client in the same way as an ID token normally would be.<a href="#section-5.3-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="credential-endpoint">
<section id="section-5.4">
        <h3 id="name-credential-endpoint">
<a href="#section-5.4" class="section-number selfRef">5.4. </a><a href="#name-credential-endpoint" class="section-name selfRef">Credential Endpoint</a>
        </h3>
<div id="credential-request">
<section id="section-5.4.1">
          <h4 id="name-credential-request">
<a href="#section-5.4.1" class="section-number selfRef">5.4.1. </a><a href="#name-credential-request" class="section-name selfRef">Credential Request</a>
          </h4>
<p id="section-5.4.1-1">Consistent with the metadata requirements in <a href="#server-metadata" class="auto internal xref">Section 5.1</a>, the OP's
Credential Endpoint MUST support Credential Requests with <code>format</code> field set to
<code>jwt_vc_json</code>, and a <code>type</code> field set to an array including
<code>VerifiableCredential</code> and <code>UserCredential</code>.  For such requests, the OP MUST
require the client to prove possession of a private key.  The OP MUST support
the <code>jwt</code> proof type, with the client's public key presented in the <code>jwk</code> header
field in the proof JWT.<a href="#section-5.4.1-1" class="pilcrow">¶</a></p>
<p id="section-5.4.1-2">A non-normative example credential request is shown below:<a href="#section-5.4.1-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.4.1-3">
<pre>POST /credential HTTP/1.1
Authorization: Bearer S_-WDgsXG8s3V7qrTbI3kZHf4mIcTByLPU2Rd5FoDib
Content-Type: application/json

{
  "format": "jwt_vc_json"
  "type": ["VerifiableCredential", "UserInfoCredential"],
  "proof": {
    "proof_type": "jwt",
    "jwt": "eyJhbGciOiJFUzI1NiIsImp3ayI6eyJrdHkiOiJFQyIsImNydiI6IlAtMjU2
            IiwieCI6InFpR0tMd1hSSm1KUl9BT1FwV09IWExYNXVZSWZ6dlB3RHVyV3Zt
            WkJ3dnciLCJ5IjoiaXA4bnl1THBKNU5wcmlaekNWS2lHMFR0ZXFQTWtyemZO
            T1VROFl6ZUdkayIsImFsZyI6IkVTMjU2In19.eyJhdGgiOiJHVXF5LWpySFV
            Rdll3QXkwQXZ4RGRtOTYweVYxdXJCZWExejl4UGo1UGZvIiwiaXNzIjoiYk9
            4OFI0NFhoSUhpM0E5NjV6QkVuIiwiYXVkIjoiaHR0cHM6Ly9zZXJ2ZXIuZXh
            hbXBsZS5jb20iLCJub25jZSI6Ik43Y2J0V3JEMVVvcTNUT3hTODdRaVEiLCJ
            pYXQiOjE2Njc1NzU5ODIsImp0aSI6IlhGbHpQWEFmSWxYR3ExMHFZRmVUejh
            Zak5EbjhSUzNwRHMzZVJPVlJ4VkUifQ.NRHs_6_j1SR45FQJpdapyxAYSJch
            qnOFiRSbsicfhNWFppbWwOxvkpDPhfxb9a1Usxi7kmUnPEpV278QkiddHw"

  }
}
</pre><a href="#section-5.4.1-3" class="pilcrow">¶</a>
</div>
<p id="section-5.4.1-4">The content of the <code>proof</code> JWT is as follows:<a href="#section-5.4.1-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.4.1-5">
<pre>JWT Header:
{
  "alg": "ES256",
  "jwk": {
    "kty": "EC",
    "crv": "P-256",
    "x": "qiGKLwXRJmJR_AOQpWOHXLX5uYIfzvPwDurWvmZBwvw",
    "y": "ip8nyuLpJ5NpriZzCVKiG0TteqPMkrzfNOUQ8YzeGdk",
    "alg": "ES256"
  }
}


JWT Payload:
{
  "ath": "GUqy-jrHUQvYwAy0AvxDdm960yV1urBea1z9xPj5Pfo",
  "iss": "bOx8R44XhIHi3A965zBEn",
  "aud": "https://server.example.com",
  "nonce": "N7cbtWrD1Uoq3TOxS87QiQ",
  "iat": 1667575982,
  "jti": "XFlzPXAfIlXGq10qYFeTz8YjNDn8RS3pDs3eROVRxVE"
}
</pre><a href="#section-5.4.1-5" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="credential-response">
<section id="section-5.4.2">
          <h4 id="name-credential-response">
<a href="#section-5.4.2" class="section-number selfRef">5.4.2. </a><a href="#name-credential-response" class="section-name selfRef">Credential Response</a>
          </h4>
<p id="section-5.4.2-1">A successful Credential Response to a Credential Request for a UserInfo VC MUST
contain a <code>credential</code> field.  Deferred credential issuance MUST NOT be used.<a href="#section-5.4.2-1" class="pilcrow">¶</a></p>
<p id="section-5.4.2-2">A non-normative example credential response is shown below:<a href="#section-5.4.2-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.4.2-3">
<pre>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8

{
  "format": "jwt_vc_json",
  "credential": "eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IlhUU0dtaDczNF9K
                 NmZPV1ViSTdCTmltN3d5dmo1TFd4OEd6dUlIN1dIdzgifQ.eyJ2YyI6eyJAY
                 29udGV4dCI6WyJodHRwczovL3d3dy53My5vcmcvMjAxOC9jcmVkZW50aWFsc
                 y92MSJdLCJ0eXBlIjpbIlZlcmlmaWFibGVDcmVkZW50aWFsIiwiVXNlckluZ
                 m9DcmVkZW50aWFsIl0sImNyZWRlbnRpYWxTdWJqZWN0Ijp7ImlkIjoiZGlkO
                 mp3azpleUpyZEhraU9pSkZReUlzSW5WelpTSTZJbk5wWnlJc0ltTnlkaUk2S
                 WxBdE1qVTJJaXdpZUNJNkluRnBSMHRNZDFoU1NtMUtVbDlCVDFGd1YwOUlXR
                 XhZTlhWWlNXWjZkbEIzUkhWeVYzWnRXa0ozZG5jaUxDSjVJam9pYVhBNGJub
                 DFUSEJLTlU1d2NtbGFla05XUzJsSE1GUjBaWEZRVFd0eWVtWk9UMVZST0ZsN
                 lpVZGtheUlzSW1Gc1p5STZJa1ZUTWpVMkluMCIsInN1YiI6IjI0ODI4OTc2M
                 TAwMSIsIm5hbWUiOiJKYW5lIERvZSIsImdpdmVuX25hbWUiOiJKYW5lIiwiZ
                 mFtaWx5X25hbWUiOiJEb2UiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJqLmRvZ
                 SIsImVtYWlsIjoiamFuZWRvZUBleGFtcGxlLmNvbSIsInBpY3R1cmUiOiJod
                 HRwOi8vZXhhbXBsZS5jb20vamFuZWRvZS9tZS5qcGciLCJwaG9uZV9udW1iZ
                 XIiOiIrMSAyMDIgNTU1IDEyMTIifX0sImlhdCI6MTY2NzU3NTk4MiwiZXhwI
                 joxNjY4MTgwNzgyLCJpc3MiOiJodHRwczovL3NlcnZlci5leGFtcGxlLmNvb
                 SJ9.4kg6Pi8Xz8B85qUiXkEVlTRQpfqUpr725ZIq0YMx1yMIgE7otkTvXdAp
                 pbMHbLbO9-nItJHLd7x-WR5g8rqksQ"
}
</pre><a href="#section-5.4.2-3" class="pilcrow">¶</a>
</div>
<p id="section-5.4.2-4">The contents of the credential in the example are as follows:<a href="#section-5.4.2-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.4.2-5">
<pre>JWT Header:
{
  "alg": "ES256",
  "typ": "JWT",
  "kid": "XTSGmh734_J6fOWUbI7BNim7wyvj5LWx8GzuIH7WHw8"
}

JWT Payload:
{
  "vc": {
    "@context": [
      "https://www.w3.org/2018/credentials/v1"
    ],
    "type": [
      "VerifiableCredential",
      "UserInfoCredential"
    ],
    "credentialSubject": {
      "id": "did:jwk:eyJrdHkiOiJFQyIsInVzZSI6InNpZyIsImNydiI6IlAtMjU2Iiwi
             eCI6InFpR0tMd1hSSm1KUl9BT1FwV09IWExYNXVZSWZ6dlB3RHVyV3ZtWkJ3
             dnciLCJ5IjoiaXA4bnl1THBKNU5wcmlaekNWS2lHMFR0ZXFQTWtyemZOT1VR
             OFl6ZUdkayIsImFsZyI6IkVTMjU2In0",
      "sub": "248289761001",
      "name": "Jane Doe",
      "given_name": "Jane",
      "family_name": "Doe",
      "preferred_username": "j.doe",
      "email": "janedoe@example.com",
      "picture": "http://example.com/janedoe/me.jpg",
      "phone_number": "+1 202 555 1212"
    }
  },
  "iat": 1667575982,
  "exp": 1668180782,
  "iss": "https://server.example.com"
}
</pre><a href="#section-5.4.2-5" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="priming-requests">
<section id="section-5.4.3">
          <h4 id="name-priming-requests">
<a href="#section-5.4.3" class="section-number selfRef">5.4.3. </a><a href="#name-priming-requests" class="section-name selfRef">Priming Requests</a>
          </h4>
<p id="section-5.4.3-1">The OP's Credential Endpoint MUST also support "priming" requests, in which the
<code>format</code> field is set to <code>jwt_vc_json</code>, and a <code>type</code> field set to an array
including <code>VerifiableCredential</code> and <code>UserCredential</code>, but no <code>proof</code> field is
provided.<a href="#section-5.4.3-1" class="pilcrow">¶</a></p>
<p id="section-5.4.3-2">The response to such requests MUST be a standard credential error response with
status code 400 and <code>error_code</code> set to <code>missing_proof</code>.  <code>c_nonce</code> and
<code>c_nonce_expires_in</code> fields MUST be provided.<a href="#section-5.4.3-2" class="pilcrow">¶</a></p>
<p id="section-5.4.3-3">Priming requests are used by clients to obtain a fresh nonce, e.g., when one is
not provided by the token endpoint.<a href="#section-5.4.3-3" class="pilcrow">¶</a></p>
<p id="section-5.4.3-4">An non-normative example priming request and error response are shown below:<a href="#section-5.4.3-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.4.3-5">
<pre>POST /credential HTTP/1.1
Authorization: Bearer S_-WDgsXG8s3V7qrTbI3kZHf4mIcTByLPU2Rd5FoDib
Content-Type: application/json

{
  "format": "jwt_vc_json"
  "type": ["VerifiableCredential", "UserInfoCredential"],
}

HTTP/1.1 400 Bad Request
Content-Type: application/json; charset=utf-8

{
  "format": "jwt_vc",
  "c_nonce": "7mVx0A6QRgYPlXC0SkEtNw",
  "c_nonce_expires_in": 86400
}
</pre><a href="#section-5.4.3-5" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="client-nonce-handling">
<section id="section-5.5">
        <h3 id="name-client-nonce-handling">
<a href="#section-5.5" class="section-number selfRef">5.5. </a><a href="#name-client-nonce-handling" class="section-name selfRef">Client Nonce Handling</a>
        </h3>
<p id="section-5.5-1">This section is non-normative.<a href="#section-5.5-1" class="pilcrow">¶</a></p>
<p id="section-5.5-2">Because of the requirement for proof of possession, clients will need to have a
fresh nonce before they can successfully request a credential.  The OP can
provide that nonce either in a successful Token Response or in a success or
error response from the Credential Endpoint.<a href="#section-5.5-2" class="pilcrow">¶</a></p>
<p id="section-5.5-3">When a client receives a nonce via any of these channels, it should store the
nonce and use it to construct a proof in the next credential request it makes.
Each nonce should only be used once.  Expired nonces should be deleted.<a href="#section-5.5-3" class="pilcrow">¶</a></p>
<p id="section-5.5-4">If a client wishes to make a Credential Request and does not have a nonce
(e.g., because all of its nonces expired), then it should send a priming
request of the form described in <a href="#priming-requests" class="auto internal xref">Section 5.4.3</a>.  The response to this
request will be an error response, but will contain a nonce that can be used to
construct a proof for a credential request.<a href="#section-5.5-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="signed-openid-provider-jwk-sets">
<section id="section-6">
      <h2 id="name-signed-openid-provider-jwk-">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-signed-openid-provider-jwk-" class="section-name selfRef">Signed OpenID Provider JWK Sets</a>
      </h2>
<p id="section-6-1">One benefit of verifiable credentials is a looser coupling between the
credential Issuer (here the OP) and the Verifier.  The Verifier only needs to
know how to verify signatures from a trusted Issuer; the Issuer don't need to know
anything about the Verifier.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">Verifiers can discover the JWK Set for a given Issuer OP using OpenID Connect
Discovery <span>[<a href="#OpenID.Discovery" class="cite xref">OpenID.Discovery</a>]</span>.  However, this risks introducing a requirement
that the Issuer's discovery endpoint be online at the time of verification.  In
order to avoid such a requirement, this section defines a mechanism for an OP to
sign its JWK Set to prove its authenticity to verifiers.  Such a signed JWK Set
can be provided to a Verifier by an untrusted party (for example, the party
presenting a credential), not just the OP.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">A Verifier requests a signed JWK Set by sending an HTTP GET request to the OP's
JWKS URL with the value <code>application/jwt</code> in the HTTP <code>Accept</code> header field.<a href="#section-6-3" class="pilcrow">¶</a></p>
<p id="section-6-4">An OP provides a signed JWK Set in a response to such a request by sending a
response containing a JWT of the following form:<a href="#section-6-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6-5.1">
          <p id="section-6-5.1.1">The <code>x5c</code> field of the JWT header MUST be populated with a certificate chain
that authenticates the domain name in the OP's Issuer Identifier.  The host
name in the Issuer Identifier MUST appear as a <code>dNSName</code> entry in the
<code>subjectAltName</code> extension of the end-entity certificate.<a href="#section-6-5.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-5.2">
          <p id="section-6-5.2.1">The <code>alg</code> field of the JWT header MUST represent an algorithm that is
compatible with the subject public key of the certificate in the <code>x5c</code>
parameter.<a href="#section-6-5.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-5.3">
          <p id="section-6-5.3.1">The <code>iss</code> claim of the JWT MUST contain the OP's Issuer ID.<a href="#section-6-5.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-5.4">
          <p id="section-6-5.4.1">The JWT SHOULD NOT contain an <code>aud</code> claim.<a href="#section-6-5.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-5.5">
          <p id="section-6-5.5.1">The JWT MUST contain an <code>exp</code> claim.<a href="#section-6-5.5.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-5.6">
          <p id="section-6-5.6.1">The JWT MUST conatin a <code>jwks</code> claim, whose value is the OP's JWK Set.<a href="#section-6-5.6.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-6-6">A non-normative example of a request and response for a Signed JWK Set is shown
below:<a href="#section-6-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6-7">
<pre>GET /jwks HTTP/1.1
Host: server.example.com
Accept: application/jwt

HTTP/1.1 200 OK
Content-Type: application/jose

eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsIng1YyI6WyJNSUlDNXpDQ0Fs
QUNBUUV3RFFZSktvWklodmNOQVFFRkJRQXdnYnN4SkRBaUJnTlZCQWNURzFa
aGJHbERaWEowSUZaaGJHbGtZWFJwYjI0Z1RtVjBkMjl5YXpFWE1CVUdBMVVF
Q2hNT1ZtRnNhVU5sY25Rc0lFbHVZeTR4TlRBekJnTlZCQXNUTEZaaGJHbERa
WEowSUVOc1lYTnpJRElnVUc5c2FXTjVJRlpoYkdsa1lYUnBiMjRnUVhWMGFH
OXlhWFI1TVNFd0h3WURWUVFERXhob2RIUndPaTh2ZDNkM0xuWmhiR2xqWlhK
MExtTnZiUzh4SURBZUJna3Foa2lHOXcwQkNRRVdFV2x1Wm05QWRtRnNhV05s
Y25RdVkyOXRNQjRYRFRrNU1EWXlOakF3TVRrMU5Gb1hEVEU1TURZeU5qQXdN
VGsxTkZvd2dic3hKREFpQmdOVkJBY1RHMVpoYkdsRFpYSjBJRlpoYkdsa1lY
UnBiMjRnVG1WMGQyOXlhekVYTUJVR0ExVUVDaE1PVm1Gc2FVTmxjblFzSUVs
dVl5NHhOVEF6QmdOVkJBc1RMRlpoYkdsRFpYSjBJRU5zWVhOeklESWdVRzlz
YVdONUlGWmhiR2xrWVhScGIyNGdRWFYwYUc5eWFYUjVNU0V3SHdZRFZRUURF
eGhvZEhSd09pOHZkM2QzTG5aaGJHbGpaWEowTG1OdmJTOHhJREFlQmdrcWhr
aUc5dzBCQ1FFV0VXbHVabTlBZG1Gc2FXTmxjblF1WTI5dE1JR2ZNQTBHQ1Nx
R1NJYjNEUUVCQVFVQUE0R05BRENCaVFLQmdRRE9PbkhLNWF2SVdaSlYxNnZZ
ZEE3NTd0bjJWVWRaWlVjT0JWWGM2NWcyUEZ4VFhkTXd6empzdlVHSjdTVkND
U1JyQ2w2emZOMVNMVXptMU5aOVdsbXBaZFJKRXkwa1RSeFFiN1hCaFZRNy9u
SGswMXhDK1lEZ2tSb0tXemsyWi9NL1ZYd2JQN1JmWkhNMDQ3UVN2NGRrK05v
Uy96Y253Yk5EdSs5N2JpNXA5d0lEQVFBQk1BMEdDU3FHU0liM0RRRUJCUVVB
QTRHQkFEdC9VRzl2VUpTWlNXSTRPQjlMK0tYSVBxZUNnZllyeCtqRnp1ZzZF
SUxMR0FDT1RiMm9XSCtoZVFDMXUrbU5yMEhaRHpUdUlZRVpvREpKS1BURWps
YlZValA5VU5WK21Xd0Q1TWxNL010c3EyYXpTaUdNNWJVTU1qNFFzc3hzb2R5
YW1Fd0NXL1BPdVo2bGNnNUt0ejg4NWhabytMN3RkRXk4VzlWaUgwUGQiXX0.
eyJpYXQiOjE2Njc1NzU5ODIsImV4cCI6MTY2ODE4MDc4MiwiaXNzIjoiaHR0
cHM6Ly9zZXJ2ZXIuZXhhbXBsZS5jb20iLCJqd2tzIjp7ImtleXMiOlt7Imt0
eSI6IkVDIiwiY3J2IjoiUC0yNTYiLCJhbGciOiJFUzI1NiIsImtpZCI6IlhU
U0dtaDczNF9KNmZPV1ViSTdCTmltN3d5dmo1TFd4OEd6dUlIN1dIdzgiLCJ4
IjoicWlHS0x3WFJKbUpSX0FPUXBXT0hYTFg1dVlJZnp2UHdEdXJXdm1aQnd2
dyIsInkiOiJpcDhueXVMcEo1TnByaVp6Q1ZLaUcwVHRlcVBNa3J6Zk5PVVE4
WXplR2RrIn1dfX0.w32l5L84A6OVo-_pFKI3eWYExpNDAWdwOuyw9LDQo2Kh
Nqz0KU_m4VdrPbmipITDrhhhkxwkkv-e-9w0cXsh1Q
</pre><a href="#section-6-7" class="pilcrow">¶</a>
</div>
<p id="section-6-8">The contents of the Signed JWK Set in the example are as follows (omitting the
full certificate chain):<a href="#section-6-8" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6-9">
<pre>JWT Header:
{
  "alg": "ES256",
  "typ": "JWT",
  "x5c": ["MII..."]
}

JWT Payload:
{
  "iat": 1667575982,
  "exp": 1668180782,
  "iss": "https://server.example.com",
  "jwks": {
    "keys": [{
      "kty": "EC",
      "crv": "P-256",
      "alg": "ES256",
      "kid": "XTSGmh734_J6fOWUbI7BNim7wyvj5LWx8GzuIH7WHw8",
      "x": "qiGKLwXRJmJR_AOQpWOHXLX5uYIfzvPwDurWvmZBwvw",
      "y": "ip8nyuLpJ5NpriZzCVKiG0TteqPMkrzfNOUQ8YzeGdk"
    }]
  }
}
</pre><a href="#section-6-9" class="pilcrow">¶</a>
</div>
<p id="section-6-10">A Verifier that receives such a signed JWK Set validates it by taking the
folloinwg steps:<a href="#section-6-10" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-6-11">
<li id="section-6-11.1">
          <p id="section-6-11.1.1">If this Signed JWK Set was looked up using an Issuer ID, verify that the
Issuer ID in the <code>iss</code> claim is identical to the one used to discover it.<a href="#section-6-11.1.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-6-11.2">
          <p id="section-6-11.2.1">Verify that the JWT has not expired, according to its <code>exp</code> claim.<a href="#section-6-11.2.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-6-11.3">
          <p id="section-6-11.3.1">Verify that the certificate chain in the <code>x5c</code> field is valid from a trusted
certificate authority (see <span>[<a href="#RFC5280" class="cite xref">RFC5280</a>]</span><span>[<a href="#RFC6125" class="cite xref">RFC6125</a>]</span>).<a href="#section-6-11.3.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-6-11.4">
          <p id="section-6-11.4.1">Verify that the end-entity certificate matches the Issuer ID.<a href="#section-6-11.4.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-6-11.5">
          <p id="section-6-11.5.1">Verify the signature on the JWS using the subject public key of the
end-entity certificate<a href="#section-6-11.5.1" class="pilcrow">¶</a></p>
</li>
      </ol>
</section>
</div>
<div id="security-considerations">
<section id="section-7">
      <h2 id="name-security-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-7-1">TODO<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="implementation-considerations">
<section id="section-8">
      <h2 id="name-implementation-consideratio">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-implementation-consideratio" class="section-name selfRef">Implementation Considerations</a>
      </h2>
<p id="section-8-1">TODO<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="privacy-considerations">
<section id="section-9">
      <h2 id="name-privacy-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-privacy-considerations" class="section-name selfRef">Privacy Considerations</a>
      </h2>
<p id="section-9-1">TODO<a href="#section-9-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-10">
      <h2 id="name-normative-references">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="I-D.ietf-mls-protocol">[I-D.ietf-mls-protocol]</dt>
      <dd>
<span class="refAuthor">Barnes, R.</span>, <span class="refAuthor">Beurdouche, B.</span>, <span class="refAuthor">Robert, R.</span>, <span class="refAuthor">Millican, J.</span>, <span class="refAuthor">Omara, E.</span>, and <span class="refAuthor">K. Cohn-Gordon</span>, <span class="refTitle">"The Messaging Layer Security (MLS) Protocol"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-mls-protocol-20</span>, <time datetime="2023-03-27" class="refDate">27 March 2023</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-mls-protocol-20">https://datatracker.ietf.org/doc/html/draft-ietf-mls-protocol-20</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="OpenID.Core">[OpenID.Core]</dt>
      <dd>
<span class="refAuthor">Sakimura, N.</span>, <span class="refAuthor">Bradley, J.</span>, <span class="refAuthor">Jones, M.</span>, <span class="refAuthor">de Medeiros, B.</span>, and <span class="refAuthor">C. Mortimore</span>, <span class="refTitle">"OpenID Connect Core 1.0 incorporating errata set 1"</span>, <time datetime="2014-11-08" class="refDate">8 November 2014</time>, <span>&lt;<a href="http://openid.net/specs/openid-connect-core-1_0.html">http://openid.net/specs/openid-connect-core-1_0.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="OpenID.Discovery">[OpenID.Discovery]</dt>
      <dd>
<span class="refAuthor">Sakimura, N.</span>, <span class="refAuthor">Bradley, J.</span>, <span class="refAuthor">Jones, M.</span>, and <span class="refAuthor">E. Jay</span>, <span class="refTitle">"OpenID Connect Discovery 1.0 incorporating errata set 1"</span>, <time datetime="2014-11-08" class="refDate">8 November 2014</time>, <span>&lt;<a href="https://openid.net/specs/openid-connect-discovery-1_0.html">https://openid.net/specs/openid-connect-discovery-1_0.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="OpenID4VCI">[OpenID4VCI]</dt>
      <dd>
<span class="refAuthor">Lodderstedt, T.</span>, <span class="refAuthor">Yasuda, K.</span>, and <span class="refAuthor">T. Looker</span>, <span class="refTitle">"OpenID for Verifiable Credential Issuance"</span>, <time datetime="2022-09-06" class="refDate">6 September 2022</time>, <span>&lt;<a href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0.html">https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="OpenID4VP">[OpenID4VP]</dt>
      <dd>
<span class="refAuthor">Terbu, O.</span>, <span class="refAuthor">Lodderstedt, T.</span>, <span class="refAuthor">Yasuda, K.</span>, <span class="refAuthor">Lemmon, A.</span>, and <span class="refAuthor">T. Looker</span>, <span class="refTitle">"OpenID for Verifiable Presentations"</span>, <time datetime="2022-06-20" class="refDate">20 June 2022</time>, <span>&lt;<a href="https://openid.net/specs/openid-4-verifiable-presentations-1_0.html">https://openid.net/specs/openid-4-verifiable-presentations-1_0.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
      <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5280">[RFC5280]</dt>
      <dd>
<span class="refAuthor">Cooper, D.</span>, <span class="refAuthor">Santesson, S.</span>, <span class="refAuthor">Farrell, S.</span>, <span class="refAuthor">Boeyen, S.</span>, <span class="refAuthor">Housley, R.</span>, and <span class="refAuthor">W. Polk</span>, <span class="refTitle">"Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile"</span>, <span class="seriesInfo">RFC 5280</span>, <span class="seriesInfo">DOI 10.17487/RFC5280</span>, <time datetime="2008-05" class="refDate">May 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5280">https://www.rfc-editor.org/info/rfc5280</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6125">[RFC6125]</dt>
      <dd>
<span class="refAuthor">Saint-Andre, P.</span> and <span class="refAuthor">J. Hodges</span>, <span class="refTitle">"Representation and Verification of Domain-Based Application Service Identity within Internet Public Key Infrastructure Using X.509 (PKIX) Certificates in the Context of Transport Layer Security (TLS)"</span>, <span class="seriesInfo">RFC 6125</span>, <span class="seriesInfo">DOI 10.17487/RFC6125</span>, <time datetime="2011-03" class="refDate">March 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6125">https://www.rfc-editor.org/info/rfc6125</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8446">[RFC8446]</dt>
      <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"The Transport Layer Security (TLS) Protocol Version 1.3"</span>, <span class="seriesInfo">RFC 8446</span>, <span class="seriesInfo">DOI 10.17487/RFC8446</span>, <time datetime="2018-08" class="refDate">August 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8446">https://www.rfc-editor.org/info/rfc8446</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="StatusList2021">[StatusList2021]</dt>
      <dd>
<span class="refAuthor">Sporny, M.</span>, <span class="refAuthor">Longley, D.</span>, <span class="refAuthor">Steele, O.</span>, <span class="refAuthor">Prorock, M.</span>, and <span class="refAuthor">M. Alkhraishi</span>, <span class="refTitle">"Status List 2021"</span>, <time datetime="2022-06-16" class="refDate">16 June 2022</time>, <span>&lt;<a href="https://www.w3.org/TR/vc-data-model">https://www.w3.org/TR/vc-data-model</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="W3C.did-core">[W3C.did-core]</dt>
      <dd>
<span class="refTitle">"Decentralized Identifiers (DIDs) v1.0"</span>, <span class="seriesInfo">W3C REC did-core</span>, <span class="seriesInfo">W3C did-core</span>, <span>&lt;<a href="https://www.w3.org/TR/did-core/">https://www.w3.org/TR/did-core/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="W3C.did-spec-registries">[W3C.did-spec-registries]</dt>
      <dd>
<span class="refTitle">"DID Specification Registries"</span>, <span class="seriesInfo">W3C NOTE did-spec-registries</span>, <span class="seriesInfo">W3C did-spec-registries</span>, <span>&lt;<a href="https://www.w3.org/TR/did-spec-registries/">https://www.w3.org/TR/did-spec-registries/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="W3C.vc-data-model">[W3C.vc-data-model]</dt>
    <dd>
<span class="refTitle">"Verifiable Credentials Data Model v1.1"</span>, <span class="seriesInfo">W3C REC vc-data-model</span>, <span class="seriesInfo">W3C vc-data-model</span>, <span>&lt;<a href="https://www.w3.org/TR/vc-data-model/">https://www.w3.org/TR/vc-data-model/</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<div id="use-cases">
<section id="appendix-A">
      <h2 id="name-use-cases">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-use-cases" class="section-name selfRef">Use Cases</a>
      </h2>
<div id="end-to-end-identity">
<section id="appendix-A.1">
        <h3 id="name-end-to-end-identity">
<a href="#appendix-A.1" class="section-number selfRef">A.1. </a><a href="#name-end-to-end-identity" class="section-name selfRef">End-to-End Identity</a>
        </h3>
<p id="appendix-A.1-1">Many applications today provide end-to-end encryption, which protects against
inspection or tampering by the communications service provider.  Current
applications, however, have only very manual techniques for verifying the
identity of other users in a communication, for example, verifying key
fingerprints in person.  E2E encryption without identity verification is like
HTTPS with self-signed certificates – vulnerable to impersonation attacks.<a href="#appendix-A.1-1" class="pilcrow">¶</a></p>
<p id="appendix-A.1-2">When appropriately integrated in an E2E encryption system, OpenID Verifiable
Credentials could eliminte the risk of impersonation attacks.  A participant in
an E2E-secure session would be able to present identity information that the
other participants could verify as coming from a trusted OP, and thus
protected from tampering by the application's servers.<a href="#appendix-A.1-2" class="pilcrow">¶</a></p>
<p id="appendix-A.1-3">In this regard, the OP would be the Issuer, and the Holder and Verifier roles
would be played by the user agent software in the E2E encrypted application.  A
user agent would act as Holder when proving its user's identity to others, and
as a Verifier when authenticating other participants in a session.<a href="#appendix-A.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="openid-for-verifiable-presentations">
<section id="appendix-A.2">
        <h3 id="name-openid-for-verifiable-prese">
<a href="#appendix-A.2" class="section-number selfRef">A.2. </a><a href="#name-openid-for-verifiable-prese" class="section-name selfRef">OpenID for Verifiable Presentations</a>
        </h3>
<p id="appendix-A.2-1">The OpenID for Verifiable Presentations specification defines a general
mechanism by which OpenID mechanisms are used to implement the VC presentation
interaction between a Holder and a Verifier.  Through this interaction, a Holder
presents one or more credentials to a Verifier and proves that the Holder is the
legitimate subject of those credentials.  As a result, the Verifier can
associate the attributes in the credentials with the Holder.<a href="#appendix-A.2-1" class="pilcrow">¶</a></p>
<p id="appendix-A.2-2">UserInfo VCs are a specific type of Verifiable Credential, so they can be used
in this protocol to present OpenID claims to a Verifier.  For example, a
UserInfo VC containing a <code>email</code> claim could tell the Verifier that the Holder
legitimately represents that email address (assuming the Verifier trusts the OP
to make such claims).<a href="#appendix-A.2-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="iana-considerations">
<section id="appendix-B">
      <h2 id="name-iana-considerations">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="appendix-B-1">TBD<a href="#appendix-B-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Acknowledgements">
<section id="appendix-C">
      <h2 id="name-acknowledgements">
<a href="#appendix-C" class="section-number selfRef">Appendix C. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="appendix-C-1">TBD<a href="#appendix-C-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="notices">
<section id="appendix-D">
      <h2 id="name-notices">
<a href="#appendix-D" class="section-number selfRef">Appendix D. </a><a href="#name-notices" class="section-name selfRef">Notices</a>
      </h2>
<p id="appendix-D-1">Copyright (c) 2022 The OpenID Foundation.<a href="#appendix-D-1" class="pilcrow">¶</a></p>
<p id="appendix-D-2">The OpenID Foundation (OIDF) grants to any Contributor, developer, implementer, or other interested party a non-exclusive, royalty free, worldwide copyright license to reproduce, prepare derivative works from, distribute, perform and display, this Implementers Draft or Final Specification solely for the purposes of (i) developing specifications, and (ii) implementing Implementers Drafts and Final Specifications based on such documents, provided that attribution be made to the OIDF as the source of the material, but that such attribution does not indicate an endorsement by the OIDF.<a href="#appendix-D-2" class="pilcrow">¶</a></p>
<p id="appendix-D-3">The technology described in this specification was made available from contributions from various sources, including members of the OpenID Foundation and others. Although the OpenID Foundation has taken steps to help ensure that the technology is available for distribution, it takes no position regarding the validity or scope of any intellectual property or other rights that might be claimed to pertain to the implementation or use of the technology described in this specification or the extent to which any license under such rights might or might not be available; neither does it represent that it has made any independent effort to identify any such rights. The OpenID Foundation and the contributors to this specification make no (and hereby expressly disclaim any) warranties (express, implied, or otherwise), including implied warranties of merchantability, non-infringement, fitness for a particular purpose, or title, related to this specification, and the entire risk as to implementing this specification is assumed by the implementer. The OpenID Intellectual Property Rights policy requires contributors to offer a patent promise not to assert certain patent claims against other contributors and against implementers. The OpenID Foundation invites any interested party to bring to its attention any copyrights, patents, patent applications, or other proprietary rights that may cover technology that may be required to practice this specification.<a href="#appendix-D-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="appendix">
<section id="appendix-E">
      <h2 id="name-appendix">
<a href="#appendix-E" class="section-number selfRef">Appendix E. </a><a href="#name-appendix" class="section-name selfRef">Appendix</a>
    </h2>
</section>
</div>
<div id="document-history">
<section id="appendix-F">
      <h2 id="name-document-history">
<a href="#appendix-F" class="section-number selfRef">Appendix F. </a><a href="#name-document-history" class="section-name selfRef">Document History</a>
      </h2>
<p id="appendix-F-1">[[ To be removed from the final specification ]]<a href="#appendix-F-1" class="pilcrow">¶</a></p>
<p id="appendix-F-2">-00<a href="#appendix-F-2" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-F-3.1">initial revision<a href="#appendix-F-3.1" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-G">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Morteza Ansari</span></div>
<div dir="auto" class="left"><span class="org">Individual</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mansari@robotsource.com" class="email">mansari@robotsource.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Richard Barnes</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:rlb@ipv.sx" class="email">rlb@ipv.sx</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Pieter Kasselman</span></div>
<div dir="auto" class="left"><span class="org">Microsoft</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:pieter.kasselman@microsoft.com" class="email">pieter.kasselman@microsoft.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Kristina Yasuda</span></div>
<div dir="auto" class="left"><span class="org">Microsoft</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:kristina.yasuda@microsoft.com" class="email">kristina.yasuda@microsoft.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
