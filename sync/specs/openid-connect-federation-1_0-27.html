<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>OpenID Connect Federation 1.0 - draft 27</title>
<meta content="Roland Hedberg" name="author">
<meta content="Michael B. Jones" name="author">
<meta content="Andreas Ã…kre Solberg" name="author">
<meta content="John Bradley" name="author">
<meta content="Giuseppe De Marco" name="author">
<meta content="Vladimir Dzhuvinov" name="author">
<meta content="
       
        A federation can be expressed as an agreement between parties that trust each other.
        In bilateral federations, direct trust can be established between
        two organizations belonging to the same federation.
        In a multilateral federation, bilateral agreements might not be practical,
        in which case, trust can be mediated by a third party.
        That is the model used in this specification.
       
       
        An Entity in the federation must be able to trust that other Entities
        it interacts with belong to the same federation.
        It must also be able to trust that the information the other Entities
        publish about themselves has not been tampered with during transport
        and that it adheres to the federation's policies.
       
       
        This specification describes the basic components to build
        a multilateral federation and provides a guide on how to apply them when
        the underlying protocol used is OpenID Connect.
       
    " name="description">
<meta content="xml2rfc 3.16.0" name="generator">
<meta content="OpenID" name="keyword">
<meta content="Connect" name="keyword">
<meta content="Federation" name="keyword">
<meta content="openid-connect-federation-1_0" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.16.0
    Python 3.10.6
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.2
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.2
    MarkupSafe 2.1.2
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.28.2
    setuptools 59.6.0
    six 1.16.0
    wcwidth 0.2.6
    weasyprint 57.2
-->
<link href="/usr/src/app/tmp/c53e6727-3804-47ad-b88f-ad6d1e249aef/openid-connect-federation-1_0.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body class="xml2rfc">
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left"></td>
<td class="center">OpenID Connect Federation</td>
<td class="right">February 2023</td>
</tr></thead>
<tfoot><tr>
<td class="left">Hedberg, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">OpenID Connect Working Group</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2023-02-10" class="published">10 February 2023</time>
    </dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">R. Hedberg, <span class="editor">Ed.</span>
</div>
<div class="org">independent</div>
</div>
<div class="author">
      <div class="author-name">M.B. Jones</div>
<div class="org">Microsoft</div>
</div>
<div class="author">
      <div class="author-name">A.Ã…. Solberg</div>
<div class="org">Sikt</div>
</div>
<div class="author">
      <div class="author-name">J. Bradley</div>
<div class="org">Yubico</div>
</div>
<div class="author">
      <div class="author-name">G. De Marco</div>
<div class="org">independent</div>
</div>
<div class="author">
      <div class="author-name">V. Dzhuvinov</div>
<div class="org">Connect2id</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">OpenID Connect Federation 1.0 - draft 27</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">
        A federation can be expressed as an agreement between parties that trust each other.
        In bilateral federations, direct trust can be established between
        two organizations belonging to the same federation.
        In a multilateral federation, bilateral agreements might not be practical,
        in which case, trust can be mediated by a third party.
        That is the model used in this specification.<a href="#section-abstract-1" class="pilcrow">Â¶</a></p>
<p id="section-abstract-2">
        An Entity in the federation must be able to trust that other Entities
        it interacts with belong to the same federation.
        It must also be able to trust that the information the other Entities
        publish about themselves has not been tampered with during transport
        and that it adheres to the federation's policies.<a href="#section-abstract-2" class="pilcrow">Â¶</a></p>
<p id="section-abstract-3">
        This specification describes the basic components to build
        a multilateral federation and provides a guide on how to apply them when
        the underlying protocol used is OpenID Connect.<a href="#section-abstract-3" class="pilcrow">Â¶</a></p>
</section>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">â–²</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.Â Â <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.Â Â <a href="#name-requirements-language" class="internal xref">Requirements Language</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="auto internal xref">1.2</a>.Â Â <a href="#name-terminology" class="internal xref">Terminology</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.Â Â <a href="#name-overall-architecture" class="internal xref">Overall Architecture</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="auto internal xref">2.1</a>.Â Â <a href="#name-cryptographic-trust-mechani" class="internal xref">Cryptographic Trust Mechanism</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.Â Â <a href="#name-components" class="internal xref">Components</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="auto internal xref">3.1</a>.Â Â <a href="#name-entity-statement" class="internal xref">Entity Statement</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.Â Â <a href="#name-trust-chain" class="internal xref">Trust Chain</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.Â Â <a href="#name-metadata" class="internal xref">Metadata</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.Â Â <a href="#name-openid-connect-and-oauth2-m" class="internal xref">OpenID Connect and OAuth2 Metadata Extensions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1.2.1">
                    <p id="section-toc.1-1.4.2.1.2.1.1"><a href="#section-4.1.1" class="auto internal xref">4.1.1</a>.Â Â <a href="#name-usage-of-jwks-jwks_uri-and-" class="internal xref">Usage of jwks, jwks_uri, and signed_jwks_uri</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.Â Â <a href="#name-rp-metadata" class="internal xref">RP Metadata</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.Â Â <a href="#name-op-metadata" class="internal xref">OP Metadata</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="auto internal xref">4.4</a>.Â Â <a href="#name-oauth-authorization-server" class="internal xref">OAuth Authorization Server</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5">
                <p id="section-toc.1-1.4.2.5.1"><a href="#section-4.5" class="auto internal xref">4.5</a>.Â Â <a href="#name-oauth-client" class="internal xref">OAuth Client</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.6">
                <p id="section-toc.1-1.4.2.6.1"><a href="#section-4.6" class="auto internal xref">4.6</a>.Â Â <a href="#name-oauth-protected-resource" class="internal xref">OAuth Protected Resource</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.7">
                <p id="section-toc.1-1.4.2.7.1"><a href="#section-4.7" class="auto internal xref">4.7</a>.Â Â <a href="#name-federation-entity" class="internal xref">Federation Entity</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.Â Â <a href="#name-federation-policy" class="internal xref">Federation Policy</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.Â Â <a href="#name-metadata-policy" class="internal xref">Metadata Policy</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.1">
                    <p id="section-toc.1-1.5.2.1.2.1.1"><a href="#section-5.1.1" class="auto internal xref">5.1.1</a>.Â Â <a href="#name-metadata_policy" class="internal xref">metadata_policy</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.2">
                    <p id="section-toc.1-1.5.2.1.2.2.1"><a href="#section-5.1.2" class="auto internal xref">5.1.2</a>.Â Â <a href="#name-operators" class="internal xref">Operators</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.3">
                    <p id="section-toc.1-1.5.2.1.2.3.1"><a href="#section-5.1.3" class="auto internal xref">5.1.3</a>.Â Â <a href="#name-restrictions-on-policy-entr" class="internal xref">Restrictions on Policy Entries</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.4">
                    <p id="section-toc.1-1.5.2.1.2.4.1"><a href="#section-5.1.4" class="auto internal xref">5.1.4</a>.Â Â <a href="#name-combining-policies" class="internal xref">Combining Policies</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.4.2.1">
                        <p id="section-toc.1-1.5.2.1.2.4.2.1.1"><a href="#section-5.1.4.1" class="auto internal xref">5.1.4.1</a>.Â Â <a href="#name-merging-operators" class="internal xref">Merging Operators</a></p>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.5">
                    <p id="section-toc.1-1.5.2.1.2.5.1"><a href="#section-5.1.5" class="auto internal xref">5.1.5</a>.Â Â <a href="#name-applying-policies" class="internal xref">Applying Policies</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.6">
                    <p id="section-toc.1-1.5.2.1.2.6.1"><a href="#section-5.1.6" class="auto internal xref">5.1.6</a>.Â Â <a href="#name-policy-combination-example" class="internal xref">Policy Combination Example</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.7">
                    <p id="section-toc.1-1.5.2.1.2.7.1"><a href="#section-5.1.7" class="auto internal xref">5.1.7</a>.Â Â <a href="#name-enforcing-policy" class="internal xref">Enforcing Policy</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.8">
                    <p id="section-toc.1-1.5.2.1.2.8.1"><a href="#section-5.1.8" class="auto internal xref">5.1.8</a>.Â Â <a href="#name-extending-the-policy-langua" class="internal xref">Extending the Policy Language</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.9">
                    <p id="section-toc.1-1.5.2.1.2.9.1"><a href="#section-5.1.9" class="auto internal xref">5.1.9</a>.Â Â <a href="#name-policy-example" class="internal xref">Policy Example</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.Â Â <a href="#name-applying-constraints" class="internal xref">Applying Constraints</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.1">
                    <p id="section-toc.1-1.5.2.2.2.1.1"><a href="#section-5.2.1" class="auto internal xref">5.2.1</a>.Â Â <a href="#name-max-path-length" class="internal xref">Max Path Length</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.2">
                    <p id="section-toc.1-1.5.2.2.2.2.1"><a href="#section-5.2.2" class="auto internal xref">5.2.2</a>.Â Â <a href="#name-naming-constraints" class="internal xref">Naming Constraints</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.3">
                    <p id="section-toc.1-1.5.2.2.2.3.1"><a href="#section-5.2.3" class="auto internal xref">5.2.3</a>.Â Â <a href="#name-leaf-entity-type-constraint" class="internal xref">Leaf Entity Type Constraints</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="auto internal xref">5.3</a>.Â Â <a href="#name-trust-marks" class="internal xref">Trust Marks</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.1">
                    <p id="section-toc.1-1.5.2.3.2.1.1"><a href="#section-5.3.1" class="auto internal xref">5.3.1</a>.Â Â <a href="#name-trust-mark-claims" class="internal xref">Trust Mark Claims</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.2">
                    <p id="section-toc.1-1.5.2.3.2.2.1"><a href="#section-5.3.2" class="auto internal xref">5.3.2</a>.Â Â <a href="#name-validating-a-trust-mark" class="internal xref">Validating a Trust Mark</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.3">
                    <p id="section-toc.1-1.5.2.3.2.3.1"><a href="#section-5.3.3" class="auto internal xref">5.3.3</a>.Â Â <a href="#name-trust-mark-examples" class="internal xref">Trust Mark Examples</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.Â Â <a href="#name-obtaining-federation-entity" class="internal xref">Obtaining Federation Entity Configuration Information</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="auto internal xref">6.1</a>.Â Â <a href="#name-federation-entity-configura" class="internal xref">Federation Entity Configuration Request</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="auto internal xref">6.2</a>.Â Â <a href="#name-federation-entity-configurat" class="internal xref">Federation Entity Configuration Response</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.Â Â <a href="#name-federation-endpoints" class="internal xref">Federation Endpoints</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.Â Â <a href="#name-fetching-entity-statements" class="internal xref">Fetching Entity Statements</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1.2.1">
                    <p id="section-toc.1-1.7.2.1.2.1.1"><a href="#section-7.1.1" class="auto internal xref">7.1.1</a>.Â Â <a href="#name-fetch-entity-statements-req" class="internal xref">Fetch Entity Statements Request</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1.2.2">
                    <p id="section-toc.1-1.7.2.1.2.2.1"><a href="#section-7.1.2" class="auto internal xref">7.1.2</a>.Â Â <a href="#name-fetch-entity-statements-res" class="internal xref">Fetch Entity Statements Response</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.Â Â <a href="#name-resolve-entity-statement" class="internal xref">Resolve Entity Statement</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2.2.1">
                    <p id="section-toc.1-1.7.2.2.2.1.1"><a href="#section-7.2.1" class="auto internal xref">7.2.1</a>.Â Â <a href="#name-resolve-request" class="internal xref">Resolve Request</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2.2.2">
                    <p id="section-toc.1-1.7.2.2.2.2.1"><a href="#section-7.2.2" class="auto internal xref">7.2.2</a>.Â Â <a href="#name-resolve-response" class="internal xref">Resolve Response</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2.2.3">
                    <p id="section-toc.1-1.7.2.2.2.3.1"><a href="#section-7.2.3" class="auto internal xref">7.2.3</a>.Â Â <a href="#name-considerations" class="internal xref">Considerations</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="auto internal xref">7.3</a>.Â Â <a href="#name-entity-listings" class="internal xref">Entity Listings</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3.2.1">
                    <p id="section-toc.1-1.7.2.3.2.1.1"><a href="#section-7.3.1" class="auto internal xref">7.3.1</a>.Â Â <a href="#name-entity-listings-request" class="internal xref">Entity Listings Request</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3.2.2">
                    <p id="section-toc.1-1.7.2.3.2.2.1"><a href="#section-7.3.2" class="auto internal xref">7.3.2</a>.Â Â <a href="#name-entity-listing-response" class="internal xref">Entity Listing Response</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.4">
                <p id="section-toc.1-1.7.2.4.1"><a href="#section-7.4" class="auto internal xref">7.4</a>.Â Â <a href="#name-trust-mark-status" class="internal xref">Trust Mark Status</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.4.2.1">
                    <p id="section-toc.1-1.7.2.4.2.1.1"><a href="#section-7.4.1" class="auto internal xref">7.4.1</a>.Â Â <a href="#name-status-request" class="internal xref">Status Request</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.4.2.2">
                    <p id="section-toc.1-1.7.2.4.2.2.1"><a href="#section-7.4.2" class="auto internal xref">7.4.2</a>.Â Â <a href="#name-status-response" class="internal xref">Status Response</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.5">
                <p id="section-toc.1-1.7.2.5.1"><a href="#section-7.5" class="auto internal xref">7.5</a>.Â Â <a href="#name-federation-historical-keys-" class="internal xref">Federation Historical Keys endpoint</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.5.2.1">
                    <p id="section-toc.1-1.7.2.5.2.1.1"><a href="#section-7.5.1" class="auto internal xref">7.5.1</a>.Â Â <a href="#name-federation-historical-keys-r" class="internal xref">Federation Historical Keys Request</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.5.2.2">
                    <p id="section-toc.1-1.7.2.5.2.2.1"><a href="#section-7.5.2" class="auto internal xref">7.5.2</a>.Â Â <a href="#name-federation-historical-keys-re" class="internal xref">Federation Historical Keys Response</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.5.2.3">
                    <p id="section-toc.1-1.7.2.5.2.3.1"><a href="#section-7.5.3" class="auto internal xref">7.5.3</a>.Â Â <a href="#name-rationale-for-the-federatio" class="internal xref">Rationale for the Federation Historical Keys endpoint</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.6">
                <p id="section-toc.1-1.7.2.6.1"><a href="#section-7.6" class="auto internal xref">7.6</a>.Â Â <a href="#name-generic-error-response" class="internal xref">Generic Error Response</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.Â Â <a href="#name-resolving-trust-chain-and-m" class="internal xref">Resolving Trust Chain and Metadata</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.Â Â <a href="#name-fetching-entity-statements-" class="internal xref">Fetching Entity Statements to Establish a Trust Chain</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="auto internal xref">8.2</a>.Â Â <a href="#name-validating-a-trust-chain" class="internal xref">Validating a Trust Chain</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a href="#section-8.3" class="auto internal xref">8.3</a>.Â Â <a href="#name-choosing-one-of-the-valid-t" class="internal xref">Choosing One of the Valid Trust Chains</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4">
                <p id="section-toc.1-1.8.2.4.1"><a href="#section-8.4" class="auto internal xref">8.4</a>.Â Â <a href="#name-calculating-the-expiration-" class="internal xref">Calculating the Expiration Time of a Trust Chain</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.Â Â <a href="#name-updating-metadata-key-rollo" class="internal xref">Updating Metadata, Key Rollover, and Revocation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="auto internal xref">9.1</a>.Â Â <a href="#name-protocol-key-rollover" class="internal xref">Protocol Key Rollover</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="auto internal xref">9.2</a>.Â Â <a href="#name-key-rollover-for-a-trust-an" class="internal xref">Key Rollover for a Trust Anchor</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3">
                <p id="section-toc.1-1.9.2.3.1"><a href="#section-9.3" class="auto internal xref">9.3</a>.Â Â <a href="#name-redundant-retrieval-of-trus" class="internal xref">Redundant Retrieval of Trust Anchor Keys</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.4">
                <p id="section-toc.1-1.9.2.4.1"><a href="#section-9.4" class="auto internal xref">9.4</a>.Â Â <a href="#name-revocation" class="internal xref">Revocation</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>.Â <a href="#name-openid-connect-communicatio" class="internal xref">OpenID Connect Communication</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="auto internal xref">10.1</a>.Â Â <a href="#name-automatic-registration" class="internal xref">Automatic Registration</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1.2.1">
                    <p id="section-toc.1-1.10.2.1.2.1.1"><a href="#section-10.1.1" class="auto internal xref">10.1.1</a>.Â Â <a href="#name-authentication-request" class="internal xref">Authentication Request</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1.2.1.2.1">
                        <p id="section-toc.1-1.10.2.1.2.1.2.1.1"><a href="#section-10.1.1.1" class="auto internal xref">10.1.1.1</a>.Â Â <a href="#name-using-a-request-object" class="internal xref">Using a Request Object</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1.2.1.2.1.2.1">
                            <p id="section-toc.1-1.10.2.1.2.1.2.1.2.1.1"><a href="#section-10.1.1.1.1" class="auto internal xref">10.1.1.1.1</a>.Â Â <a href="#name-processing-the-authenticati" class="internal xref">Processing the Authentication Request</a></p>
</li>
                        </ul>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1.2.1.2.2">
                        <p id="section-toc.1-1.10.2.1.2.1.2.2.1"><a href="#section-10.1.1.2" class="auto internal xref">10.1.1.2</a>.Â Â <a href="#name-using-pushed-authorization" class="internal xref">Using Pushed Authorization</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1.2.1.2.2.2.1">
                            <p id="section-toc.1-1.10.2.1.2.1.2.2.2.1.1"><a href="#section-10.1.1.2.1" class="auto internal xref">10.1.1.2.1</a>.Â Â <a href="#name-processing-the-authenticatio" class="internal xref">Processing the Authentication Request</a></p>
</li>
                        </ul>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1.2.2">
                    <p id="section-toc.1-1.10.2.1.2.2.1"><a href="#section-10.1.2" class="auto internal xref">10.1.2</a>.Â Â <a href="#name-authentication-error-respon" class="internal xref">Authentication Error Response</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1.2.3">
                    <p id="section-toc.1-1.10.2.1.2.3.1"><a href="#section-10.1.3" class="auto internal xref">10.1.3</a>.Â Â <a href="#name-possible-other-uses-of-auto" class="internal xref">Possible Other Uses of Automatic Registration</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="auto internal xref">10.2</a>.Â Â <a href="#name-explicit-registration" class="internal xref">Explicit Registration</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2.2.1">
                    <p id="section-toc.1-1.10.2.2.2.1.1"><a href="#section-10.2.1" class="auto internal xref">10.2.1</a>.Â Â <a href="#name-client-registration" class="internal xref">Client Registration</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2.2.1.2.1">
                        <p id="section-toc.1-1.10.2.2.2.1.2.1.1"><a href="#section-10.2.1.1" class="auto internal xref">10.2.1.1</a>.Â Â <a href="#name-client-registration-request" class="internal xref">Client Registration Request</a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2.2.1.2.2">
                        <p id="section-toc.1-1.10.2.2.2.1.2.2.1"><a href="#section-10.2.1.2" class="auto internal xref">10.2.1.2</a>.Â Â <a href="#name-client-registration-respons" class="internal xref">Client Registration Response</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2.2.1.2.2.2.1">
                            <p id="section-toc.1-1.10.2.2.2.1.2.2.2.1.1"><a href="#section-10.2.1.2.1" class="auto internal xref">10.2.1.2.1</a>.Â Â <a href="#name-op-constructing-the-respons" class="internal xref">OP Constructing the Response</a></p>
</li>
                          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2.2.1.2.2.2.2">
                            <p id="section-toc.1-1.10.2.2.2.1.2.2.2.2.1"><a href="#section-10.2.1.2.2" class="auto internal xref">10.2.1.2.2</a>.Â Â <a href="#name-rp-parsing-the-response" class="internal xref">RP Parsing the Response</a></p>
</li>
                        </ul>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2.2.2">
                    <p id="section-toc.1-1.10.2.2.2.2.1"><a href="#section-10.2.2" class="auto internal xref">10.2.2</a>.Â Â <a href="#name-after-explicit-client-regis" class="internal xref">After Explicit Client Registration</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2.2.2.2.1">
                        <p id="section-toc.1-1.10.2.2.2.2.2.1.1"><a href="#section-10.2.2.1" class="auto internal xref">10.2.2.1</a>.Â Â <a href="#name-what-the-rp-must-do" class="internal xref">What the RP MUST Do</a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2.2.2.2.2">
                        <p id="section-toc.1-1.10.2.2.2.2.2.2.1"><a href="#section-10.2.2.2" class="auto internal xref">10.2.2.2</a>.Â Â <a href="#name-what-the-op-must-do" class="internal xref">What the OP MUST Do</a></p>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2.2.3">
                    <p id="section-toc.1-1.10.2.2.2.3.1"><a href="#section-10.2.3" class="auto internal xref">10.2.3</a>.Â Â <a href="#name-expiration-times" class="internal xref">Expiration Times</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.3">
                <p id="section-toc.1-1.10.2.3.1"><a href="#section-10.3" class="auto internal xref">10.3</a>.Â Â <a href="#name-differences-between-automat" class="internal xref">Differences between Automatic Registration and Explicit Registration</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4">
                <p id="section-toc.1-1.10.2.4.1"><a href="#section-10.4" class="auto internal xref">10.4</a>.Â Â <a href="#name-rationale-for-the-trust-cha" class="internal xref">Rationale for the Trust Chain in the Request</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>.Â <a href="#name-claims-languages-and-script" class="internal xref">Claims Languages and Scripts</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="auto internal xref">12</a>.Â <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.1">
                <p id="section-toc.1-1.12.2.1.1"><a href="#section-12.1" class="auto internal xref">12.1</a>.Â Â <a href="#name-oauth-authorization-server-" class="internal xref">OAuth Authorization Server Metadata Registry</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.1.2.1">
                    <p id="section-toc.1-1.12.2.1.2.1.1"><a href="#section-12.1.1" class="auto internal xref">12.1.1</a>.Â Â <a href="#name-registry-contents" class="internal xref">Registry Contents</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.2">
                <p id="section-toc.1-1.12.2.2.1"><a href="#section-12.2" class="auto internal xref">12.2</a>.Â Â <a href="#name-oauth-dynamic-client-regist" class="internal xref">OAuth Dynamic Client Registration Metadata Registration</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.2.2.1">
                    <p id="section-toc.1-1.12.2.2.2.1.1"><a href="#section-12.2.1" class="auto internal xref">12.2.1</a>.Â Â <a href="#name-registry-contents-2" class="internal xref">Registry Contents</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.3">
                <p id="section-toc.1-1.12.2.3.1"><a href="#section-12.3" class="auto internal xref">12.3</a>.Â Â <a href="#name-oauth-extensions-error-regi" class="internal xref">OAuth Extensions Error Registration</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.3.2.1">
                    <p id="section-toc.1-1.12.2.3.2.1.1"><a href="#section-12.3.1" class="auto internal xref">12.3.1</a>.Â Â <a href="#name-registry-contents-3" class="internal xref">Registry Contents</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.4">
                <p id="section-toc.1-1.12.2.4.1"><a href="#section-12.4" class="auto internal xref">12.4</a>.Â Â <a href="#name-media-type-registration" class="internal xref">Media Type Registration</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.4.2.1">
                    <p id="section-toc.1-1.12.2.4.2.1.1"><a href="#section-12.4.1" class="auto internal xref">12.4.1</a>.Â Â <a href="#name-registry-contents-4" class="internal xref">Registry Contents</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.5">
                <p id="section-toc.1-1.12.2.5.1"><a href="#section-12.5" class="auto internal xref">12.5</a>.Â Â <a href="#name-oauth-parameter-registry" class="internal xref">OAuth Parameter Registry</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.5.2.1">
                    <p id="section-toc.1-1.12.2.5.2.1.1"><a href="#section-12.5.1" class="auto internal xref">12.5.1</a>.Â Â <a href="#name-registry-contents-5" class="internal xref">Registry Contents</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-13" class="auto internal xref">13</a>.Â <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.1">
                <p id="section-toc.1-1.13.2.1.1"><a href="#section-13.1" class="auto internal xref">13.1</a>.Â Â <a href="#name-denial-of-service-attack-pr" class="internal xref">Denial-of-Service Attack Prevention</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.2">
                <p id="section-toc.1-1.13.2.2.1"><a href="#section-13.2" class="auto internal xref">13.2</a>.Â Â <a href="#name-unsigned-error-messages" class="internal xref">Unsigned Error Messages</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#section-14" class="auto internal xref">14</a>.Â <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.1">
                <p id="section-toc.1-1.14.2.1.1"><a href="#section-14.1" class="auto internal xref">14.1</a>.Â Â <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.2">
                <p id="section-toc.1-1.14.2.2.1"><a href="#section-14.2" class="auto internal xref">14.2</a>.Â Â <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.Â Â <a href="#name-provider-information-discov" class="internal xref">Provider Information Discovery and Client Registration in a Federation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.1">
                <p id="section-toc.1-1.15.2.1.1"><a href="#appendix-A.1" class="auto internal xref">A.1</a>.Â Â <a href="#name-setting-up-a-federation" class="internal xref">Setting Up a Federation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.2">
                <p id="section-toc.1-1.15.2.2.1"><a href="#appendix-A.2" class="auto internal xref">A.2</a>.Â Â <a href="#name-the-ligo-wiki-discovers-the" class="internal xref">The LIGO Wiki Discovers the OP's Metadata</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.2.2.1">
                    <p id="section-toc.1-1.15.2.2.2.1.1"><a href="#appendix-A.2.1" class="auto internal xref">A.2.1</a>.Â Â <a href="#name-configuration-information-f" class="internal xref">Configuration Information for op.umu.se</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.2.2.2">
                    <p id="section-toc.1-1.15.2.2.2.2.1"><a href="#appendix-A.2.2" class="auto internal xref">A.2.2</a>.Â Â <a href="#name-configuration-information-fo" class="internal xref">Configuration Information for 'https://umu.se'</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.2.2.3">
                    <p id="section-toc.1-1.15.2.2.2.3.1"><a href="#appendix-A.2.3" class="auto internal xref">A.2.3</a>.Â Â <a href="#name-entity-statement-published-" class="internal xref">Entity Statement Published by 'https://umu.se' about 'https://op.umu.se'</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.2.2.4">
                    <p id="section-toc.1-1.15.2.2.2.4.1"><a href="#appendix-A.2.4" class="auto internal xref">A.2.4</a>.Â Â <a href="#name-configuration-information-for" class="internal xref">Configuration Information for 'https://swamid.se'</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.2.2.5">
                    <p id="section-toc.1-1.15.2.2.2.5.1"><a href="#appendix-A.2.5" class="auto internal xref">A.2.5</a>.Â Â <a href="#name-entity-statement-published-b" class="internal xref">Entity Statement Published by 'https://swamid.se' about 'https://umu.se'</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.2.2.6">
                    <p id="section-toc.1-1.15.2.2.2.6.1"><a href="#appendix-A.2.6" class="auto internal xref">A.2.6</a>.Â Â <a href="#name-configuration-information-for-" class="internal xref">Configuration Information for 'https://edugain.geant.org'</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.2.2.7">
                    <p id="section-toc.1-1.15.2.2.2.7.1"><a href="#appendix-A.2.7" class="auto internal xref">A.2.7</a>.Â Â <a href="#name-entity-statement-published-by" class="internal xref">Entity Statement Published by 'https://edugain.geant.org' about 'https://swamid.se'</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.2.2.8">
                    <p id="section-toc.1-1.15.2.2.2.8.1"><a href="#appendix-A.2.8" class="auto internal xref">A.2.8</a>.Â Â <a href="#name-verified-metadata-for-opumu" class="internal xref">Verified Metadata for op.umu.se</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.3">
                <p id="section-toc.1-1.15.2.3.1"><a href="#appendix-A.3" class="auto internal xref">A.3</a>.Â Â <a href="#name-the-two-ways-of-doing-clien" class="internal xref">The Two Ways of Doing Client Registration</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.3.2.1">
                    <p id="section-toc.1-1.15.2.3.2.1.1"><a href="#appendix-A.3.1" class="auto internal xref">A.3.1</a>.Â Â <a href="#name-rp-sends-authentication-req" class="internal xref">RP Sends Authentication Request (Automatic Registration)</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.3.2.1.2.1">
                        <p id="section-toc.1-1.15.2.3.2.1.2.1.1"><a href="#appendix-A.3.1.1" class="auto internal xref">A.3.1.1</a>.Â Â <a href="#name-op-fetches-entity-statement" class="internal xref">OP Fetches Entity Statements</a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.3.2.1.2.2">
                        <p id="section-toc.1-1.15.2.3.2.1.2.2.1"><a href="#appendix-A.3.1.2" class="auto internal xref">A.3.1.2</a>.Â Â <a href="#name-op-evaluates-the-rp-metadat" class="internal xref">OP Evaluates the RP Metadata</a></p>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.3.2.2">
                    <p id="section-toc.1-1.15.2.3.2.2.1"><a href="#appendix-A.3.2" class="auto internal xref">A.3.2</a>.Â Â <a href="#name-client-starts-with-registra" class="internal xref">Client Starts with Registration (Explicit Client Registration)</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.Â Â <a href="#name-notices" class="internal xref">Notices</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a href="#appendix-C" class="auto internal xref">Appendix C</a>.Â Â <a href="#name-acknowledgements" class="internal xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18">
            <p id="section-toc.1-1.18.1"><a href="#appendix-D" class="auto internal xref">Appendix D</a>.Â Â <a href="#name-document-history" class="internal xref">Document History</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19">
            <p id="section-toc.1-1.19.1"><a href="#appendix-E" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="Introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">
        This specification describes how two Entities that would like to
        interact can dynamically fetch and resolve trust and metadata for a
        given protocol using a third-party Trust Anchor. A trust
        anchor is an Entity whose main purpose is to issue statements
        about Entities, such as OpenID Connect Relying Parties, OpenID
        Providers, and participating organizations.
        An identity federation can be realized using this specification using
        one or more levels of authorities.
 Examples of authorities are federation operators, organizations,
 departments within organizations, and individual sites.
 This specification does not mandate
        a specific way or restrict how a federation may be built. Instead, the
        specification provides the basic technical trust infrastructure building
        blocks needed to create a dynamic and distributed trust network, such as a
        federation.<a href="#section-1-1" class="pilcrow">Â¶</a></p>
<p id="section-1-2">
        Note that this specification only concerns itself with how Entities
        in a federation get to know about each other.
        Furthermore, note that an organization
        MAY be represented by more than one Entity in a federation.
        It is also true that an Entity can be part of more than one federation.<a href="#section-1-2" class="pilcrow">Â¶</a></p>
<p id="section-1-3">
        OpenID Connect Federation Trust Chains rely on
        cryptographically signed
        <span><a href="#RFC7519" class="internal xref">JSON Web Token (JWT)</a> [<a href="#RFC7519" class="cite xref">RFC7519</a>]</span>
        documents, and the Trust Chain does not at
        all rely on TLS
        <span>[<a href="#RFC8446" class="cite xref">RFC8446</a>]</span>
        to establish trust.<a href="#section-1-3" class="pilcrow">Â¶</a></p>
<section id="section-1.1">
        <h3 id="name-requirements-language">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-requirements-language" class="section-name selfRef">Requirements Language</a>
        </h3>
<p id="section-1.1-1">
          The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
          "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this
          document are to be interpreted as described in
          BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span>.<a href="#section-1.1-1" class="pilcrow">Â¶</a></p>
</section>
<section id="section-1.2">
        <h3 id="name-terminology">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
        </h3>
<p id="section-1.2-1">
          This specification uses the terms
          "Claim Name", "Claim Value", "JSON Web Token (JWT)",
          defined by
          <span><a href="#RFC7519" class="internal xref">JSON Web Token (JWT)</a> [<a href="#RFC7519" class="cite xref">RFC7519</a>]</span>,
          and the terms "OpenID Provider (OP)" and "Relying Party (RP)" defined
          by <span><a href="#OpenID.Core" class="internal xref">OpenID Connect Core 1.0</a> [<a href="#OpenID.Core" class="cite xref">OpenID.Core</a>]</span>.<a href="#section-1.2-1" class="pilcrow">Â¶</a></p>
<p id="section-1.2-2">
          This specification also defines the following terms:<a href="#section-1.2-2" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-1.2-3">
          <dt id="section-1.2-3.1">Entity</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-3.2">
              Something that has a separate and distinct existence and that can
              be identified in a context. All Entities in an OpenID Connect
              federation MUST have a globally unique identifier.<a href="#section-1.2-3.2" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-3.3">Entity Identifier</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-3.4">
              A globally unique URI that is bound to one Entity.<a href="#section-1.2-3.4" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-3.5">Trust Anchor</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-3.6">
              An Entity that represents a trusted third party.<a href="#section-1.2-3.6" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-3.7">Entity Statement</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-3.8">
              A signed JWT that contains the information needed
              for an Entity to participate in federation(s),
              including metadata about itself
              and policies that apply to other Entities that it is authoritative for.<a href="#section-1.2-3.8" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-3.9">Entity Configuration</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-3.10">
              An Entity Statement issued by an Entity about itself. It contains
              the Entity's signing keys and further data used to control the
              Trust Chain resolution process, such as authority hints.<a href="#section-1.2-3.10" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-3.11">Entity Type</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-3.12">
              The type of an Entity expresses its roles and functions
              within a federation. An Entity MUST be of at
              least one type and MAY be of many types.
              For example, an Entity can be both an OpenID Provider
              and Relying Party at the same time.<a href="#section-1.2-3.12" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-3.13">Federation Operator</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-3.14">
              An organization that is authoritative for a federation.
              A federation operator administers the Trust Anchor(s) for Entities in its federation.<a href="#section-1.2-3.14" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-3.15">Intermediate Entity</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-3.16">
              An Entity that issues
              an Entity Statement appearing somewhere in between those
              issued by the Trust Anchor and the Leaf Entity in a Trust Chain.
              The terms Intermediate Entity and Intermediate are used
              interchangeably in this specification.<a href="#section-1.2-3.16" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-3.17">Leaf Entity</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-3.18">
              An Entity defined by a protocol,
              e.g., OpenID Connect Relying Party or Provider.<a href="#section-1.2-3.18" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-3.19">Subordinate Entity</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-3.20">
                An Entity accredited by a Trust Anchor or an Intermediate Entity,
                which can be a Leaf Entity but also an Entity that acts as
                Intermediate for other Entities.<a href="#section-1.2-3.20" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-3.21">Federation Entity Discovery</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-3.22">
              A process that starts with an Entity Identifier and collects
              a number of Entity Statements until the chosen Trust Anchor is reached.
              From the collected Entity Statements, a Trust Chain
              is constructed and verified.
              The result of the Federation Entity Discovery is that the
              Leaf Entity's metadata is constructed from the Trust Chain.<a href="#section-1.2-3.22" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-3.23">Trust Chain</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-3.24">
              A sequence of Entity Statements that represents a chain
              starting at a Leaf Entity and ending in a Trust Anchor.<a href="#section-1.2-3.24" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-3.25">Trust Mark</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-3.26">
              Statement of conformance to a
              well-scoped set of trust and/or interoperability requirements
              as determined by an accreditation authority.<a href="#section-1.2-3.26" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-3.27">Federation Entity Keys</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-3.28">
              Keys used for all the cryptogaphic signatures required by
              the trust mechanisms defined in this document.
              Every participant in a Federation publishes its
              Federation Entity Keys in its Entity Configuration.<a href="#section-1.2-3.28" class="pilcrow">Â¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</section>
</div>
<div id="architecture">
<section id="section-2">
      <h2 id="name-overall-architecture">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-overall-architecture" class="section-name selfRef">Overall Architecture</a>
      </h2>
<p id="section-2-1">
        The basic component is the Entity Statement, which is a cryptographically
        signed <span><a href="#RFC7519" class="internal xref">JSON Web Token (JWT)</a> [<a href="#RFC7519" class="cite xref">RFC7519</a>]</span>.
        A set of Entity Statements can form a path from a Leaf Entity to
        a Trust Anchor. Entity Configurations
        issued by Entities about themselves control the Trust Chain
        resolution process.<a href="#section-2-1" class="pilcrow">Â¶</a></p>
<p id="section-2-2">
        The Entity Configuration of a Leaf Entity contains one or more
        references to its superiors, found in the
        <span><a href="#authority_hints" class="internal xref">authority_hints</a> (<a href="#authority_hints" class="auto internal xref">Section 3.1</a>)</span> parameter.
        These references can be used to download the Entity Configuration of each superior.
        One or more Entity Configurations can occur during the Federation Entity Discovery
        until the Trust Anchor is reached.<a href="#section-2-2" class="pilcrow">Â¶</a></p>
<p id="section-2-3">
        The Trust Anchor and its Intermediates issue Entity Statements
        about their Subordinates. The sequence of Entity Configurations
        and Entity Statements that validate the relationship between
        a superior and a Subordinate, along a path towards the Trust Anchor,
        forms the proof that a Leaf Entity is part of
        the Federation configured by the Trust Anchor.<a href="#section-2-3" class="pilcrow">Â¶</a></p>
<p id="section-2-4">
        The chain that links the statements to one another is verifiable with
        the signature of each statement, as described in <a href="#trust_chain" class="auto internal xref">Section 3.2</a>.<a href="#section-2-4" class="pilcrow">Â¶</a></p>
<p id="section-2-5">
        With a verified Trust Chain, the federation policy is finally applied
        and the metadata describing a Leaf Entity within the Federation is then
        derived.
        How this is done is described in <a href="#federation_policy" class="auto internal xref">Section 5</a>.<a href="#section-2-5" class="pilcrow">Â¶</a></p>
<p id="section-2-6">
        This specification deals with trust operations;
        it doesn't cover or touch protocol operations
        outside those of metadata derivation and exchange.
        In OpenID Connect terms, these are protocol
        operations other than
        <span><a href="#OpenID.Discovery" class="internal xref">OpenID Connect Discovery 1.0</a> [<a href="#OpenID.Discovery" class="cite xref">OpenID.Discovery</a>]</span>
        and
        <span><a href="#OpenID.Registration" class="internal xref">OpenID Connect Dynamic Client
          Registration 1.0</a> [<a href="#OpenID.Registration" class="cite xref">OpenID.Registration</a>]</span>.<a href="#section-2-6" class="pilcrow">Â¶</a></p>
<p id="section-2-7">
        OpenID Connect is used in all of the examples in this
        specification, however this doesn't mean that this specification can only be used
        together with OpenID Connect. On the contrary, it can also be
        used to build federations based on any other protocols
        that depend on the dynamic exchange of Entity metadata
        (e.g., OAuth 2.0).<a href="#section-2-7" class="pilcrow">Â¶</a></p>
<div id="CryptographicTrustMechanism">
<section id="section-2.1">
        <h3 id="name-cryptographic-trust-mechani">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-cryptographic-trust-mechani" class="section-name selfRef">Cryptographic Trust Mechanism</a>
        </h3>
<p id="section-2.1-1">
   The objects defined by this specification
   that are used to establish cryptographic trust between participants
   are secured as signed JWTs using public key cryptography.
   In particular, the keys used for securing these objects are managed by
   the Entities controlling those objects, with the public keys securing them
   being distributed through those objects themselves.
   This kind of trust mechanism has been utilized by
   research and academic federations for over a decade.<a href="#section-2.1-1" class="pilcrow">Â¶</a></p>
<p id="section-2.1-2">
   Note that this cryptographic trust mechanim intentionally does not rely on
   Web PKI / TLS certificates for signing keys.
   Which TLS certificates are considered trusted can vary considerably between systems
   depending upon which certificate authorities are considered trusted
   and there are have been notable examples of ostensibly trusted certificates being compromised.
   For those reasons, this specification explicitly eschews reliance on Web PKI
   in favor of self-managed public keys, in this case,
   keys represented as JSON Web Keys (JWKs) <span>[<a href="#RFC7517" class="cite xref">RFC7517</a>]</span>.<a href="#section-2.1-2" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="components">
<section id="section-3">
      <h2 id="name-components">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-components" class="section-name selfRef">Components</a>
      </h2>
<div id="entity-statement">
<section id="section-3.1">
        <h3 id="name-entity-statement">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-entity-statement" class="section-name selfRef">Entity Statement</a>
        </h3>
<p id="section-3.1-1">
          An Entity Statement contains the information needed for the Entity
          that is the subject of the Entity Statement to participate in federation(s).
          An Entity Statement is always a signed JWT.
          The subject of the JWT is the Entity itself.
          The issuer of the JWT is the party that issued the Entity Statement.
          All Entities in a federation SHOULD be prepared to publish an Entity
          Statement about themselves (Entity Configuration).<a href="#section-3.1-1" class="pilcrow">Â¶</a></p>
<p id="section-3.1-2">
          Entity Statement JWTs MUST be explicitly typed, by setting the
          <code>typ</code> header parameter to
          <code>entity-statement+jwt</code>. This
          prevents cross-JWT confusion (see <span>[<a href="#RFC8725" class="cite xref">RFC8725</a>]</span>, section 3.11).<a href="#section-3.1-2" class="pilcrow">Â¶</a></p>
<p id="section-3.1-3">
          An Entity Statement is composed of the following claims:<a href="#section-3.1-3" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-3.1-4">
          <dt id="section-3.1-4.1">iss</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-4.2">
              REQUIRED. The Entity Identifier of the issuer of
              the statement. If the <code>iss</code> and
              the <code>sub</code> are identical, the
              issuer is making a statement about itself and this Entity Statement
              is an Entity Configuration.<a href="#section-3.1-4.2" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-4.3">sub</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-4.4">
              REQUIRED. The Entity Identifier of the subject.<a href="#section-3.1-4.4" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-4.5">iat</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-4.6">
              REQUIRED. The time the statement was issued.
              Its value is a JSON number representing the number of seconds from
              1970-01-01T0:0:0Z as measured in UTC until the date/time.
              See <span>[<a href="#RFC3339" class="cite xref">RFC3339</a>]</span> for
              details regarding date/times in general and UTC in particular.<a href="#section-3.1-4.6" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-4.7">exp</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-4.8">
              REQUIRED.
              Expiration time on or after which the statement MUST NOT be
              accepted for processing. Its value is a JSON number representing
              the number of seconds from 1970-01-01T0:0:0Z as measured in UTC
              until the date/time.<a href="#section-3.1-4.8" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-4.9">jwks</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-4.10">
              REQUIRED Conditional. A
              <span><a href="#RFC7517" class="internal xref">JSON Web Key Set (JWKS)</a> [<a href="#RFC7517" class="cite xref">RFC7517</a>]</span>
              representing the public part of the subject
              Entity's signing keys. The corresponding private key is
              used by Leaf Entities to sign Entity Configurations about themselves,
              and Intermediate Entities to sign Entity Statements about other Entities.
              The keys that can be found here are intended to verify the signature of the
              issued Entity Statements and Trust Marks and SHOULD NOT be used in other protocols. Keys
              to be used in other protocols, such as OpenID Connect, are conveyed
              in the <code>metadata</code> elements of the respective Entity Statement.
              This claim is only OPTIONAL for the Entity Statement returned
              from an OP when the client is doing Explicit Registration.
              In all other cases it is REQUIRED.
              Every JWK in the JWK Set MUST have a Key ID (<code>kid</code>).
              It is RECOMMENDED that the Key ID be the JWK Thumbprint <span>[<a href="#RFC7638" class="cite xref">RFC7638</a>]</span>
              using the SHA-256 hash function of the key.<a href="#section-3.1-4.10" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-4.11">aud</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-4.12">
              OPTIONAL.
              The Entity Statement MAY be specifically created for an Entity.
              The Entity Identifier for that Entity MUST appear in this claim.<a href="#section-3.1-4.12" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-4.13">authority_hints</dt>
          <dd id="section-3.1-4.14" style="margin-left: 1.5em">
<div id="authority_hints">
              OPTIONAL. An array of strings representing
              the Entity Identifiers of Intermediate Entities or Trust Anchors
              that MAY issue an Entity Statement about the issuer Entity.
              For all Entities except for Trust Anchors that do not have any
              superiors, this is REQUIRED and MUST NOT be the empty list
              <code>[]</code>.
              This claim MUST be absent from an
              Entity Configuration issued by a Trust Anchor with no superiors.<a href="#authority_hints" class="pilcrow">Â¶</a>
</div>
          </dd>
<dd class="break"></dd>
<dt id="section-3.1-4.15">metadata</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-4.16">
              REQUIRED Conditional. JSON object that includes
              protocol-specific metadata claims that represent the
              Entity's Type and metadata.

              Each key of the JSON object represents a metadata type
              identifier, and each value MUST be a JSON object representing
              the metadata according to the metadata schema of that metadata
              type. Such a JSON object may be empty.
              An Entity Statement MAY contain multiple
              metadata statements, but only one for each metadata type.
              If the Entity Statement is an Entity Configuration,
              then the Entity Statement MUST contain a
              <code>metadata</code> claim.
              In some cases, a superior may want to be explicit about what metadata
              should be used for a Subordinate. In that case
              <code>metadata</code> can be used. If
              <code>metadata</code> is used it is only valid for the
              subject of the Entity Statement and has no impact on its Subordinates.
              If a <code>metadata</code> claim appears beside a
              <code>metadata_policy</code> claim in an
              Entity Statement, then for each Entity Type, claims that appear in
              <code>metadata</code> MUST NOT appear in
              <code>metadata_policy</code><a href="#section-3.1-4.16" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-4.17">metadata_policy</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-4.18">
              REQUIRED Conditional. JSON object that describes
              a metadata policy.
              A <code>metadata_policy</code> applies to the Entity described in this
              Entity Statement as well as to all Entities that appear beneath the
              Entity described in this Entity Statement.
              Applying to Subordinate Entities distinguishes
              <code>metadata_policy</code> from
              <code>metadata</code>, which only applies to the
              subject itself.
              Each key of the JSON object represents a metadata type
              identifier, and each value MUST be a JSON object representing
              the metadata policy according to the metadata schema of that
              metadata type. An Entity Statement MAY contain multiple
              metadata policy statements, but only one for each metadata type.
              Only non Leaf Entities MAY contain a
              <code>metadata_policy</code>
              claim. Entity Configurations MUST NOT contain a
              <code>metadata_policy</code> claim.<a href="#section-3.1-4.18" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-4.19">constraints</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-4.20">
              OPTIONAL. JSON object that describes a set of Trust Chain
              constraints. There is more about this in
              <a href="#chain_constraints" class="auto internal xref">Section 5.2</a>.<a href="#section-3.1-4.20" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-4.21">crit</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-4.22">
              OPTIONAL.
              The <code>crit</code> (critical) Entity Statement
              claim
              indicates that extensions to Entity Statement claims defined by
              this specification
              are being used that MUST be understood and processed.
              It is used in the same way that
              <code>crit</code>
              is used for extension <span><a href="#RFC7515" class="internal xref">JWS</a> [<a href="#RFC7515" class="cite xref">RFC7515</a>]</span> header
              parameters that MUST be understood and processed.
              Its value is an array listing the Entity Statement claims
              present in the Entity Statement that use those extensions.
              If any of the listed extension Entity Statement claims are not
              understood and supported by the recipient, then the Entity
              Statement is invalid.
              Producers MUST NOT include Entity Statement claim names defined by
              this specification or
              names that do not occur as Entity Statement claim names in the
              Entity Statement
              in the <code>crit</code> list.
              Producers MUST NOT use the empty list
              <code>[]</code>
              as the <code>crit</code> value.<a href="#section-3.1-4.22" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-4.23">policy_language_crit</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-4.24">
              OPTIONAL.
              The <code>policy_language_crit</code> (critical)
              Entity Statement claim
              indicates that extensions to the policy language defined by this
              specification
              are being used that MUST be understood and processed.
              It is used in the same way that
              <code>crit</code>
              is used for extension
              <span><a href="#RFC7515" class="internal xref">JSON Web Signature (JWS)</a> [<a href="#RFC7515" class="cite xref">RFC7515</a>]</span>
              header parameters that MUST be
              understood and processed.
              Its value is an array listing the policy language extensions
              present in the policy language statements that use those
              extensions.
              If any of the listed extension policy language extensions are not
              understood and supported by the recipient, then the Entity
              Statement is invalid.
              Producers MUST NOT include policy language names defined by this
              specification or
              names that do not occur in policy language statements in the
              Entity Statement
              in the <code>policy_language_crit</code> list.
              Producers MUST NOT use the empty list
              <code>[]</code>
              as the <code>policy_language_crit</code> value.<a href="#section-3.1-4.24" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-4.25">trust_marks</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-4.26">
            <p id="section-3.1-4.26.1">
              OPTIONAL. A JSON array of objects, each representing
              a Trust Mark.

              Each JSON object MUST contain the following two claims
              and MAY contain other claims if needed. All the claims in the
              JSON object MUST have the same values as those
              contained in the Trust Mark JSON Web Token.<a href="#section-3.1-4.26.1" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-3.1-4.26.2">
              <dt id="section-3.1-4.26.2.1">id</dt>
              <dd style="margin-left: 1.5em" id="section-3.1-4.26.2.2">
                  The Trust Mark unique identifier.
                  It MUST be the same value as the
                  <code>id</code>
                  claim contained in the
                  Trust Mark JSON Web Token.<a href="#section-3.1-4.26.2.2" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-3.1-4.26.2.3">trust_mark</dt>
              <dd style="margin-left: 1.5em" id="section-3.1-4.26.2.4">
                  A signed JSON Web Token that represents a Trust Mark.<a href="#section-3.1-4.26.2.4" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-3.1-4.26.3">
              There is more about Trust Marks in
              <a href="#trust_marks" class="auto internal xref">Section 5.3</a>.<a href="#section-3.1-4.26.3" class="pilcrow">Â¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-4.27">trust_marks_issuers</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-4.28">
              OPTIONAL.
              A Trust Anchor MAY use this claim to tell which combination of
              Trust Mark identifiers and issuers are trusted by the federation.
              This claim MUST be ignored if present in an Entity Configuration that
              describes an Entity that is not a Trust Anchor.
              It is a JSON object with keys representing Trust Mark identifiers and values
              being an array of trusted Entities representing the accreditation authority.

              If the value list bound to a Trust Mark identifier is empty,
              anyone can issue Trust Marks with that identifier.
              There is more about Trust Marks in <a href="#trust_marks" class="auto internal xref">Section 5.3</a>.<a href="#section-3.1-4.28" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-4.29">trust_anchor_id</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-4.30">
              OPTIONAL.
              An OP MUST use this claim to tell the RP which Trust Anchor it
              chose to use when responding to an explicit client registration
              (<span><a href="#explicit" class="internal xref">Explicit Client Registration</a> (<a href="#explicit" class="auto internal xref">Section 10.2</a>)</span>).
              The value of <code>trust_anchor_id</code> is the
              Entity Identifier of a Trust Anchor.<a href="#section-3.1-4.30" class="pilcrow">Â¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-3.1-5">
          The Entity Statement is signed using the private key of the issuer
          Entity in the form of a <span><a href="#RFC7515" class="internal xref">JSON Web Signature
          (JWS)</a> [<a href="#RFC7515" class="cite xref">RFC7515</a>]</span>.
          Implementations SHOULD support signature verification with
          the RSA SHA-256 algorithm because OpenID Connect Core
          requires support for it (<code>alg</code>
          value of <code>RS256</code>).
          Federations MAY also specify different mandatory-to-implement algorithms.<a href="#section-3.1-5" class="pilcrow">Â¶</a></p>
<p id="section-3.1-6" class="keepWithNext">
            The following is a non-normative example of
            a <code>trust_marks_issuers</code> claim value:<a href="#section-3.1-6" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.1-7">
<pre>
{
  "https://openid.net/certification/op": ["*"],
  "https://refeds.org/wp-content/uploads/2016/01/Sirtfi-1.0.pdf":
    ["https://swamid.se"]
}
</pre><a href="#section-3.1-7" class="pilcrow">Â¶</a>
</div>
<p id="section-3.1-8" class="keepWithNext">
            The following is a non-normative example of an Entity Statement
            before adding a signature. The example contains
            a critical extension <code>jti</code> (JWT ID) to the
            Entity Statement and one critical extension to the policy language
            <code>regexp</code>
            (Regular expression).<a href="#section-3.1-8" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.1-9">
<pre>
{
  "iss": "https://feide.no",
  "sub": "https://ntnu.no",
  "iat": 1516239022,
  "exp": 1516298022,
  "crit": ["jti"],
  "jti": "7l2lncFdY6SlhNia",
  "policy_language_crit": ["regexp"],
  "metadata": {
    "openid_provider": {
      "issuer": "https://ntnu.no",
      "organization_name": "NTNU",
    },
    "oauth_client": {
      "organization_name": "NTNU"
    }
  },
  "metadata_policy": {
    "openid_provider": {
      "id_token_signing_alg_values_supported":
        {"subset_of": ["RS256", "RS384", "RS512"]},
      "op_policy_uri": {
        "regexp":
          "^https:\/\/[\\w-]+\\.example\\.com\/[\\w-]+\\.html"}
    },
    "oauth_client": {
      "grant_types": {
        "subset_of": ["authorization_code", "client_credentials"]
      },
  },
  "constraints": {
    "max_path_length": 2
  },
  "jwks": {
    "keys": [
      {
        "alg": "RS256",
        "e": "AQAB",
        "key_ops": ["verify"],
        "kid": "key1",
        "kty": "RSA",
        "n": "pnXBOusEANuug6ewezb9J_...",
        "use": "sig"
      }
    ]
  }
}
</pre><a href="#section-3.1-9" class="pilcrow">Â¶</a>
</div>
</section>
</div>
<div id="trust_chain">
<section id="section-3.2">
        <h3 id="name-trust-chain">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-trust-chain" class="section-name selfRef">Trust Chain</a>
        </h3>
<p id="section-3.2-1">
          In an OpenID Connect identity federation, Entities that together build
          a Trust Chain can be categorized as:<a href="#section-3.2-1" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-3.2-2">
          <dt id="section-3.2-2.1">Trust anchor</dt>
          <dd style="margin-left: 1.5em" id="section-3.2-2.2">
              An Entity that represents a trusted third party.<a href="#section-3.2-2.2" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-3.2-2.3">Leaf</dt>
          <dd style="margin-left: 1.5em" id="section-3.2-2.4">
              In an OpenID Connect identity federation, an RP or an OP.<a href="#section-3.2-2.4" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-3.2-2.5">Intermediate</dt>
          <dd style="margin-left: 1.5em" id="section-3.2-2.6">
              Neither a Leaf Entity nor a Trust Anchor.<a href="#section-3.2-2.6" class="pilcrow">Â¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-3.2-3">
          A Trust Chain begins with a Leaf Entity Configuration,
          and has zero or more Entity Statements
          issued by Intermediates about Subordinates,
          including the Entity Statement issued by the
          Trust Anchor about the top-most Intermediate
          (if there are Intermediates) or the Leaf Entity
          (if there are no Intermediates).
          The Trust Chain MAY end with the
          Entity Configuration of the Trust Anchor.<a href="#section-3.2-3" class="pilcrow">Â¶</a></p>
<p id="section-3.2-4">
          If present, the Trust Anchor's Entity Configuration
          at the end of the chain contains the configuration of the federation,
          such as the public keys of the Trust Anchor and other parameters
          considered within the trust evaluation.
          When this is the case, the Trust Chain
          consequentially contains the configuration of the federation
          at the time of the evaluation of the chain.<a href="#section-3.2-4" class="pilcrow">Â¶</a></p>
<p id="section-3.2-5">
          A simple example: If we have an RP that belongs to Organization A
          that is a member of Federation F, the Trust Chain for such a setup
          will contain the following Entity Statements:<a href="#section-3.2-5" class="pilcrow">Â¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-3.2-6">
<li id="section-3.2-6.1">
              an Entity Configuration about the RP published by the RP,<a href="#section-3.2-6.1" class="pilcrow">Â¶</a>
</li>
          <li id="section-3.2-6.2">
              an Entity Statement about the RP published by Organization A,<a href="#section-3.2-6.2" class="pilcrow">Â¶</a>
</li>
          <li id="section-3.2-6.3">
              an Entity Statement about Organization A published by Federation F.<a href="#section-3.2-6.3" class="pilcrow">Â¶</a>
</li>
        </ol>
<p id="section-3.2-7">
          A Trust Chain MUST always be possible to order such that:
          If we name the Entity Statements ES[0] (the Leaf Entity's
          Entity Configuration) to ES[i] (an Entity Statement issued
          by the Trust Anchor), i&gt;0 then:<a href="#section-3.2-7" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2-8.1">
              The <code>iss</code> Entity in one Entity Statement
              is always the
              <code>sub</code>
              Entity in the next.
              ES[j]['iss'] == ES[j+1]['sub'], j=0,...,i-1 .<a href="#section-3.2-8.1" class="pilcrow">Â¶</a>
</li>
          <li class="normal" id="section-3.2-8.2">
              There MUST always be a
              Federation Entity Key carried in the
              <code>jwks</code>
              claim in
              ES[j] that can be used to verify the signature of ES[j-1],
              j=i,...,1 .<a href="#section-3.2-8.2" class="pilcrow">Â¶</a>
</li>
          <li class="normal" id="section-3.2-8.3">
              It MUST be possible to verify the signature of ES[0] with
              one of the keys in ES[0]['jwks'].<a href="#section-3.2-8.3" class="pilcrow">Â¶</a>
</li>
        </ul>
<p id="section-3.2-9">
          The signing key that MUST be used to verify ES[i] is distributed
          from the Trust Anchors to any Entity that needs to verify a
          Trust Chain in some secure out-of-band way not described in this
          document.<a href="#section-3.2-9" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="metadata">
<section id="section-4">
      <h2 id="name-metadata">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-metadata" class="section-name selfRef">Metadata</a>
      </h2>
<p id="section-4-1"></p>
<p id="section-4-2">
 This specification defines metadata types for OpenID Connect and OAuth2 objects.
        The metadata type identifier uniquely identifies the Entity Type
        of the participant and the format of metadata for that Entity Type.
 It reuses existing OpenID Connect and OAuth metadata standards
 that are applicable to each metadata type.
        Each metadata document is a JSON object.<a href="#section-4-2" class="pilcrow">Â¶</a></p>
<p id="section-4-3">
        This specification also allows new metadata types to be defined to
 support use cases outside OpenID Connect and OAuth2 federations.<a href="#section-4-3" class="pilcrow">Â¶</a></p>
<div id="common_metadata">
<section id="section-4.1">
        <h3 id="name-openid-connect-and-oauth2-m">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-openid-connect-and-oauth2-m" class="section-name selfRef">OpenID Connect and OAuth2 Metadata Extensions</a>
        </h3>
<p id="section-4.1-1">
   For the OpenID Connect and OAuth2 metadata types below,
   the following additional metadata properties are defined,
   which MAY be used with all those metadata types:<a href="#section-4.1-1" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-4.1-2">
          <dt id="section-4.1-2.1">organization_name</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-2.2">
              OPTIONAL. A human-readable
              name representing the organization owning the Entity.
              If the owner is a physical person,
              this MAY be, for example, the person's name. Note
              that this information will be publicly available.<a href="#section-4.1-2.2" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.1-2.3">signed_jwks_uri</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-2.4">
            <p id="section-4.1-2.4.1">
              OPTIONAL. A URI pointing to a signed JWT having the Entity's
              JWK Set as its payload. The JWT MUST be signed using a Federation
              Entity Key.
              A signed JWT can contain the following claims, all except
              <code>keys</code> defined in
              <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span>:<a href="#section-4.1-2.4.1" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-4.1-2.4.2">
              <dt id="section-4.1-2.4.2.1">keys</dt>
              <dd style="margin-left: 1.5em" id="section-4.1-2.4.2.2">
                  REQUIRED. List of JWKs.<a href="#section-4.1-2.4.2.2" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-4.1-2.4.2.3">iss</dt>
              <dd style="margin-left: 1.5em" id="section-4.1-2.4.2.4">
                  REQUIRED. The "iss" (issuer) claim identifies the principal
                  that issued the JWT.<a href="#section-4.1-2.4.2.4" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-4.1-2.4.2.5">sub</dt>
              <dd style="margin-left: 1.5em" id="section-4.1-2.4.2.6">
                  REQUIRED. This claim identifies the owner of the keys.
                  It SHOULD be the same as the issuer.<a href="#section-4.1-2.4.2.6" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-4.1-2.4.2.7">iat</dt>
              <dd style="margin-left: 1.5em" id="section-4.1-2.4.2.8">
                  OPTIONAL. This claim identifies the time at which the JWT was
                  issued.<a href="#section-4.1-2.4.2.8" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-4.1-2.4.2.9">exp</dt>
              <dd style="margin-left: 1.5em" id="section-4.1-2.4.2.10">
                  OPTIONAL. This claim identifies the time at which the JWT is
                  no longer valid.<a href="#section-4.1-2.4.2.10" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-4.1-2.4.3">
              More claims are defined in <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span>; of
              these, <code>aud</code> SHOULD NOT be used since
              the issuer cannot know who the audience is.
              <code>nbf</code> and <code>jti</code>
              are deemed to not be very useful in this context and are
              to be omitted.<a href="#section-4.1-2.4.3" class="pilcrow">Â¶</a></p>
<p id="section-4.1-2.4.4" class="keepWithNext">
                  The following is a non-normative example of a signed JWKS
                  before serialization and adding a signature.<a href="#section-4.1-2.4.4" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.1-2.4.5">
<pre>

    {
      "keys": [
        {
          "kty": "RSA",
          "kid": "SUdtUndEWVY2cUFDeDV5NVlBWDhvOXJodVl2am1mNGNtR0pmd",
          "n": "y_Zc8rByfeRIC9fFZrDZ2MGH2ZnxLrc0ZNNwkNet5rwCPYeRF3Sv
                5nihZA9NHkDTEX97dN8hG6ACfeSo6JB2P7heJtmzM8oOBZbmQ90n
                EA_JCHszkejHaOtDDfxPH6bQLrMlItF4JSUKua301uLB7C8nzTxm
                tF3eAhGCKn8LotEseccxsmzApKRNWhfKDLpKPe9i9PZQhhJaurwD
                kMwbWTAeZbqCScU1o09piuK1JDf2PaDFevioHncZcQO74Obe4nN3
                oNPNAxrMClkZ9s9GMEd5vMqOD4huXlRpHwm9V3oJ3LRutOTxqQLV
                yPucu7eHA7her4FOFAiUk-5SieXL9Q",
          "e": "AQAB"
        },
        {
          "kty": "EC",
          "kid": "MFYycG1raTI4SkZvVDBIMF9CNGw3VEZYUmxQLVN2T21nSWlkd3",
          "crv": "P-256",
          "x": "qAOdPQROkHfZY1daGofOmSNQWpYK8c9G2m2Rbkpbd4c",
          "y": "G_7fF-T8n2vONKM15Mzj4KR_shvHBxKGjMosF6FdoPY"
        }
      ],
      "iss": "https://example.org/op",
      "iat": 1618410883
    }

</pre><a href="#section-4.1-2.4.5" class="pilcrow">Â¶</a>
</div>
<p id="section-4.1-2.4.6" class="keepWithNext">
                  The following is a non-normative example of an RP's Entity Configuration:<a href="#section-4.1-2.4.6" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.1-2.4.7">
<pre>

    {
      "iss": "https://openid.sunet.se",
      "sub": "https://openid.sunet.se",
      "iat": 1516239022,
      "exp": 1516298022,
      "metadata": {
        "openid_relying_party": {
          "application_type": "web",
          "redirect_uris": [
            "https://openid.sunet.se/rp/callback"
          ],
          "organization_name": "SUNET",
          "logo_uri": "https://www.sunet.se/sunet/images/32x32.png",
          "grant_types": [
            "authorization_code",
            "implicit"
          ],
          "signed_jwks_uri":"https://openid.sunet.se/rp/signed_jwks.jose",
          "jwks_uri": "https://openid.sunet.se/rp/jwks.json"
        }
      },
      "jwks": {
        "keys": [
          {
            "alg": "RS256",
            "e": "AQAB",
            "key_ops": [
              "verify"
            ],
            "kid": "key1",
            "kty": "RSA",
            "n": "pnXBOusEANuug6ewezb9J_...",
            "use": "sig"
          }
        ]
      },
      "authority_hints": [
        "https://edugain.org/federation"
      ]
    }

</pre><a href="#section-4.1-2.4.7" class="pilcrow">Â¶</a>
</div>
</dd>
          <dd class="break"></dd>
<dt id="section-4.1-2.5">jwks</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-2.6">
              OPTIONAL. JSON Web Key Set document, passed by value, as
              defined in <span>[<a href="#RFC7517" class="cite xref">RFC7517</a>]</span>.
              This parameter is intended
              to be used by participants that, for some reason,
              cannot use the <code>signed_jwks_uri</code>
              parameter.
              One significant downside of <code>jwks</code>
              is that it does not enable key rotation
              (which <code>signed_jwks_uri</code> and
              <code>jwks_uri</code> do).<a href="#section-4.1-2.6" class="pilcrow">Â¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<div id="jwks_usage">
<section id="section-4.1.1">
          <h4 id="name-usage-of-jwks-jwks_uri-and-">
<a href="#section-4.1.1" class="section-number selfRef">4.1.1. </a><a href="#name-usage-of-jwks-jwks_uri-and-" class="section-name selfRef">Usage of jwks, jwks_uri, and signed_jwks_uri</a>
          </h4>
<p id="section-4.1.1-1">
     It is RECOMMENDED that an Entity Configuration
     use only one of
     <code>jwks</code>,
     <code>jwks_uri</code>, and
     <code>signed_jwks_uri</code> in its OpenID Connect or OAuth2 metadata.
     However, there may be circumstances in which is it desirable to use multiple
     JWK Set representations, such as when an Entity is in multiple federations and the
     federations have different policies about the JWK Set representation to be used.
     When multiple JWK Set representations are used, the keys present in each
     representation SHOULD be the same.  Even if they are not completely the
     same at a given instant in time (which may be the case during key rollover operations),
     implementations MUST make them consistent in a timely manner.<a href="#section-4.1.1-1" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="RP_metadata">
<section id="section-4.2">
        <h3 id="name-rp-metadata">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-rp-metadata" class="section-name selfRef">RP Metadata</a>
        </h3>
<p id="section-4.2-1">
          The metadata type identifier is
          <code>openid_relying_party</code>.<a href="#section-4.2-1" class="pilcrow">Â¶</a></p>
<p id="section-4.2-2">
          All parameters defined in Section 2 of
          <span><a href="#OpenID.Registration" class="internal xref">OpenID Connect Dynamic Client Registration 1.0</a> [<a href="#OpenID.Registration" class="cite xref">OpenID.Registration</a>]</span>
          and <a href="#common_metadata" class="auto internal xref">Section 4.1</a> are applicable,
   as well as additional parameters registered in the
   IANA "OAuth Dynamic Client Registration Metadata" registry
   <span>[<a href="#IANA.OAuth.Parameters" class="cite xref">IANA.OAuth.Parameters</a>]</span>.<a href="#section-4.2-2" class="pilcrow">Â¶</a></p>
<p id="section-4.2-3">
          In addition, the following RP metadata parameter is defined:<a href="#section-4.2-3" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-4.2-4">
          <dt id="section-4.2-4.1">client_registration_types</dt>
          <dd style="margin-left: 1.5em" id="section-4.2-4.2">
              REQUIRED. An array of strings specifying the client registration
              types the RP wants to use. Values defined by this specification
              are
              <code>automatic</code>
              and <code>explicit</code>.<a href="#section-4.2-4.2" class="pilcrow">Â¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="OP_metadata">
<section id="section-4.3">
        <h3 id="name-op-metadata">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-op-metadata" class="section-name selfRef">OP Metadata</a>
        </h3>
<p id="section-4.3-1">
          The metadata type identifier is
          <code>openid_provider</code>.<a href="#section-4.3-1" class="pilcrow">Â¶</a></p>
<p id="section-4.3-2">
          All parameters defined in Section 3 of
          <span><a href="#OpenID.Discovery" class="internal xref">OpenID Connect Discovery 1.0</a> [<a href="#OpenID.Discovery" class="cite xref">OpenID.Discovery</a>]</span>
          and <a href="#common_metadata" class="auto internal xref">Section 4.1</a> are applicable,
   as well as additional parameters registered in the
   IANA "OAuth Authorization Server Metadata" registry
   <span>[<a href="#IANA.OAuth.Parameters" class="cite xref">IANA.OAuth.Parameters</a>]</span>.<a href="#section-4.3-2" class="pilcrow">Â¶</a></p>
<p id="section-4.3-3">
          In addition, the following OP metadata parameters are defined:<a href="#section-4.3-3" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-4.3-4">
          <dt id="section-4.3-4.1">client_registration_types_supported</dt>
          <dd style="margin-left: 1.5em" id="section-4.3-4.2">
              REQUIRED. Array specifying the federation types supported.
              Federation-type values defined by this specification are
              <code>automatic</code>
              and <code>explicit</code>.<a href="#section-4.3-4.2" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.3-4.3">federation_registration_endpoint</dt>
          <dd style="margin-left: 1.5em" id="section-4.3-4.4">
              OPTIONAL.
              URL of the OP's federation-specific Dynamic Client Registration
              Endpoint. If the OP supports explicit client
              registration as described in <a href="#explicit" class="auto internal xref">Section 10.2</a>,
              then this claim is REQUIRED.<a href="#section-4.3-4.4" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.3-4.5">request_authentication_methods_supported</dt>
          <dd style="margin-left: 1.5em" id="section-4.3-4.6">
            <p id="section-4.3-4.6.1">
              OPTIONAL.
              A JSON Object defining the client authentications supported for each endpoint.
              The endpoint names are defined in the IANA
              "OAuth Authorization Server Metadata" registry
              <span>[<a href="#IANA.OAuth.Parameters" class="cite xref">IANA.OAuth.Parameters</a>]</span>.
              Other endpoints and authentication methods are possible if made
              recognizable according
              to established standards and not in conflict with the operating
              principles of this specification.
              In OpenID Connect Core, no client authentication is performed at the authentication
              endpoint. Instead, the request itself is authenticated.
              The OP maps
              information in the request (like the redirect_uri) to information it has gained
              on the client through static or dynamic registration.
              If the mapping is successful, the request can be processed.
              If the RP uses Automatic Registration, as defined in <a href="#automatic" class="auto internal xref">Section 10.1</a>,
              the OP has no prior knowledge
              of the RP. Therefore, the OP must start by gathering
              information about the RP using the process outlined in
              <a href="#federation_configuration" class="auto internal xref">Section 6</a>. Once it has the RP's
              metadata, the OP can verify the request in the same way
              as if it had known the RP's metadata beforehand.
              To make the request verification more secure, we demand the use of
              a client authentication or verification method that proves that
              the RP is in possession of a key that appears in the RP's metadata.<a href="#section-4.3-4.6.1" class="pilcrow">Â¶</a></p>
<p id="section-4.3-4.6.2">
              Client authentication methods that MAY be used include:<a href="#section-4.3-4.6.2" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-4.3-4.6.3">
              <dt id="section-4.3-4.6.3.1">private_key_jwt</dt>
              <dd style="margin-left: 1.5em" id="section-4.3-4.6.3.2">
                <code>private_key_jwt</code>.
                  This authentication process is described in Section 9 of
                  <span><a href="#OpenID.Core" class="internal xref">OpenID Connect Core 1.0</a> [<a href="#OpenID.Core" class="cite xref">OpenID.Core</a>]</span>.
                  Note that if <code>private_key_jwt</code> is
                  used, the audience of the signed JWT MUST be either the URL of
                  the Authorization Server's Authorization Endpoint or the
                  Authorization Server's Entity Identifier.<a href="#section-4.3-4.6.3.2" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-4.3-4.6.3.3">tls_client_auth</dt>
              <dd style="margin-left: 1.5em" id="section-4.3-4.6.3.4">
                  Section 2.1 of
                  <span>[<a href="#RFC8705" class="cite xref">RFC8705</a>]</span>.<a href="#section-4.3-4.6.3.4" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-4.3-4.6.3.5">self_signed_tls_client_auth</dt>
              <dd style="margin-left: 1.5em" id="section-4.3-4.6.3.6">
                  Section 2.2 of
                  <span>[<a href="#RFC8705" class="cite xref">RFC8705</a>]</span>.<a href="#section-4.3-4.6.3.6" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-4.3-4.6.4">
              A client verification method, on the other hand,
              is something like:<a href="#section-4.3-4.6.4" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-4.3-4.6.5">
              <dt id="section-4.3-4.6.5.1">request_object</dt>
              <dd style="margin-left: 1.5em" id="section-4.3-4.6.5.2">
                  A Request Object, as described in
                  <span><a href="#OpenID.Core" class="internal xref">OpenID Connect Core 1.0</a> [<a href="#OpenID.Core" class="cite xref">OpenID.Core</a>]</span>.
                  There is more about this in
                  <a href="#automatic" class="auto internal xref">Section 10.1</a>.
                  Here the verification is based on the fact that the request
                  object is signed with a key the RP controls.<a href="#section-4.3-4.6.5.2" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-4.3-4.6.6">
              The claim value of this parameter is a JSON object with members representing
              authentication request methods and as values lists of client
              authentication/verification methods that can be used together with the
              authentication request method.<a href="#section-4.3-4.6.6" class="pilcrow">Â¶</a></p>
<p id="section-4.3-4.6.7">
              Examples of authentication request methods are<a href="#section-4.3-4.6.7" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.3-4.6.8.1">
                  Authentication Request (AR), as described in Section 3 of
                  <span><a href="#OpenID.Core" class="internal xref">OpenID Connect Core 1.0</a> [<a href="#OpenID.Core" class="cite xref">OpenID.Core</a>]</span>, and<a href="#section-4.3-4.6.8.1" class="pilcrow">Â¶</a>
</li>
              <li class="normal" id="section-4.3-4.6.8.2">
                  Pushed Authorization Request (PAR), as described in <span>[<a href="#RFC9126" class="cite xref">RFC9126</a>]</span>.<a href="#section-4.3-4.6.8.2" class="pilcrow">Â¶</a>
</li>
            </ul>
<p id="section-4.3-4.6.9">
              If AR is used, then a client verification method like
              <code>request_object</code> can be used.
              If PAR is used, then client authentication methods like
              <code>private_key_jwt</code>,
              <code>tls_client_auth</code> and
              <code>self_signed_tls_client_auth</code>
              can be used.<a href="#section-4.3-4.6.9" class="pilcrow">Â¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-4.3-4.7">request_authentication_signing_alg_values_supported</dt>
          <dd style="margin-left: 1.5em" id="section-4.3-4.8">
              OPTIONAL.
              JSON array containing a list of the JWS signing algorithms
              (<code>alg</code> values)
              supported for the signature on the JWT <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span>
              used in the <code>request_object</code>
              contained in the request parameter of an authorization request or
              in the <code>private_key_jwt</code> of a pushed authorization request.
              This entry MUST be present if either of these authentication methods are specified
              in the <code>request_authentication_methods_supported</code> entry.
              No default algorithms are implied if this entry is omitted.
              Servers SHOULD support <code>RS256</code>.
              The value <code>none</code> MUST NOT be used.<a href="#section-4.3-4.8" class="pilcrow">Â¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-4.3-5">
          The following is a non-normative example of an OP's Entity Configuration:<a href="#section-4.3-5" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.3-6">
<pre>
{
   "iss":"https://op.umu.se",
   "sub":"https://op.umu.se",
   "exp":1568397247,
   "iat":1568310847,
   "metadata":{
      "openid_provider":{
         "issuer":"https://op.umu.se/openid",
         "signed_jwks_uri":"https://op.umu.se/openid/signed_jwks.jose",
         "authorization_endpoint":"https://op.umu.se/openid/authorization",
         "client_registration_types_supported":[
            "automatic",
            "explicit"
         ],
         "grant_types_supported":[
            "authorization_code",
            "implicit",
            "urn:ietf:params:oauth:grant-type:jwt-bearer"
         ],
         "id_token_signing_alg_values_supported":[
            "ES256",
            "RS256"
         ],
         "logo_uri":"https://www.umu.se/img/umu-logo-left-neg-SE.svg",
         "op_policy_uri":"https://www.umu.se/en/legal-information/",
         "response_types_supported":[
            "code",
            "code id_token",
            "token"
         ],
         "subject_types_supported":[
            "pairwise",
            "public"
         ],
         "token_endpoint":"https://op.umu.se/openid/token",
         "federation_registration_endpoint":"https://op.umu.se/openid/fedreg",
         "token_endpoint_auth_methods_supported":[
            "client_secret_post",
            "client_secret_basic",
            "client_secret_jwt",
            "private_key_jwt"
         ],
         "pushed_authorization_request_endpoint":"https://op.umu.se/openid/par",
         "request_authentication_methods_supported": {
            "authorization_endpoint": [
                "request_object"
            ],
            "pushed_authorization_request_endpoint": [
                "request_object",
                "private_key_jwt",
                "tls_client_auth",
                "self_signed_tls_client_auth"
            ]
        }
      }
   },
   "authority_hints":[
      "https://umu.se"
   ],
   "jwks":{
      "keys":[
         {
            "e":"AQAB",
            "kid":"dEEtRjlzY3djcENuT01wOGxrZlkxb3RIQVJlMTY0...",
            "kty":"RSA",
            "n":"x97YKqc9Cs-DNtFrQ7_vhXoH9bwkDWW6En2jJ044yH..."
         }
      ]
   },
}
</pre><a href="#section-4.3-6" class="pilcrow">Â¶</a>
</div>
</section>
</div>
<section id="section-4.4">
        <h3 id="name-oauth-authorization-server">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-oauth-authorization-server" class="section-name selfRef">OAuth Authorization Server</a>
        </h3>
<p id="section-4.4-1">
          The metadata type identifier is
          <code>oauth_authorization_server</code>.<a href="#section-4.4-1" class="pilcrow">Â¶</a></p>
<p id="section-4.4-2">
          All parameters defined in Section 2 of
          <span><a href="#RFC8414" class="internal xref">RFC 8414</a> [<a href="#RFC8414" class="cite xref">RFC8414</a>]</span>
          and <a href="#common_metadata" class="auto internal xref">Section 4.1</a> are applicable,
   as well as additional parameters registered in the
   IANA "OAuth Dynamic Client Registration Metadata" registry
   <span>[<a href="#IANA.OAuth.Parameters" class="cite xref">IANA.OAuth.Parameters</a>]</span>.<a href="#section-4.4-2" class="pilcrow">Â¶</a></p>
</section>
<section id="section-4.5">
        <h3 id="name-oauth-client">
<a href="#section-4.5" class="section-number selfRef">4.5. </a><a href="#name-oauth-client" class="section-name selfRef">OAuth Client</a>
        </h3>
<p id="section-4.5-1">
          The metadata type identifier is
          <code>oauth_client</code>.<a href="#section-4.5-1" class="pilcrow">Â¶</a></p>
<p id="section-4.5-2">
          All parameters defined in Section 2 of
          <span><a href="#RFC7591" class="internal xref">OAuth 2.0 Dynamic Client Registration Protocol</a> [<a href="#RFC7591" class="cite xref">RFC7591</a>]</span>
          and <a href="#common_metadata" class="auto internal xref">Section 4.1</a> are applicable,
   as well as additional parameters registered in the
   IANA "OAuth Dynamic Client Registration Metadata" registry
   <span>[<a href="#IANA.OAuth.Parameters" class="cite xref">IANA.OAuth.Parameters</a>]</span>.<a href="#section-4.5-2" class="pilcrow">Â¶</a></p>
</section>
<section id="section-4.6">
        <h3 id="name-oauth-protected-resource">
<a href="#section-4.6" class="section-number selfRef">4.6. </a><a href="#name-oauth-protected-resource" class="section-name selfRef">OAuth Protected Resource</a>
        </h3>
<p id="section-4.6-1">
          The metadata type identifier is
          <code>oauth_resource</code>.
   The parameters defined in <a href="#common_metadata" class="auto internal xref">Section 4.1</a> are applicable.
   In addition, while it is not presently a standard,
   some deployments are using the protected resource metadata parameters
   defined in <span>[<a href="#I-D.jones-oauth-resource-metadata" class="cite xref">I-D.jones-oauth-resource-metadata</a>]</span>.<a href="#section-4.6-1" class="pilcrow">Â¶</a></p>
</section>
<section id="section-4.7">
        <h3 id="name-federation-entity">
<a href="#section-4.7" class="section-number selfRef">4.7. </a><a href="#name-federation-entity" class="section-name selfRef">Federation Entity</a>
        </h3>
<p id="section-4.7-1">
          The metadata type identifier is
          <code>federation_entity</code>.<a href="#section-4.7-1" class="pilcrow">Â¶</a></p>
<p id="section-4.7-2">
          All Entities in a federation MAY expose this metadata type.
          The Entities that expose federation API endpoints
          MUST expose this metadata type.<a href="#section-4.7-2" class="pilcrow">Â¶</a></p>
<p id="section-4.7-3">
          The following properties are allowed:<a href="#section-4.7-3" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-4.7-4">
          <dt id="section-4.7-4.1">federation_fetch_endpoint</dt>
          <dd style="margin-left: 1.5em" id="section-4.7-4.2">
              OPTIONAL.
              The fetch endpoint described in
              <a href="#fetch_endpoint" class="auto internal xref">Section 7.1</a>. Intermediate Entities and
              Trust Anchors MUST publish a
              <code>federation_fetch_endpoint</code>.
              Leaf Entities MUST NOT.<a href="#section-4.7-4.2" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.7-4.3">federation_list_endpoint</dt>
          <dd style="margin-left: 1.5em" id="section-4.7-4.4">
              OPTIONAL.
              The list endpoint described in
              <a href="#entity_listing" class="auto internal xref">Section 7.3</a>. Intermediate Entities and
              Trust Anchors MUST publish a
              <code>federation_list_endpoint</code>.
              Leaf Entities MUST NOT.<a href="#section-4.7-4.4" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.7-4.5">federation_resolve_endpoint</dt>
          <dd style="margin-left: 1.5em" id="section-4.7-4.6">
              OPTIONAL.
              The resolve endpoint described in
              <a href="#resolve" class="auto internal xref">Section 7.2</a>. Any federation Entity MAY publish a
              <code>federation_resolve_endpoint</code>.<a href="#section-4.7-4.6" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.7-4.7">federation_trust_mark_status_endpoint</dt>
          <dd style="margin-left: 1.5em" id="section-4.7-4.8">
              OPTIONAL.
              The Trust Mark status endpoint described in
              <a href="#status_endpoint" class="auto internal xref">Section 7.4</a>. Trust mark issuers SHOULD
              publish a
              <code>federation_trust_mark_status_endpoint</code>.<a href="#section-4.7-4.8" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.7-4.9">organization_name</dt>
          <dd style="margin-left: 1.5em" id="section-4.7-4.10">
              OPTIONAL. A human-readable
              name representing the organization owning the Entity.
              If the owner is a physical person
              this MAY be, for example, the person's name. Note
              that this information will be publicly available.
              It is RECOMMENDED that each federation Entity
              expose this claim.<a href="#section-4.7-4.10" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.7-4.11">contacts</dt>
          <dd style="margin-left: 1.5em" id="section-4.7-4.12">
              OPTIONAL. JSON array with one or more
              strings representing contact persons at the Entity.
              These MAY contain names, e-mail addresses, descriptions, phone
              numbers, etc.<a href="#section-4.7-4.12" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.7-4.13">logo_uri</dt>
          <dd style="margin-left: 1.5em" id="section-4.7-4.14">
              OPTIONAL. String. A URL that points to the logo of this Entity.
              The file containing the logo SHOULD be published
              in a format that can be viewed via the web.<a href="#section-4.7-4.14" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.7-4.15">policy_uri</dt>
          <dd style="margin-left: 1.5em" id="section-4.7-4.16">
              OPTIONAL. URL to the documentation of
              conditions and policies relevant to this Entity.<a href="#section-4.7-4.16" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-4.7-4.17">homepage_uri</dt>
          <dd style="margin-left: 1.5em" id="section-4.7-4.18">
              OPTIONAL. URL to a generic home page
              representing this Entity.<a href="#section-4.7-4.18" class="pilcrow">Â¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-4.7-5">Example<a href="#section-4.7-5" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.7-6">
<pre>
"federation_entity": {
  "federation_fetch_endpoint":
    "https://example.com/federation_fetch",
  "federation_list_endpoint":
    "https://example.com/federation_list",
  "federation_trust_mark_status_endpoint": "https://example.com/status",
  "organization_name": "The example cooperation",
  "homepage_uri": "https://www.example.com"
}
</pre><a href="#section-4.7-6" class="pilcrow">Â¶</a>
</div>
</section>
</section>
</div>
<div id="federation_policy">
<section id="section-5">
      <h2 id="name-federation-policy">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-federation-policy" class="section-name selfRef">Federation Policy</a>
      </h2>
<div id="metadata_policy">
<section id="section-5.1">
        <h3 id="name-metadata-policy">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-metadata-policy" class="section-name selfRef">Metadata Policy</a>
        </h3>
<p id="section-5.1-1">
          An Entity MAY publish metadata policies pertaining to Subordinate
          Entities of a specific type. Entity Type identifiers specified in
          this document can be found in <a href="#metadata" class="auto internal xref">Section 4</a>.<a href="#section-5.1-1" class="pilcrow">Â¶</a></p>
<section id="section-5.1.1">
          <h4 id="name-metadata_policy">
<a href="#section-5.1.1" class="section-number selfRef">5.1.1. </a><a href="#name-metadata_policy" class="section-name selfRef">metadata_policy</a>
          </h4>
<p id="section-5.1.1-1">
            A <code>metadata_policy</code> for a specific Entity
            type has the following structure:<a href="#section-5.1.1-1" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1.1-2.1">It consists of one or more policy entries.<a href="#section-5.1.1-2.1" class="pilcrow">Â¶</a>
</li>
            <li class="normal" id="section-5.1.1-2.2">Each policy entry applies to one metadata parameter, such as
                <code>id_token_signed_response_alg</code>.<a href="#section-5.1.1-2.2" class="pilcrow">Â¶</a>
</li>
            <li class="normal" id="section-5.1.1-2.3">Each policy entry consists of one or more operators, which can be
                value modifiers or value checks.<a href="#section-5.1.1-2.3" class="pilcrow">Â¶</a>
</li>
            <li class="normal" id="section-5.1.1-2.4">An operator can only appear once in a policy entry.<a href="#section-5.1.1-2.4" class="pilcrow">Â¶</a>
</li>
          </ul>
<p id="section-5.1.1-3">
            It SHOULD be noted that claim names without language tags are different
            from the same claim but with language tags.<a href="#section-5.1.1-3" class="pilcrow">Â¶</a></p>
<p id="section-5.1.1-4" class="keepWithNext">
                An example of a policy entry:<a href="#section-5.1.1-4" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.1.1-5">
<pre>
"id_token_signed_response_alg": {
  "default": "ES256",
  "one_of" : ["ES256", "ES384", "ES512"]
}
</pre><a href="#section-5.1.1-5" class="pilcrow">Â¶</a>
</div>
<p id="section-5.1.1-6" class="keepWithNext">
                Which fits into a metadata policy like this:<a href="#section-5.1.1-6" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.1.1-7">
<pre>
"metadata_policy" : {
  "openid_relying_party": {
    "id_token_signed_response_alg": {
      "default": "ES256",
      "one_of" : ["ES256", "ES384", "ES512"]
    }
  }
}
</pre><a href="#section-5.1.1-7" class="pilcrow">Â¶</a>
</div>
</section>
<section id="section-5.1.2">
          <h4 id="name-operators">
<a href="#section-5.1.2" class="section-number selfRef">5.1.2. </a><a href="#name-operators" class="section-name selfRef">Operators</a>
          </h4>
<p id="section-5.1.2-1">
            Value modifiers are:<a href="#section-5.1.2-1" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-5.1.2-2">
            <dt id="section-5.1.2-2.1">value</dt>
            <dd style="margin-left: 1.5em" id="section-5.1.2-2.2">
                Disregarding what value the parameter has, if any, the
                metadata parameter MUST be set to the specified value.<a href="#section-5.1.2-2.2" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-5.1.2-2.3">add</dt>
            <dd style="margin-left: 1.5em" id="section-5.1.2-2.4">
                The specified value or values MUST be added to the metadata
                parameter. If any of the specified values are already present
                as values of the parameter, they MUST NOT be added. If the
                parameter has no value, then the parameter MUST be initialized
                with the specified value(s).<a href="#section-5.1.2-2.4" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-5.1.2-2.5">default</dt>
            <dd style="margin-left: 1.5em" id="section-5.1.2-2.6">
                If the metadata parameter has no value, then it MUST be set to
                the specified default value(s).<a href="#section-5.1.2-2.6" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-5.1.2-3">
            Value checks are:<a href="#section-5.1.2-3" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-5.1.2-4">
            <dt id="section-5.1.2-4.1">essential</dt>
            <dd style="margin-left: 1.5em" id="section-5.1.2-4.2">
                If <code>true</code>, then the parameter MUST have a value.
                If <code>false</code>, the parameter is
                voluntary and is not required to have a value.
                If essential is missing as an operator, it is treated as if set to
                <code>false</code>.<a href="#section-5.1.2-4.2" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-5.1.2-4.3">one_of</dt>
            <dd style="margin-left: 1.5em" id="section-5.1.2-4.4">
                The value of the metadata parameter MUST be one of those listed
                in the directive. The presence of the metadata parameter becomes
                optional when the directive occurs in conjunction with an
                <code>essential</code> set to
                <code>false</code>.<a href="#section-5.1.2-4.4" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-5.1.2-4.5">subset_of</dt>
            <dd style="margin-left: 1.5em" id="section-5.1.2-4.6">
                The resulting value of the metadata parameter MUST be the
                intersection of the values in the directive and the values of
                the parameter. The presence of the metadata parameter becomes
                optional when the directive occurs in conjunction with an
                <code>essential</code> set to
                <code>false</code>.<a href="#section-5.1.2-4.6" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-5.1.2-4.7">superset_of</dt>
            <dd style="margin-left: 1.5em" id="section-5.1.2-4.8">
                The values of the metadata parameter MUST contain those
                specified in the directive. We mathematically define superset;
                equality is included. The presence of the metadata parameter
                becomes optional when the directive occurs in conjunction with
                an <code>essential</code> set to
                <code>false</code>.<a href="#section-5.1.2-4.8" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-5.1.2-5">
            Note that when a parameter is defined as a space-separated
            list of strings like for <code>grant_types</code> in
            <span>[<a href="#RFC7591" class="cite xref">RFC7591</a>]</span> <code>subset_of</code>,
            <code>superset_of</code> and
            <code>default</code> are still expressed as lists of strings.
            This language from <span>[<a href="#RFC6749" class="cite xref">RFC6749</a>]</span> also applies to such space-separated lists of strings:
            "If the value contains multiple space-delimited strings, their order does not matter,
            and each string adds an additional access range to the requested scope."<a href="#section-5.1.2-5" class="pilcrow">Â¶</a></p>
</section>
<div id="policy_restr">
<section id="section-5.1.3">
          <h4 id="name-restrictions-on-policy-entr">
<a href="#section-5.1.3" class="section-number selfRef">5.1.3. </a><a href="#name-restrictions-on-policy-entr" class="section-name selfRef">Restrictions on Policy Entries</a>
          </h4>
<p id="section-5.1.3-1">
            As stated, a policy entry can contain one or more operators.
            Not all operators are allowed to appear together in a policy entry.<a href="#section-5.1.3-1" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-5.1.3-2">
            <dt id="section-5.1.3-2.1">subset_of/superset_of and one_of</dt>
            <dd style="margin-left: 1.5em" id="section-5.1.3-2.2">
              <code>subset_of</code>
                and
                <code>superset_of</code>
                apply to parameters
                that can have more than
                one value (for instance, <code>contacts</code>),
                while <code>one_of</code> applies to
                parameters that can only have one value (for instance,
                <code>id_token_signed_response_alg</code>).
                Therefore, <code>one_of</code> cannot
                appear beside
                <code>subset_of</code>/
                <code>superset_of</code>
                in a policy entry.<a href="#section-5.1.3-2.2" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-5.1.3-2.3">value</dt>
            <dd style="margin-left: 1.5em" id="section-5.1.3-2.4">
              <code>value</code>
                overrides everything else.
                So having <code>value</code> together with any
                other operator (except for
                <code>essential</code>) does not make sense.<a href="#section-5.1.3-2.4" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-5.1.3-3">
            Other restrictions are:<a href="#section-5.1.3-3" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1.3-4.1">
                If <code>subset_of</code> and
                <code>superset_of</code>
                both appear as operators, then the
                list of values in
                <code>subset_of</code>
                MUST be a superset of the values in
                <code>superset_of</code>.<a href="#section-5.1.3-4.1" class="pilcrow">Â¶</a>
</li>
            <li class="normal" id="section-5.1.3-4.2">
                If <code>add</code> appears in a policy entry
                together with
                <code>subset_of</code>
                then the value/values of <code>add</code> MUST
                be a subset of <code>subset_of</code>.<a href="#section-5.1.3-4.2" class="pilcrow">Â¶</a>
</li>
            <li class="normal" id="section-5.1.3-4.3">
                If <code>add</code> appears in a policy entry
                together with
                <code>superset_of</code>
                then
                the values of <code>add</code> MUST be a
                superset of <code>superset_of</code>.<a href="#section-5.1.3-4.3" class="pilcrow">Â¶</a>
</li>
            <li class="normal" id="section-5.1.3-4.4">
                If <code>default</code> appears in a policy
                entry together with
                <code>subset_of</code>
                then
                the values of <code>default</code> MUST be a
                subset of <code>subset_of</code>.<a href="#section-5.1.3-4.4" class="pilcrow">Â¶</a>
</li>
            <li class="normal" id="section-5.1.3-4.5">
                If <code>default</code> appears in a policy entry
                together with
                <code>superset_of</code>
                then the values of <code>default</code> MUST be a
                superset of
                <code>superset_of</code>.<a href="#section-5.1.3-4.5" class="pilcrow">Â¶</a>
</li>
            <li class="normal" id="section-5.1.3-4.6">
                If <code>add</code> appears in a policy entry
                together with <code>one_of</code> then
                the
                value of <code>add</code> MUST be a member
                of <code>one_of</code>.<a href="#section-5.1.3-4.6" class="pilcrow">Â¶</a>
</li>
            <li class="normal" id="section-5.1.3-4.7">
                If <code>default</code> appears in a policy entry
                together with
                <code>one_of</code>
                then the
                value <code>default</code> MUST be a member
                of <code>one_of</code>.<a href="#section-5.1.3-4.7" class="pilcrow">Â¶</a>
</li>
          </ul>
</section>
</div>
<section id="section-5.1.4">
          <h4 id="name-combining-policies">
<a href="#section-5.1.4" class="section-number selfRef">5.1.4. </a><a href="#name-combining-policies" class="section-name selfRef">Combining Policies</a>
          </h4>
<p id="section-5.1.4-1">
            If there is more than one metadata policy in a Trust Chain, then the
            policies MUST be combined before they are applied to the metadata statement.<a href="#section-5.1.4-1" class="pilcrow">Â¶</a></p>
<p id="section-5.1.4-2">
            Using the notation we have defined in <a href="#trust_chain" class="auto internal xref">Section 3.2</a>, policies are
            combined starting with ES[i] and then adding the policies from ES[j]
            j=i-1,..,1 before applying the combined policy to the Entity's metadata.<a href="#section-5.1.4-2" class="pilcrow">Â¶</a></p>
<p id="section-5.1.4-3">
            After each combination, the policy for each parameter MUST
            adhere to the rules defined in <a href="#policy_restr" class="auto internal xref">Section 5.1.3</a>.<a href="#section-5.1.4-3" class="pilcrow">Â¶</a></p>
<section id="section-5.1.4.1">
            <h5 id="name-merging-operators">
<a href="#section-5.1.4.1" class="section-number selfRef">5.1.4.1. </a><a href="#name-merging-operators" class="section-name selfRef">Merging Operators</a>
            </h5>
<span class="break"></span><dl class="dlNewline" id="section-5.1.4.1-1">
              <dt id="section-5.1.4.1-1.1">subset_of</dt>
              <dd style="margin-left: 1.5em" id="section-5.1.4.1-1.2">
                  The result of merging the values of two
                  <code>subset_of</code> operators is the
                  intersection of the operator values.<a href="#section-5.1.4.1-1.2" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.1.4.1-1.3">one_of</dt>
              <dd style="margin-left: 1.5em" id="section-5.1.4.1-1.4">
                  The result of merging the values of two
                  <code>one_of</code> operators is the
                  intersection of the operator values.<a href="#section-5.1.4.1-1.4" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.1.4.1-1.5">superset_of</dt>
              <dd style="margin-left: 1.5em" id="section-5.1.4.1-1.6">
                  The result of merging the values of two
                  <code>superset_of</code> operators is the
                  union of the operator values.<a href="#section-5.1.4.1-1.6" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.1.4.1-1.7">add</dt>
              <dd style="margin-left: 1.5em" id="section-5.1.4.1-1.8">
                  The result of merging the values of two
                  <code>add</code>
                  operators is the union of the values.<a href="#section-5.1.4.1-1.8" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.1.4.1-1.9">value</dt>
              <dd style="margin-left: 1.5em" id="section-5.1.4.1-1.10">
                  Merging two <code>value</code> operators is
                  NOT allowed unless the two operator values are equal.<a href="#section-5.1.4.1-1.10" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.1.4.1-1.11">default</dt>
              <dd style="margin-left: 1.5em" id="section-5.1.4.1-1.12">
                  Merging two <code>default</code> operators is
                  NOT allowed unless the two operator values are equal.<a href="#section-5.1.4.1-1.12" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-5.1.4.1-1.13">essential</dt>
              <dd style="margin-left: 1.5em" id="section-5.1.4.1-1.14">
                  If a superior has specified <code>essential=true</code>,
                  then an Intermediate
                  cannot change that. If a superior has specified
                  <code>essential=false</code>, then an
                  Intermediate is allowed to change that to
                  <code>essential=true</code>.
                  If a superior has not specified
                  <code>essential</code>, then an Intermediate
                  can set <code>essential</code> to
                  <code>true</code> or <code>false</code>.<a href="#section-5.1.4.1-1.14" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
</dl>
</section>
</section>
<section id="section-5.1.5">
          <h4 id="name-applying-policies">
<a href="#section-5.1.5" class="section-number selfRef">5.1.5. </a><a href="#name-applying-policies" class="section-name selfRef">Applying Policies</a>
          </h4>
<p id="section-5.1.5-1">
            Once combining the Metadata policies has been accomplished, the next
            step is to apply the combined policy to the metadata.<a href="#section-5.1.5-1" class="pilcrow">Â¶</a></p>
<p id="section-5.1.5-2">
            Doing that, one follows these steps for each parameter in the
            policy.<a href="#section-5.1.5-2" class="pilcrow">Â¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.1.5-3">
<li id="section-5.1.5-3.1">
                If there is a <code>value</code> operator in the
                policy, its value would be applied without any additional action.<a href="#section-5.1.5-3.1" class="pilcrow">Â¶</a>
</li>
            <li id="section-5.1.5-3.2">
                Add whatever value is specified in an <code>add</code>
                operator.<a href="#section-5.1.5-3.2" class="pilcrow">Â¶</a>
</li>
            <li id="section-5.1.5-3.3">
                If the parameter still has no value, apply the
                <code>default</code> if there is one.<a href="#section-5.1.5-3.3" class="pilcrow">Â¶</a>
</li>
            <li id="section-5.1.5-3.4">
                Do the essential check.
                If <code>essential</code> is
                <code>true</code>,
                then the claim
                MUST have a value. Otherwise, applying the operator MUST
                fail.<a href="#section-5.1.5-3.4" class="pilcrow">Â¶</a>
</li>
            <li id="section-5.1.5-3.5">
                Do the other checks. Verify that the value is
                <code>one_of</code> or that the
                values are <code>subset_of</code>/<code>superset_of</code>. If the parameter values
                do not fall within the allowed boundaries,
                applying the operator MUST fail.<a href="#section-5.1.5-3.5" class="pilcrow">Â¶</a>
</li>
            <li id="section-5.1.5-3.6">
                If more than one value is specified in
                <code>one_of</code> and the Leaf Entity
                does not specify the metadata claim for which
                <code>one_of</code> is referred to,
                it is an implementation choice which of the values in
                the <code>one_of</code> array will be used.<a href="#section-5.1.5-3.6" class="pilcrow">Â¶</a>
</li>
          </ol>
</section>
<section id="section-5.1.6">
          <h4 id="name-policy-combination-example">
<a href="#section-5.1.6" class="section-number selfRef">5.1.6. </a><a href="#name-policy-combination-example" class="section-name selfRef">Policy Combination Example</a>
          </h4>
<p id="section-5.1.6-1" class="keepWithNext">
              A federation's policy for OAuth2 clients:<a href="#section-5.1.6-1" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.1.6-2">
<pre>
{
  "grant_types": {

    "subset_of": ["authorization_code", "implicit", "refresh_token"],

    "superset_of": ["authorization_code"],

    "default": ["authorization_code", "refresh_token"]
  },
  "token_endpoint_auth_method": {
    "one_of": [
      "client_secret_post",
      "client_secret_basic"
    ]
  },
  "contacts": {
    "add": "helpdesk@federation.example.org"
  }
}
</pre><a href="#section-5.1.6-2" class="pilcrow">Â¶</a>
</div>
<p id="section-5.1.6-3" class="keepWithNext">
              An organization's policy for OAuth2 clients:<a href="#section-5.1.6-3" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.1.6-4">
<pre>
{
  "grant_types": {
    "subset_of": ["authorization_code", "refresh_token", "implicit"],
    "default": ["authorization_code", "refresh_token"]
  },
  "token_endpoint_auth_method": {
    "one_of": [
      "client_secret_post",
      "client_secret_basic"
    ],
    "default": "client_secret_basic"
  },
  "contacts": {
    "add": "helpdesk@org.example.org"
  }
}
</pre><a href="#section-5.1.6-4" class="pilcrow">Â¶</a>
</div>
<p id="section-5.1.6-5" class="keepWithNext">
              The combined metadata policy then becomes:<a href="#section-5.1.6-5" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.1.6-6">
<pre>
{
  "grant_types": {
    "subset_of": ["authorization_code", "refresh_token"],
    "superset_of": ["authorization_code"],
    "default": ["authorization_code", "refresh_token"]
  },
  "token_endpoint_auth_method": {
    "one_of": [
      "client_secret_post",
      "client_secret_basic"
    ],
    "default": "client_secret_basic"
  },
  "contacts": {
    "add": [
      "helpdesk@federation.example.org",
      "helpdesk@org.example.org"
    ]
  }
}
</pre><a href="#section-5.1.6-6" class="pilcrow">Â¶</a>
</div>
</section>
<section id="section-5.1.7">
          <h4 id="name-enforcing-policy">
<a href="#section-5.1.7" class="section-number selfRef">5.1.7. </a><a href="#name-enforcing-policy" class="section-name selfRef">Enforcing Policy</a>
          </h4>
<p id="section-5.1.7-1">
            If applying policies to a metadata statement results in incorrect
            metadata, then such a metadata statement MUST
            be regarded as broken and MUST NOT be used.<a href="#section-5.1.7-1" class="pilcrow">Â¶</a></p>
</section>
<section id="section-5.1.8">
          <h4 id="name-extending-the-policy-langua">
<a href="#section-5.1.8" class="section-number selfRef">5.1.8. </a><a href="#name-extending-the-policy-langua" class="section-name selfRef">Extending the Policy Language</a>
          </h4>
<p id="section-5.1.8-1">
            There might be parties that want to extend the policy language
            defined here. If that happens, then the rule is that if
            software compliant with this specification
            encounters a keyword it does not understand,
            it MUST ignore it unless it is listed in a
            <code>policy_language_crit</code> list,
            as is done for <span><a href="#RFC7515" class="internal xref">JWS</a> [<a href="#RFC7515" class="cite xref">RFC7515</a>]</span> header parameters
            with the <code>crit</code> parameter.
            If the policy language extension keyword
            is listed in the <code>policy_language_crit</code> list
            and not understood, then the metadata MUST be rejected.<a href="#section-5.1.8-1" class="pilcrow">Â¶</a></p>
</section>
<section id="section-5.1.9">
          <h4 id="name-policy-example">
<a href="#section-5.1.9" class="section-number selfRef">5.1.9. </a><a href="#name-policy-example" class="section-name selfRef">Policy Example</a>
          </h4>
<p id="section-5.1.9-1">
            The following is a non-normative example of a set of policies being
            applied to an RP's metadata.<a href="#section-5.1.9-1" class="pilcrow">Â¶</a></p>
<p id="section-5.1.9-2" class="keepWithNext">
              The RP's metadata:<a href="#section-5.1.9-2" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.1.9-3">
<pre>
{
  "contacts": [
    "rp_admins@cs.example.com"
  ],
  "redirect_uris": [
    "https://cs.example.com/rp1"
  ],
  "response_types": [
    "code"
  ]
}
</pre><a href="#section-5.1.9-3" class="pilcrow">Â¶</a>
</div>
<p id="section-5.1.9-4" class="keepWithNext">
              The federation's policy for RPs:<a href="#section-5.1.9-4" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.1.9-5">
<pre>
{
  "id_token_signed_response_alg": {
    "one_of": [
      "ES256",
      "ES384"
    ],
    "default": "ES256",
  },
  "response_types": {
    "subset_of": [
      "code",
      "code id_token"
    ]
  }
}
</pre><a href="#section-5.1.9-5" class="pilcrow">Â¶</a>
</div>
<p id="section-5.1.9-6" class="keepWithNext">
              The organization's policy for RPs:<a href="#section-5.1.9-6" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.1.9-7">
<pre>
{
  "metadata_policy": {
    "openid_relying_party": {
      "contacts": {
        "add": "helpdesk@example.com"
      },
      "logo_uri": {
        "one_of": [
          "https://example.com/logo_small.svg",
          "https://example.com/logo_big.svg"
        ],
        "default": "https://example.com/logo_small.svg"
      }
    }
  },
  "metadata": {
    "openid_relying_party": {
      "policy_uri": "https://example.com/policy.html",
      "tos_uri": "https://example.com/tos.html"
    }
  }
}
</pre><a href="#section-5.1.9-7" class="pilcrow">Â¶</a>
</div>
<p id="section-5.1.9-8">
            After applying the policies above,
            the metadata for the Entity in question would become:<a href="#section-5.1.9-8" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.1.9-9">
<pre>
{
  "contacts": [
    "rp_admins@cs.example.com",
    "helpdesk@example.com"
  ],
  "logo_uri": "https://example.com/logo_small.svg",
  "policy_uri": "https://example.com/policy.html",
  "tos_uri": "https://example.com/tos.html",
  "id_token_signed_response_alg": "ES256",
  "response_types": [
    "code"
  ],
  "redirect_uris": [
    "https://cs.example.com/rp1"
  ]
}
</pre><a href="#section-5.1.9-9" class="pilcrow">Â¶</a>
</div>
</section>
</section>
</div>
<div id="chain_constraints">
<section id="section-5.2">
        <h3 id="name-applying-constraints">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-applying-constraints" class="section-name selfRef">Applying Constraints</a>
        </h3>
<p id="section-5.2-1">A constraint specification can contain the following claims:<a href="#section-5.2-1" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-5.2-2">
          <dt id="section-5.2-2.1">max_path_length</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-2.2">
              OPTIONAL. Integer. The maximum number of Entity Statements
              between this Entity Statement and the last Entity Statement in
              the Trust Chain.<a href="#section-5.2-2.2" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-2.3">naming_constraints</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-2.4">
              OPTIONAL. JSON object. Restriction on the Entity Identifiers of
              the
              Entities below this Entity. The behavior of this claim mimics
              what is defined in Section 4.2.1.10 of <span>[<a href="#RFC5280" class="cite xref">RFC5280</a>]</span>.
              Restrictions are defined in terms of permitted or excluded name
              subtrees.<a href="#section-5.2-2.4" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-2.5">allowed_leaf_entity_types</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-2.6">
              OPTIONAL. An array of strings. Each string is an Entity Type.
              Entity Type identifiers specified in this document
              can be found in <a href="#metadata" class="auto internal xref">Section 4</a>.
              This constraint restricts what types of Leaf Entities MAY
              appear beneath the Entity described in this Entity Statement.<a href="#section-5.2-2.6" class="pilcrow">Â¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-5.2-3">The following is a non-normative example of such a specification:<a href="#section-5.2-3" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.2-4">
<pre>
{
  "naming_constraints": {
    "permitted": [
      "https://.example.com"
    ],
    "excluded": [
      "https://east.example.com"
    ]
  },
  "max_path_length": 2,
  "allowed_leaf_entity_types": ["openid_provider", "openid_relying_party"]
}
</pre><a href="#section-5.2-4" class="pilcrow">Â¶</a>
</div>
<p id="section-5.2-5">
          If a Subordinate Entity Statement contains a constraint specification
          that is more restrictive than the one in effect, then the more
          restrictive constraint is in effect from here on.<a href="#section-5.2-5" class="pilcrow">Â¶</a></p>
<p id="section-5.2-6">
          If a Subordinate Entity Statement contains a constraint specification
          that is less restrictive than the one in effect, then it MUST be
          ignored.<a href="#section-5.2-6" class="pilcrow">Â¶</a></p>
<div id="max_path_length">
<section id="section-5.2.1">
          <h4 id="name-max-path-length">
<a href="#section-5.2.1" class="section-number selfRef">5.2.1. </a><a href="#name-max-path-length" class="section-name selfRef">Max Path Length</a>
          </h4>
<p id="section-5.2.1-1">
            The <code>max_path_length</code> constraint specifies
            the maximum number of
            Entity Statements a Trust Chain can have between the Entity Statement
            that contains the constraint specification and the Leaf's Entity
            Statement.<a href="#section-5.2.1-1" class="pilcrow">Â¶</a></p>
<p id="section-5.2.1-2">
            A <code>max_path_length</code> constraint of zero
            indicates that no
            Intermediates MAY appear between this Entity and the
            Leaf Entity. Where it appears, the
            <code>max_path_length</code> constraint
            MUST have a value greater than or equal to zero.<a href="#section-5.2.1-2" class="pilcrow">Â¶</a></p>
<p id="section-5.2.1-3">
            Not adding a max_path_length constraint just means that there are
            no additional constraints apart from those already in effect.<a href="#section-5.2.1-3" class="pilcrow">Â¶</a></p>
<p id="section-5.2.1-4">
            Assuming that we have a Trust Chain with four Entity Statements:<a href="#section-5.2.1-4" class="pilcrow">Â¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.2.1-5">
<li id="section-5.2.1-5.1">Entity Configuration of the Leaf Entity (LE)<a href="#section-5.2.1-5.1" class="pilcrow">Â¶</a>
</li>
            <li id="section-5.2.1-5.2">Entity Statement by Intermediate 1 (I1) about LE<a href="#section-5.2.1-5.2" class="pilcrow">Â¶</a>
</li>
            <li id="section-5.2.1-5.3">Entity Statement by Intermediate 2 (I2) about I1<a href="#section-5.2.1-5.3" class="pilcrow">Â¶</a>
</li>
            <li id="section-5.2.1-5.4">Entity Statement by Trust Anchor (TA) about I2<a href="#section-5.2.1-5.4" class="pilcrow">Â¶</a>
</li>
          </ol>
<p id="section-5.2.1-6">
            Then the Trust Chain fulfills the constraints if, for instance:<a href="#section-5.2.1-6" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.2.1-7.1">
                The TA specifies a <code>max_path_length</code> that
                is equal to or bigger than 2.<a href="#section-5.2.1-7.1" class="pilcrow">Â¶</a>
</li>
            <li class="normal" id="section-5.2.1-7.2">
                TA specifies a <code>max_path_length</code> of 2,
                I2 specifies a <code>max_path_length</code> of 1,
                and I1 sets no <code>max_path_length</code> constraint.<a href="#section-5.2.1-7.2" class="pilcrow">Â¶</a>
</li>
            <li class="normal" id="section-5.2.1-7.3">Neither TA nor I2 specifies any
                <code>max_path_length</code> constraint
                while I1 sets <code>max_path_length</code> to 0.<a href="#section-5.2.1-7.3" class="pilcrow">Â¶</a>
</li>
          </ul>
<p id="section-5.2.1-8">
            The Trust Chain does not fulfill the constraints if, for instance, the:<a href="#section-5.2.1-8" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.2.1-9.1">TA's Entity Statement has set the <code>max_path_length</code> to
                1.<a href="#section-5.2.1-9.1" class="pilcrow">Â¶</a>
</li>
          </ul>
</section>
</div>
<div id="naming_constraints">
<section id="section-5.2.2">
          <h4 id="name-naming-constraints">
<a href="#section-5.2.2" class="section-number selfRef">5.2.2. </a><a href="#name-naming-constraints" class="section-name selfRef">Naming Constraints</a>
          </h4>
<p id="section-5.2.2-1">
            The <code>naming_constraints</code> member
            specifies a namespace within which all subject
            Entity Identifiers in Subordinate Entity Statements in a Trust Chain
            MUST be located.<a href="#section-5.2.2-1" class="pilcrow">Â¶</a></p>
<p id="section-5.2.2-2">
            Restrictions are defined in terms of permitted or excluded name
            subtrees. Any name matching a restriction in the excluded
            claim is invalid regardless of the information appearing in the
            permitted claim.<a href="#section-5.2.2-2" class="pilcrow">Â¶</a></p>
<p id="section-5.2.2-3">
            Domain name constraints are as specified in Section 4.2.1.10 of <span>[<a href="#RFC5280" class="cite xref">RFC5280</a>]</span>.
            As stated there, a domain name constraint MUST be specified as a fully qualified domain name
            and MAY specify a host or a domain. Examples are
            "host.example.com" and ".example.com". When the domain name constraint begins
            with a period, it MAY be expanded with one or more labels.
            That is, the domain name constraint ".example.com" is satisfied by both
            host.example.com and my.host.example.com. However, the domain name constraint
            ".example.com" is not satisfied by "example.com". When the
            domain name constraint does not begin with a period, it specifies a host.<a href="#section-5.2.2-3" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="leaf_entity_type_constraints">
<section id="section-5.2.3">
          <h4 id="name-leaf-entity-type-constraint">
<a href="#section-5.2.3" class="section-number selfRef">5.2.3. </a><a href="#name-leaf-entity-type-constraint" class="section-name selfRef">Leaf Entity Type Constraints</a>
          </h4>
<p id="section-5.2.3-1">
            The <code>allowed_leaf_entity_types</code> constraint
            specifies what Entity Types are possible for Leaf Entities beneath an
            Entity. If there is no <code>allowed_leaf_entity_types</code>
            defined it means that any type is allowed.<a href="#section-5.2.3-1" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="trust_marks">
<section id="section-5.3">
        <h3 id="name-trust-marks">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-trust-marks" class="section-name selfRef">Trust Marks</a>
        </h3>
<p id="section-5.3-1">
          The Trust Marks used by this specification are
          signed JWTs.<a href="#section-5.3-1" class="pilcrow">Â¶</a></p>
<p id="section-5.3-2">
          The Trust Marks are signed by a federation-accredited
          authority.<a href="#section-5.3-2" class="pilcrow">Â¶</a></p>
<p id="section-5.3-3">
          The key used by the Trust Mark
          Issuer to sign its Trust Marks MUST be one of the private keys
          related to its
          <code>Federation Entity Keys</code>.<a href="#section-5.3-3" class="pilcrow">Â¶</a></p>
<p id="section-5.3-4">
          Note that a federation MAY allow an Entity to self-sign
          some Trust Marks.<a href="#section-5.3-4" class="pilcrow">Â¶</a></p>
<p id="section-5.3-5">
          Trust Mark JWTs MUST be explicitly typed by setting the
          <code>typ</code> header parameter to
          <code>trust-mark+jwt</code>. This is done to prevent
          cross-JWT confusion (see <span>[<a href="#RFC8725" class="cite xref">RFC8725</a>]</span>, section 3.11).<a href="#section-5.3-5" class="pilcrow">Â¶</a></p>
<div id="trust_mark_claims">
<section id="section-5.3.1">
          <h4 id="name-trust-mark-claims">
<a href="#section-5.3.1" class="section-number selfRef">5.3.1. </a><a href="#name-trust-mark-claims" class="section-name selfRef">Trust Mark Claims</a>
          </h4>
<p id="section-5.3.1-1">These are the Trust Mark Claims:<a href="#section-5.3.1-1" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-5.3.1-2">
            <dt id="section-5.3.1-2.1">iss</dt>
            <dd style="margin-left: 1.5em" id="section-5.3.1-2.2">
                REQUIRED. String. The issuer of the Trust Mark.<a href="#section-5.3.1-2.2" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-5.3.1-2.3">sub</dt>
            <dd style="margin-left: 1.5em" id="section-5.3.1-2.4">
                REQUIRED. String. The Entity this Trust Mark applies to.<a href="#section-5.3.1-2.4" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-5.3.1-2.5">id</dt>
            <dd style="margin-left: 1.5em" id="section-5.3.1-2.6">
                REQUIRED. String. An identifier of the Trust Mark.
                The Trust Mark <code>id</code>
                MUST be collision-resistant
                across multiple federations.
                It is RECOMMENDED that the
                <code>id</code>
                value is built
                using the unique URL that uniquely identifies the federation,
                or the trust framework,
                within which it was issued. This is required to prevent
                Trust Marks issued in different federations
                from having colliding identifiers.<a href="#section-5.3.1-2.6" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-5.3.1-2.7">iat</dt>
            <dd style="margin-left: 1.5em" id="section-5.3.1-2.8">
                REQUIRED. Number. When this Trust Mark was issued.
                Expressed as Seconds Since the Epoch, per <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span>.<a href="#section-5.3.1-2.8" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-5.3.1-2.9">logo_uri</dt>
            <dd style="margin-left: 1.5em" id="section-5.3.1-2.10">
                OPTIONAL. String. A URL that points to a mark/logo that the
                subject is allowed to display to a user of the Entity.<a href="#section-5.3.1-2.10" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-5.3.1-2.11">exp</dt>
            <dd style="margin-left: 1.5em" id="section-5.3.1-2.12">
                OPTIONAL. Number. When this Trust Mark is not valid anymore.
                Expressed as Seconds Since the Epoch, per <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span>.
                If not present, it means that
                the Trust Mark is valid forever.<a href="#section-5.3.1-2.12" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-5.3.1-2.13">ref</dt>
            <dd style="margin-left: 1.5em" id="section-5.3.1-2.14">
                OPTIONAL. String. URL that points to information connected to
                the issuance of this Trust Mark.<a href="#section-5.3.1-2.14" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-5.3.1-3">
            Other claims MAY be used in conjunction with the claims outlined above.
            The recommendations for claim naming described in Section 5.1.2 of
            <span><a href="#OpenID.Core" class="internal xref">OpenID Connect Core 1.0</a> [<a href="#OpenID.Core" class="cite xref">OpenID.Core</a>]</span> apply.<a href="#section-5.3.1-3" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="trust_valid">
<section id="section-5.3.2">
          <h4 id="name-validating-a-trust-mark">
<a href="#section-5.3.2" class="section-number selfRef">5.3.2. </a><a href="#name-validating-a-trust-mark" class="section-name selfRef">Validating a Trust Mark</a>
          </h4>
<p id="section-5.3.2-1">An Entity SHOULD NOT try to validate a Trust Mark until
            it knows which Trust Anchors it wants to use.<a href="#section-5.3.2-1" class="pilcrow">Â¶</a></p>
<p id="section-5.3.2-2">Validating a Trust Mark issuer follows the procedure set out in
            <a href="#resolving_trust" class="auto internal xref">Section 8</a>. Validating the Trust Mark
            itself is described in <a href="#status_endpoint" class="auto internal xref">Section 7.4</a><a href="#section-5.3.2-2" class="pilcrow">Â¶</a></p>
<p id="section-5.3.2-3">
            Note that the Entity representing the accreditation authority
            SHOULD be well known and trusted for a given Trust Mark identifier.
            A Trust Anchor MAY publish a list of accreditation authorities
            of Trust Marks that SHOULD be trusted by other Entities.
            A Trust Anchor uses the <code>trust_marks_issuers</code> claim
            in its Entity Configuration to publish this information.<a href="#section-5.3.2-3" class="pilcrow">Â¶</a></p>
<p id="section-5.3.2-4">
            Trust Marks that are not recognized within a federation SHOULD be ignored when
            evaluating the trust in the Entity that presented them. Such Trust Marks can
            appear for various reasons, such as the Entity Configuration including Trust
            Marks associated with another federation, or Trust Marks intended for specific
            purposes or Entity audiences.<a href="#section-5.3.2-4" class="pilcrow">Â¶</a></p>
<p id="section-5.3.2-5">
            An Entity MAY choose, at its own discretion, to utilize Trust Marks presented
            to it that are not recognized within the federation, and where the
            accreditation authority is established by some out-of-band mechanism.<a href="#section-5.3.2-5" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="trust_example">
<section id="section-5.3.3">
          <h4 id="name-trust-mark-examples">
<a href="#section-5.3.3" class="section-number selfRef">5.3.3. </a><a href="#name-trust-mark-examples" class="section-name selfRef">Trust Mark Examples</a>
          </h4>
<p id="section-5.3.3-1" class="keepWithNext">
              A non-normative example of a Trust Mark claim inside an Entity Configuration is:<a href="#section-5.3.3-1" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.3.3-2">
<pre>
{
  "iss": "https://rp.example.it/spid/",
  "sub": "https://rp.example.it/spid/",
  "iat": 1516239022,
  "exp": 1516298022,
  "trust_marks": [
    {
     "id": "https://www.spid.gov.it/certification/rp/",
     "trust_mark":
        "eyJraWQiOiJmdWtDdUtTS3hwWWJjN09lZUk3Ynlya3N5a0E1bDhPb2RFSXVyOH"
        "JoNFlBIiwidHlwIjoidHJ1c3QtbWFyaytqd3QiLCJhbGciOiJSUzI1NiJ9.eyJ"
        "pc3MiOiJodHRwczovL3d3dy5hZ2lkLmdvdi5pdCIsInN1YiI6Imh0dHBzOi8vc"
        "nAuZXhhbXBsZS5pdC9zcGlkIiwiaWF0IjoxNTc5NjIxMTYwLCJpZCI6Imh0dHB"
        "zOi8vd3d3LnNwaWQuZ292Lml0L2NlcnRpZmljYXRpb24vcnAiLCJsb2dvX3Vya"
        "SI6Imh0dHBzOi8vd3d3LmFnaWQuZ292Lml0L3RoZW1lcy9jdXN0b20vYWdpZC9"
        "sb2dvLnN2ZyIsInJlZiI6Imh0dHBzOi8vZG9jcy5pdGFsaWEuaXQvZG9jcy9zc"
        "GlkLWNpZS1vaWRjLWRvY3MvaXQvdmVyc2lvbmUtY29ycmVudGUvIn0.AGf5Y4M"
        "oJt22rznH4i7Wqpb2EF2LzE6BFEkTzY1dCBMCK-8P_vj4Boz7335pUF45XXr2j"
        "x5_waDRgDoS5vOO-wfc0NWb4Zb_T1RCwcryrzV0z3jJICePMPM_1hZnBZjTNQd"
        "4EsFNvKmUo_teR2yzAZjguR2Rid30O5PO8kJtGaXDmz-rWaHbmfLhlNGJnqcp9"
        "Lo1bhkU_4Cjpn2bdX7RN0JyfHVY5IJXwdxUMENxZd-VtA5QYiw7kPExT53XcJO"
        "89ebe_ik4D0dl-vINwYhrIz2RPnqgA1OdbK7jg0vm8Tb3aemRLG7oLntHwqLO-"
        "gGYr6evM2_SgqwA0lQ9mB9yhw"
    }
  ],
  "metadata": {
    "openid_relying_party": {
      "application_type": "web",
      "client_registration_types": ["automatic"],
      "client_name": "https://rp.example.it/spid/",
      "contacts": [
        "ops@rp.example.it"
      ],

       ... follows other claims ...

   ... follows other claims ...

</pre><a href="#section-5.3.3-2" class="pilcrow">Â¶</a>
</div>
<p id="section-5.3.3-3" class="keepWithNext">
              An example of a decoded Trust Mark issued to an RP,
              attesting the conformance to a national
              public service profile:<a href="#section-5.3.3-3" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.3.3-4">
<pre>
{
  "id":"https://federation.id/openid_relying_party/public/",
  "iss": "https://trust-anchor.gov.id",
  "sub": "https://rp.cie.id",
  "iat": 1579621160,
  "organization_name": "Organization name",
  "policy_uri": "https://rp.cie.id/privacy_policy",
  "tos_uri": "https://rp.cie.id/info_policy",
  "service_documentation": "https://rp.cie.id/api/v1/get/services",
  "ref": "https://rp.cie.id/documentation/manuale_operativo.pdf"
}

</pre><a href="#section-5.3.3-4" class="pilcrow">Â¶</a>
</div>
<p id="section-5.3.3-5" class="keepWithNext">
              An example of a decoded Trust Mark issued to an RP,
              attesting its conformance to the rules for
              data management of underage users:<a href="#section-5.3.3-5" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.3.3-6">
<pre>
{
  "id":"https://federation.id/openid_relying_party/private/under-age",
  "iss": "https://trust-anchor.gov.id",
  "sub": "https://rp.cie.id",
  "iat": 1579621160,
  "organization_name": "Organization name",
  "policy_uri": "https://rp.cie.id/privacy_policy",
  "tos_uri": "https://rp.cie.id/info_policy"
}

</pre><a href="#section-5.3.3-6" class="pilcrow">Â¶</a>
</div>
<p id="section-5.3.3-7" class="keepWithNext">
              An example of a Trust Mark attesting a stipulation of an
              agreement between an RP and an Attribute Authority:<a href="#section-5.3.3-7" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.3.3-8">
<pre>
{
  "id": "https://deleghedigitali.gov.it/openid_relying_party/sgd/",
  "iss": "https://deleghedigitali.gov.it",
  "sub": "https://rp.cie.id",
  "iat": 1579621160,
  "logo_uri": "https://deleghedigitali.gov.it/sgd-cmyk-150dpi-90mm.svg",
  "organization_type": "public",
  "id_code": "123456",
  "email": "info@rp.cie.id",
  "organization_name#it": "Nome dell'organizazzione",
  "policy_uri#it": "https://rp.cie.id/privacy_policy",
  "tos_uri#it": "https://rp.cie.id/info_policy",
  "service_documentation": "https://rp.cie.id/api/v1/get/services",
  "ref": "https://deleghedigitali.gov.it/documentation/manuale_operativo.pdf"
}
</pre><a href="#section-5.3.3-8" class="pilcrow">Â¶</a>
</div>
<p id="section-5.3.3-9" class="keepWithNext">
              An example of a Trust Mark asserting
              conformance to a security profile:<a href="#section-5.3.3-9" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.3.3-10">
<pre>
{
  "iss": "https://secusign.org",
  "sub": "https://example.com/op",
  "iat": 1579621160,
  "id": "https://secusign.org/level/A",
  "logo_uri": "https://secusign.org/static/levels/
    certification-level-A-150dpi-90mm.svg",
  "ref": "https://secusign.org/conformances/"
}
</pre><a href="#section-5.3.3-10" class="pilcrow">Â¶</a>
</div>
<p id="section-5.3.3-11" class="keepWithNext">An example of a decoded self-signed Trust Mark:<a href="#section-5.3.3-11" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.3.3-12">
<pre>
{
  "iss": "https://example.com/op",
  "sub": "https://example.com/op",
  "iat": 1579621160,
  "id": "https://openid.net/certification/op",
  "logo_uri": "http://openid.net/wordpress-content/uploads/2016/
    05/oid-l-certification-mark-l-cmyk-150dpi-90mm.svg",
  "ref": "https://openid.net/wordpress-content/uploads/2015/
    09/RolandHedberg-pyoidc-0.7.7-Basic-26-Sept-2015.zip"
}
</pre><a href="#section-5.3.3-12" class="pilcrow">Â¶</a>
</div>
<p id="section-5.3.3-13" class="keepWithNext">An example of a third-party accreditation authority:<a href="#section-5.3.3-13" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.3.3-14">
<pre>
{
  "iss": "https://swamid.se",
  "sub": "https://umu.se/op",
  "iat": 1577833200,
  "exp": 1609369200,
  "id": "https://refeds.org/wp-content/uploads/2016/01/Sirtfi-1.0.pdf"
}
</pre><a href="#section-5.3.3-14" class="pilcrow">Â¶</a>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="federation_configuration">
<section id="section-6">
      <h2 id="name-obtaining-federation-entity">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-obtaining-federation-entity" class="section-name selfRef">Obtaining Federation Entity Configuration Information</a>
      </h2>
<p id="section-6-1">
        The Entity Configuration of every participant SHOULD be exposed at a well-known endpoint.
        The configuration endpoint is found using the
        <span><a href="#RFC8615" class="internal xref">Well-Known URIs</a> [<a href="#RFC8615" class="cite xref">RFC8615</a>]</span>
        specification, with the suffix
        <code>openid-federation</code>. The scheme, host, and port
        are taken directly from the Entity Identifier combined with the following
        path: <code>/.well-known/openid-federation</code>.<a href="#section-6-1" class="pilcrow">Â¶</a></p>
<p id="section-6-2">
        If the Entity Identifier contains a path, it is concatenated after
        <code>/.well-known/openid-federation</code>
        in the same
        manner
        that path components are concatenated to the well-known identifier in
        the OAuth 2.0 Authorization Server Metadata
        <span>[<a href="#RFC8414" class="cite xref">RFC8414</a>]</span>
        specification.
        Of course, in real multi-tenant deployments, in which the Entity Identifier
        might be of the form
        <code>https://multi-tenant-service.example.com/my-tenant-identifier</code>
        the tenant is very likely to not have control over the path
        <code>https://multi-tenant-service.example.com/.well-known/openid-federation/my-tenant-identifier</code>
        whereas it is very likely to have control over the path
        <code>https://multi-tenant-service.example.com/my-tenant-identifier/.well-known/openid-federation</code>.
        Therefore, if using the configuration endpoint at the URL with the
        tenant path
        after the well-known part fails,
        it is RECOMMENDED that callers retry at the URL with the tenant path
        before the well-known part
        (even though this violates <span>[<a href="#RFC8615" class="cite xref">RFC8615</a>]</span>).<a href="#section-6-2" class="pilcrow">Â¶</a></p>
<p id="section-6-3">
        Entities SHOULD make an Entity Configuration document
        available at the configuration endpoint.
        There is only one exception to this
        rule and that is for an RP that only does Explicit Registration.
        Since it posts the Entity Configuration to the OP during client
        registration, the OP has everything it needs from the RP.<a href="#section-6-3" class="pilcrow">Â¶</a></p>
<section id="section-6.1">
        <h3 id="name-federation-entity-configura">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-federation-entity-configura" class="section-name selfRef">Federation Entity Configuration Request</a>
        </h3>
<p id="section-6.1-1">
          An Entity Configuration document MUST be queried using an
          HTTP GET request at the previously specified path.
          The requesting party would make the following request to the Entity
          <code>https://openid.sunet.se</code>
          to obtain its configuration information:<a href="#section-6.1-1" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1-2">
<pre>

  GET /.well-known/openid-federation HTTP/1.1
  Host: openid.sunet.se
</pre><a href="#section-6.1-2" class="pilcrow">Â¶</a>
</div>
</section>
<section id="section-6.2">
        <h3 id="name-federation-entity-configurat">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-federation-entity-configurat" class="section-name selfRef">Federation Entity Configuration Response</a>
        </h3>
<p id="section-6.2-1">The response is an Entity Configuration, as described in
          <a href="#entity-statement" class="auto internal xref">Section 3.1</a>.
          If the Entity is an Intermediate Entity or a Trust Anchor, the
          response MUST contain metadata for a federation Entity
          (<code>federation_entity</code>).<a href="#section-6.2-1" class="pilcrow">Â¶</a></p>
<p id="section-6.2-2">
          A successful response MUST use the HTTP status code 200
          and the content type set to
          <code>application/entity-statement+jwt</code>,
          to make it clear that the response contains a signed Entity Statement.
          In case of an error, the response
          SHOULD be produced in accordance with what is defined in
          <a href="#error_response" class="auto internal xref">Section 7.6</a>.<a href="#section-6.2-2" class="pilcrow">Â¶</a></p>
<p id="section-6.2-3">The following is a non-normative example response from an
          Intermediate Entity, before serialization and adding a signature:<a href="#section-6.2-3" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.2-4">
<pre>
200 OK
Content-Type: application/entity-statement+jwt

{
  "iss": "https://openid.sunet.se",
  "sub": "https://openid.sunet.se",
  "iat": 1516239022,
  "exp": 1516298022,
  "metadata": {
    "openid_provider": {
      "issuer": "https://openid.sunet.se",
      "signed_jwks_uri": "https://openid.sunet.se/jwks.jose",
      "authorization_endpoint":
        "https://openid.sunet.se/authorization",
      "client_registration_types_supported": [
        "automatic",
        "explicit"
      ],
      "grant_types_supported": [
        "authorization_code"
      ],
      "id_token_signing_alg_values_supported": [
        "ES256", "RS256"
      ],
      "logo_uri":
        "https://www.umu.se/img/umu-logo-left-neg-SE.svg",
      "op_policy_uri":
        "https://www.umu.se/en/website/legal-information/",
      "response_types_supported": [
        "code"
      ],
      "subject_types_supported": [
        "pairwise",
        "public"
      ],
      "token_endpoint": "https://openid.sunet.se/token",
      "federation_registration_endpoint":
        "https://op.umu.se/openid/fedreg",
      "token_endpoint_auth_methods_supported": [
        "private_key_jwt"
      ]

    }
  },
  "jwks": {
    "keys": [
      {
        "alg": "RS256",
        "e": "AQAB",
        "key_ops": [
          "verify"
        ],
        "kid": "key1",
        "kty": "RSA",
        "n": "pnXBOusEANuug6ewezb9J_...",
        "use": "sig"
      }
    ]
  },
  "authority_hints": [
    "https://edugain.org/federation"
  ]
}
</pre><a href="#section-6.2-4" class="pilcrow">Â¶</a>
</div>
</section>
</section>
</div>
<div id="federation_endpoints">
<section id="section-7">
      <h2 id="name-federation-endpoints">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-federation-endpoints" class="section-name selfRef">Federation Endpoints</a>
      </h2>
<p id="section-7-1">
        The federation endpoints of an Entity can be found in the
        configuration response as described in
        <a href="#federation_configuration" class="auto internal xref">Section 6</a>
        or by other means.<a href="#section-7-1" class="pilcrow">Â¶</a></p>
<div id="fetch_endpoint">
<section id="section-7.1">
        <h3 id="name-fetching-entity-statements">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-fetching-entity-statements" class="section-name selfRef">Fetching Entity Statements</a>
        </h3>
<p id="section-7.1-1">
          All Entities that are expected to publish Entity Statements about other
          Entities MUST expose a Fetch endpoint.<a href="#section-7.1-1" class="pilcrow">Â¶</a></p>
<p id="section-7.1-2">
          Fetching Entity Statements is performed to collect Entity Statements
          one by one to gather Trust Chains.<a href="#section-7.1-2" class="pilcrow">Â¶</a></p>
<p id="section-7.1-3">
          To fetch an Entity Statement, an Entity needs to know the
          identifier of the Entity to ask (the issuer), the fetch
          endpoint of that Entity, and the identifier of the
          Entity, that is, the subject of the statement.<a href="#section-7.1-3" class="pilcrow">Â¶</a></p>
<div id="fetch_statement">
<section id="section-7.1.1">
          <h4 id="name-fetch-entity-statements-req">
<a href="#section-7.1.1" class="section-number selfRef">7.1.1. </a><a href="#name-fetch-entity-statements-req" class="section-name selfRef">Fetch Entity Statements Request</a>
          </h4>
<p id="section-7.1.1-1">
            The request MUST be an HTTP request using the GET method and
            the <code>https</code> scheme to a resolved federation endpoint with the
            following query string parameters, encoded in
            <code>application/x-www-form-urlencoded</code> format.<a href="#section-7.1.1-1" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-7.1.1-2">
            <dt id="section-7.1.1-2.1">iss</dt>
            <dd style="margin-left: 1.5em" id="section-7.1.1-2.2">
                OPTIONAL. The Entity Identifier of the issuer
                from which the Entity Statement issued. Because of the
                normalization of the URL, multiple issuers MAY resolve to a
                shared fetch endpoint. This parameter makes it explicit exactly
                which issuer the Entity Statements must come from. Without this
                parameter, the issuer matches to the Entity at
                which the request was made.<a href="#section-7.1.1-2.2" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-7.1.1-2.3">sub</dt>
            <dd style="margin-left: 1.5em" id="section-7.1.1-2.4">
                OPTIONAL. The Entity Identifier of the subject
                for which the Entity Statement is issued. If this
                parameter is left out, it is considered to be the same as the
                issuer and would indicate a request for a self-signed
                statement.<a href="#section-7.1.1-2.4" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-7.1.1-3" class="keepWithNext">
              The following is a non-normative example of an API
              request for an Entity Statement:<a href="#section-7.1.1-3" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.1.1-4">
<pre>
GET /federation_fetch_endpoint?
iss=https%3A%2F%2Fedugain.org%2Ffederation&amp;
sub=https%3A%2F%2Fopenid%2Esunet%2Ese HTTP/1.1
Host: edugain.org
</pre><a href="#section-7.1.1-4" class="pilcrow">Â¶</a>
</div>
</section>
</div>
<section id="section-7.1.2">
          <h4 id="name-fetch-entity-statements-res">
<a href="#section-7.1.2" class="section-number selfRef">7.1.2. </a><a href="#name-fetch-entity-statements-res" class="section-name selfRef">Fetch Entity Statements Response</a>
          </h4>
<p id="section-7.1.2-1">
            A successful response MUST use the HTTP status code 200
            and the content type set to
            <code>application/entity-statement+jwt</code>,
            to make it clear that the response contains a signed Entity Statement.
            If it is a negative response, it will be a JSON object and the
            content type MUST be set to
            <code>application/json</code>.
            See more about error responses in <a href="#error_response" class="auto internal xref">Section 7.6</a>.<a href="#section-7.1.2-1" class="pilcrow">Â¶</a></p>
<p id="section-7.1.2-2" class="keepWithNext">
              The following is a non-normative example of a response, before
              serialization and adding a signature:<a href="#section-7.1.2-2" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.1.2-3">
<pre>
200 OK
Content-Type: application/entity-statement+jwt

{
  "iss": "https://edugain.org/federation",
  "sub": "https://openid.sunet.se"
  "exp": 1568397247,
  "iat": 1568310847,
  "jwks": {
    "keys": [
      {
        "e": "AQAB",
        "kid": "dEEtRjlzY3djcENuT01wOGxrZlkxb3RIQVJlMTY0...",
        "kty": "RSA",
        "n": "x97YKqc9Cs-DNtFrQ7_vhXoH9bwkDWW6En2jJ044yH..."
      }
    ]
  },
  "metadata":{
    "federation_entity": {
        "organization_name":"SUNET"
    }
  }
  "metadata_policy": {
    "openid_provider": {
      "subject_types_supported": {
        "value": [
          "pairwise"
        ]
      },
      "token_endpoint_auth_methods_supported": {
        "default": [
          "private_key_jwt"
        ],
        "subset_of": [
          "private_key_jwt",
          "client_secret_jwt"
        ],
        "superset_of": [
          "private_key_jwt"
        ]
      }
    }
  }
}
</pre><a href="#section-7.1.2-3" class="pilcrow">Â¶</a>
</div>
</section>
</section>
</div>
<div id="resolve">
<section id="section-7.2">
        <h3 id="name-resolve-entity-statement">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-resolve-entity-statement" class="section-name selfRef">Resolve Entity Statement</a>
        </h3>
<p id="section-7.2-1">
          An Entity MAY use the resolve endpoint to fetch
          resolved metadata and Trust Marks for an Entity as seen/trusted by
          the resolver. The resolver is supposed to fetch the subject's
          Entity Configuration, collect a Trust Chain that starts
          with the subject's Entity Statement and ends with the specified
          Trust Anchor, verify the Trust Chain, and then apply all the
          policies present in the Trust Chain to the Entity Statements
          metadata. The resolver is also expected to verify that the
          present Trust Marks are active. If it finds Trust Marks that are
          not active, then those should be left out of the response set.<a href="#section-7.2-1" class="pilcrow">Â¶</a></p>
<section id="section-7.2.1">
          <h4 id="name-resolve-request">
<a href="#section-7.2.1" class="section-number selfRef">7.2.1. </a><a href="#name-resolve-request" class="section-name selfRef">Resolve Request</a>
          </h4>
<p id="section-7.2.1-1">
            The request MUST be an HTTP request using the GET method and
            the <code>https</code> scheme to a resolve endpoint with the
            following query string parameters, encoded in
            <code>application/x-www-form-urlencoded</code> format.<a href="#section-7.2.1-1" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-7.2.1-2">
            <dt id="section-7.2.1-2.1">sub</dt>
            <dd style="margin-left: 1.5em" id="section-7.2.1-2.2">
                REQUIRED. The Entity Identifier of the
                Entity whose resolved data is requested.<a href="#section-7.2.1-2.2" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-7.2.1-2.3">anchor</dt>
            <dd style="margin-left: 1.5em" id="section-7.2.1-2.4">
                REQUIRED. The Trust Anchor that the remote peer
                MUST use when resolving the metadata. The value is an Entity
                identifier.<a href="#section-7.2.1-2.4" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-7.2.1-2.5">type</dt>
            <dd style="margin-left: 1.5em" id="section-7.2.1-2.6">
                OPTIONAL. A specific metadata type to resolve.
                In this document, we use the metadata types listed in
                <a href="#metadata" class="auto internal xref">Section 4</a>.
                If no value is given, then all metadata types are expected to
                be returned.<a href="#section-7.2.1-2.6" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-7.2.1-3" class="keepWithNext">
              The following is a non-normative example of a resolve request:<a href="#section-7.2.1-3" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.2.1-4">
<pre>
GET /resolve?
sub=https%3A%2F%2Fop.example.it%2Fspid&amp;
type=openid_provider&amp;
anchor=https%3A%2F%2Fswamid.se HTTP/1.1
Host: openid.sunet.se
</pre><a href="#section-7.2.1-4" class="pilcrow">Â¶</a>
</div>
</section>
<section id="section-7.2.2">
          <h4 id="name-resolve-response">
<a href="#section-7.2.2" class="section-number selfRef">7.2.2. </a><a href="#name-resolve-response" class="section-name selfRef">Resolve Response</a>
          </h4>
<p id="section-7.2.2-1">
            A successful response MUST use the HTTP status code 200
            and the content type set to
            <code>application/resolve-response+jwt</code>,
            containing resolved metadata and
            verified Trust Marks.
            The resolve response JWT MAY also contain
            the sequence of the Entity Statements that compose the Trust Chain,
            sorted as shown in <a href="#trust_chain" class="auto internal xref">Section 3.2</a>.
            The key used by the resolver to sign the response MUST be one of its
            Federation Entity Keys.
            The response SHOULD contain the
            <code>aud</code> claim only
            if the requesting client is authenticated.<a href="#section-7.2.2-1" class="pilcrow">Â¶</a></p>
<p id="section-7.2.2-2">These are the resolve response Claims:<a href="#section-7.2.2-2" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-7.2.2-3">
            <dt id="section-7.2.2-3.1">iss</dt>
            <dd style="margin-left: 1.5em" id="section-7.2.2-3.2">
                REQUIRED. String.
                URL corresponding to the federation's Entity Identifier
                of the issuer of the resolve response.<a href="#section-7.2.2-3.2" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-7.2.2-3.3">sub</dt>
            <dd style="margin-left: 1.5em" id="section-7.2.2-3.4">
                REQUIRED. String.
                URL corresponding to the federation's Entity Identifier
                of the subject for which the resolve response refers to.<a href="#section-7.2.2-3.4" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-7.2.2-3.5">iat</dt>
            <dd style="margin-left: 1.5em" id="section-7.2.2-3.6">
                REQUIRED. Number. When this resolution was issued.
                Expressed as Seconds Since the Epoch, as defined in
                <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span>.<a href="#section-7.2.2-3.6" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-7.2.2-3.7">exp</dt>
            <dd style="margin-left: 1.5em" id="section-7.2.2-3.8">
                REQUIRED. Number. When this resolution is not valid anymore.
                Expressed as Seconds Since the Epoch, as defined in <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span>.
                It MUST correspond to the <code>exp</code> value of
                the Trust Chain from which the resolve response was derived.<a href="#section-7.2.2-3.8" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-7.2.2-3.9">metadata</dt>
            <dd style="margin-left: 1.5em" id="section-7.2.2-3.10">
                REQUIRED. JSON object containing the resolved subject metadata,
                according to the requested <code>type</code>
                and expressed in the <code>metadata</code> format
                defined in <a href="#entity-statement" class="auto internal xref">Section 3.1</a>.<a href="#section-7.2.2-3.10" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-7.2.2-3.11">trust_marks</dt>
            <dd style="margin-left: 1.5em" id="section-7.2.2-3.12">
                OPTIONAL. A JSON array of objects, each representing a Trust Mark,
                as defined in <a href="#entity-statement" class="auto internal xref">Section 3.1</a>.<a href="#section-7.2.2-3.12" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-7.2.2-3.13">trust_chain</dt>
            <dd style="margin-left: 1.5em" id="section-7.2.2-3.14">
                OPTIONAL. Array containing the sequence of the statements
                that compose
                the Trust Chain starting with the subject and
                ending with the selected Trust Anchor,
                sorted as shown in <a href="#trust_chain" class="auto internal xref">Section 3.2</a>.<a href="#section-7.2.2-3.14" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-7.2.2-4">
            Other claims MAY be used in conjunction with the claims outlined above.
            The claim naming recommendations outlined in Section 5.1.2 of
            <span><a href="#OpenID.Core" class="internal xref">OpenID Connect Core 1.0</a> [<a href="#OpenID.Core" class="cite xref">OpenID.Core</a>]</span> apply.<a href="#section-7.2.2-4" class="pilcrow">Â¶</a></p>
<p id="section-7.2.2-5">
            If the response is negative, the response
            SHOULD be produced in accordance with what is defined in
            <a href="#error_response" class="auto internal xref">Section 7.6</a>.<a href="#section-7.2.2-5" class="pilcrow">Â¶</a></p>
<p id="section-7.2.2-6" class="keepWithNext">
              The following is a non-normative example of a response, before
              serialization and adding a signature:<a href="#section-7.2.2-6" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.2.2-7">
<pre>
{
  "iss": "https://resolver.spid.gov.it/",
  "sub": "https://op.example.it/spid/",
  "iat": 1516239022,
  "exp": 1516298022,
  "metadata": {
    "openid_provider": {
      "contacts": ["legal@example.it", "technical@example.it"],
      "logo_uri":
        "https://op.example.it/static/img/op-logo.svg",
      "op_policy_uri":
        "https://op.example.it/en/about-the-website/legal-information/",
      "federation_registration_endpoint":"https://op.example.it/spid/fedreg/",
      "authorization_endpoint":
        "https://op.example.it/spid/authorization/",
      "token_endpoint": "https://op.example.it/spid/token/",
      "response_types_supported": [
        "code",
        "code id_token",
        "token"
      ],
      "grant_types_supported": [
        "authorization_code",
        "implicit",
        "urn:ietf:params:oauth:grant-type:jwt-bearer"
      ],
      "subject_types_supported": ["pairwise"],
      "id_token_signing_alg_values_supported": ["RS256"],
      "issuer": "https://op.example.it/spid/",
      "jwks": {
        "keys": [
          {
            "kty": "RSA",
            "use": "sig",
            "n": "1Ta-sE ...",
            "e": "AQAB",
            "kid": "FANFS3YnC9tjiCaivhWLVUJ3AxwGGz_98uRFaqMEEs"
          }
        ]
      }
    }
  },
  "trust_marks": [
    {"id": "https://www.spid.gov.it/certification/op/",
     "trust_mark":
       "eyJhbGciOiJSUzI1NiIsImtpZCI6ImRGRTFjMFF4UzBFdFFrWmxNRXR3ZWxOQl"
       "eyJhbGciOiJSUzI1NiIsImtpZCI6Ijh4c3VLV2lWZndTZ0hvZjFUZTRPVWRjeT"
       "RxN2RKcktmRlJsTzV4aEhJYTAifQ.eyJpc3MiOiJodHRwczovL3d3dy5hZ2lkL"
       "mdvdi5pdCIsInN1YiI6Imh0dHBzOi8vb3AuZXhhbXBsZS5pdC9zcGlkLyIsIml"
       "hdCI6MTU3OTYyMTE2MCwiaWQiOiJodHRwczovL3d3dy5zcGlkLmdvdi5pdC9jZ"
       "XJ0aWZpY2F0aW9uL29wLyIsImxvZ29fdXJpIjoiaHR0cHM6Ly93d3cuYWdpZC5"
       "nb3YuaXQvdGhlbWVzL2N1c3RvbS9hZ2lkL2xvZ28uc3ZnIiwicmVmIjoiaHR0c"
       "HM6Ly9kb2NzLml0YWxpYS5pdC9pdGFsaWEvc3BpZC9zcGlkLXJlZ29sZS10ZWN"
       "uaWNoZS1vaWRjL2l0L3N0YWJpbGUvaW5kZXguaHRtbCJ9"
    }
  ],
  "trust_chain" : [
    "eyJhbGciOiJSUzI1NiIsImtpZCI6Ims1NEhRdERpYnlHY3M5WldWTWZ2aUhm ...",
    "eyJhbGciOiJSUzI1NiIsImtpZCI6IkJYdmZybG5oQU11SFIwN2FqVW1BY0JS ...",
    "eyJhbGciOiJSUzI1NiIsImtpZCI6IkJYdmZybG5oQU11SFIwN2FqVW1BY0JS ..."
  ]
}
</pre><a href="#section-7.2.2-7" class="pilcrow">Â¶</a>
</div>
</section>
<section id="section-7.2.3">
          <h4 id="name-considerations">
<a href="#section-7.2.3" class="section-number selfRef">7.2.3. </a><a href="#name-considerations" class="section-name selfRef">Considerations</a>
          </h4>
<p id="section-7.2.3-1">
            The basic assumption of this specification is that an Entity
            should have direct trust in no one except the Trust Anchor
            and its own capabilities.

            However, Entities may establish a kind of
            transistive trust in other Entities. For example, the
            Trust Anchor states who its Subordinates are
            and Entities may choose to trust these.

            If a party uses the resolve service of another Entity
            to obtain federation data, it is trusting
            the resolver to perform the validation of the cryptographically
            protected metadata correctly and to provide it with authentic results.<a href="#section-7.2.3-1" class="pilcrow">Â¶</a></p>
</section>
</section>
</div>
<div id="entity_listing">
<section id="section-7.3">
        <h3 id="name-entity-listings">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-entity-listings" class="section-name selfRef">Entity Listings</a>
        </h3>
<p id="section-7.3-1">
          An Entity MAY query another Entity for a list of all the
          Entities immediately Subordinate to that Entity and about which
          that Entity is prepared to issue statements.
          (In some cases, this MAY be a very large list.)<a href="#section-7.3-1" class="pilcrow">Â¶</a></p>
<section id="section-7.3.1">
          <h4 id="name-entity-listings-request">
<a href="#section-7.3.1" class="section-number selfRef">7.3.1. </a><a href="#name-entity-listings-request" class="section-name selfRef">Entity Listings Request</a>
          </h4>
<p id="section-7.3.1-1">
            The request MUST be an HTTP request using the GET method and
            the <code>https</code> scheme to a list endpoint with the
            following query parameters, encoded in
            <code>application/x-www-form-urlencoded</code> format.<a href="#section-7.3.1-1" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-7.3.1-2">
            <dt id="section-7.3.1-2.1">entity_type</dt>
            <dd style="margin-left: 1.5em" id="section-7.3.1-2.2">
                OPTIONAL. If the responder knows the
                metadata type identifier of all its Subordinates,
                the result MUST be filtered accordingly.
                If the responder does not support this feature it MUST
                use the HTTP status code 400 and set the content type to
                <code>application/json</code>, with
                the error code set to
                <code>unsupported_parameter</code>.<a href="#section-7.3.1-2.2" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-7.3.1-3" class="keepWithNext">
              The following is a non-normative example of an API
              request for a list of Entities:<a href="#section-7.3.1-3" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.3.1-4">
<pre>
GET /list HTTP/1.1
Host: openid.sunet.se
</pre><a href="#section-7.3.1-4" class="pilcrow">Â¶</a>
</div>
</section>
<section id="section-7.3.2">
          <h4 id="name-entity-listing-response">
<a href="#section-7.3.2" class="section-number selfRef">7.3.2. </a><a href="#name-entity-listing-response" class="section-name selfRef">Entity Listing Response</a>
          </h4>
<p id="section-7.3.2-1">
            A successful response MUST use the HTTP status code 200
            and the content type set to <code>application/json</code>,
            containing a JSON list with the known Entity Identifiers.<a href="#section-7.3.2-1" class="pilcrow">Â¶</a></p>
<p id="section-7.3.2-2">
            If the response is negative, the response
            should be produced in accordance with what is defined in
            <a href="#error_response" class="auto internal xref">Section 7.6</a>.<a href="#section-7.3.2-2" class="pilcrow">Â¶</a></p>
<p id="section-7.3.2-3" class="keepWithNext">
              The following is a non-normative example of a response:<a href="#section-7.3.2-3" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.3.2-4">
<pre>
200 OK
Content-Type: application/json

[
  "https://ntnu.andreas.labs.uninett.no/",
  "https://blackboard.ntnu.no/openid/callback",
  "https://serviceprovider.andreas.labs.uninett.no/application17"
]
</pre><a href="#section-7.3.2-4" class="pilcrow">Â¶</a>
</div>
</section>
</section>
</div>
<div id="status_endpoint">
<section id="section-7.4">
        <h3 id="name-trust-mark-status">
<a href="#section-7.4" class="section-number selfRef">7.4. </a><a href="#name-trust-mark-status" class="section-name selfRef">Trust Mark Status</a>
        </h3>
<p id="section-7.4-1">
          This enables an Entity to check whether a Trust Mark is still
          active or not. The query MUST be sent to the Trust Mark issuer.<a href="#section-7.4-1" class="pilcrow">Â¶</a></p>
<section id="section-7.4.1">
          <h4 id="name-status-request">
<a href="#section-7.4.1" class="section-number selfRef">7.4.1. </a><a href="#name-status-request" class="section-name selfRef">Status Request</a>
          </h4>
<p id="section-7.4.1-1">
            The request MUST be an HTTP request using the POST method and
            the <code>https</code> scheme to a status endpoint with the
            following parameters, encoded in
            <code>application/x-www-form-urlencoded</code> format.<a href="#section-7.4.1-1" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-7.4.1-2">
            <dt id="section-7.4.1-2.1">sub</dt>
            <dd style="margin-left: 1.5em" id="section-7.4.1-2.2">
                OPTIONAL. The ID of the Entity to which the Trust Mark
                was issued.<a href="#section-7.4.1-2.2" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-7.4.1-2.3">id</dt>
            <dd style="margin-left: 1.5em" id="section-7.4.1-2.4">
                OPTIONAL. Identifier of the Trust Mark.<a href="#section-7.4.1-2.4" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-7.4.1-2.5">iat</dt>
            <dd style="margin-left: 1.5em" id="section-7.4.1-2.6">
                OPTIONAL. When the Trust Mark was issued. If
                <code>iat</code> is not specified and the
                Trust Mark Issuer has issued several Trust Marks with the
                <code>id</code> specified in the request to the
                Entity identified by <code>sub</code>, the
                most recent one is assumed.<a href="#section-7.4.1-2.6" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-7.4.1-2.7">trust_mark</dt>
            <dd style="margin-left: 1.5em" id="section-7.4.1-2.8">
                OPTIONAL. The whole Trust Mark.<a href="#section-7.4.1-2.8" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-7.4.1-3">
            If <code>trust_mark</code> is used, then
            <code>sub</code> and <code>id</code>
            are not needed. If <code>trust_mark</code> is not used,
            then <code>sub</code> and <code>id</code>
            are required.<a href="#section-7.4.1-3" class="pilcrow">Â¶</a></p>
<p id="section-7.4.1-4" class="keepWithNext">
                The following is a non-normative example of a request using
                <code>sub</code> and <code>id</code>:<a href="#section-7.4.1-4" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.4.1-5">
<pre>
POST /federation_trust_mark_status_endpoint HTTP/1.1
Host: op.example.org
Content-Type: application/x-www-form-urlencoded

sub=https%3A%2F%2Fopenid.sunet.se%2FRP
&amp;id=https%3A%2F%2Frefeds.org%2Fsirtfi
</pre><a href="#section-7.4.1-5" class="pilcrow">Â¶</a>
</div>
</section>
<section id="section-7.4.2">
          <h4 id="name-status-response">
<a href="#section-7.4.2" class="section-number selfRef">7.4.2. </a><a href="#name-status-response" class="section-name selfRef">Status Response</a>
          </h4>
<p id="section-7.4.2-1">
            A successful response MUST use the HTTP status code 200
            and the content type set to
            <code>application/json</code>,
            to make it clear that the response contains a JSON
            object containing the claim below.<a href="#section-7.4.2-1" class="pilcrow">Â¶</a></p>
<p id="section-7.4.2-2">
            If the response is negative, the response
            SHOULD be produced in accordance with what is defined in
            <a href="#error_response" class="auto internal xref">Section 7.6</a>.<a href="#section-7.4.2-2" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-7.4.2-3">
            <dt id="section-7.4.2-3.1">active</dt>
            <dd style="margin-left: 1.5em" id="section-7.4.2-3.2">
                REQUIRED. Boolean. Whether the Trust Mark is active or not.<a href="#section-7.4.2-3.2" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-7.4.2-4" class="keepWithNext">
                The following is a non-normative example of a response:<a href="#section-7.4.2-4" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.4.2-5">
<pre>
200 OK
Content-Type: application/json

{
  "active": true
}
</pre><a href="#section-7.4.2-5" class="pilcrow">Â¶</a>
</div>
</section>
</section>
</div>
<section id="section-7.5">
        <h3 id="name-federation-historical-keys-">
<a href="#section-7.5" class="section-number selfRef">7.5. </a><a href="#name-federation-historical-keys-" class="section-name selfRef">Federation Historical Keys endpoint</a>
        </h3>
<p id="section-7.5-1">
          Each Federation Entity MAY publish its previously used
          federation public keys at the endpoint
          <code>
            /.well-known/openid-federation-historical-jwks
          </code>.

          The purpose of this endpoint is to provide
          the list of keys previously used by the Federation Entity
          in order to provide non-repudiation of statements signed by
          it after key rotation. This endpoint also discloses the
          reason for the retraction of the keys, whether they were
          expired or revoked, including the reason for the revocation.<a href="#section-7.5-1" class="pilcrow">Â¶</a></p>
<p id="section-7.5-2">
          Note that an expired key can be later additionally marked as
          revoked, to indicate a key compromise event discovered
          after the expiration of the key.<a href="#section-7.5-2" class="pilcrow">Â¶</a></p>
<p id="section-7.5-3">
          The publishing of the historical keys guarantees that Trust Chains
          will remain verifiable and usable as inputs to trust decisions
          after the key expiration, unless the key becomes revoked
          for a security reason.<a href="#section-7.5-3" class="pilcrow">Â¶</a></p>
<section id="section-7.5.1">
          <h4 id="name-federation-historical-keys-r">
<a href="#section-7.5.1" class="section-number selfRef">7.5.1. </a><a href="#name-federation-historical-keys-r" class="section-name selfRef">Federation Historical Keys Request</a>
          </h4>
<p id="section-7.5.1-1">
            The request MUST be an HTTP request using the GET method and
            the <code>https</code> scheme to the well known endpoint
            <code>openid-federation-historical-jwks</code>.<a href="#section-7.5.1-1" class="pilcrow">Â¶</a></p>
<p id="section-7.5.1-2" class="keepWithNext">
              The following is a non-normative example of a
              request:<a href="#section-7.5.1-2" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.5.1-3">
<pre>
GET /.well-known/openid-federation-historical-jwks HTTP/1.1
Host: trust-anchor.example.com
</pre><a href="#section-7.5.1-3" class="pilcrow">Â¶</a>
</div>
</section>
<section id="section-7.5.2">
          <h4 id="name-federation-historical-keys-re">
<a href="#section-7.5.2" class="section-number selfRef">7.5.2. </a><a href="#name-federation-historical-keys-re" class="section-name selfRef">Federation Historical Keys Response</a>
          </h4>
<p id="section-7.5.2-1">
            A successful response MUST use the HTTP status code 200
            and the content type set to
            <code>application/jwk-set+jwt</code>.
            The response is a signed JWT containing the following
            paramenters:<a href="#section-7.5.2-1" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-7.5.2-2">
            <dt id="section-7.5.2-2.1">iss</dt>
            <dd style="margin-left: 1.5em" id="section-7.5.2-2.2">
                REQUIRED. String.
                URL corresponding to the Federation Entity Identifier.<a href="#section-7.5.2-2.2" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-7.5.2-2.3">iat</dt>
            <dd style="margin-left: 1.5em" id="section-7.5.2-2.4">
                REQUIRED. Number. When the signed JWT was issued,
                using the time format defined for the
                <code>iat</code> claim in
                <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span>.<a href="#section-7.5.2-2.4" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-7.5.2-2.5">jwks</dt>
            <dd style="margin-left: 1.5em" id="section-7.5.2-2.6">
              <p id="section-7.5.2-2.6.1">
                REQUIRED. A
                <span><a href="#RFC7517" class="internal xref">JSON Web Key Set (JWKS)</a> [<a href="#RFC7517" class="cite xref">RFC7517</a>]</span>
                representing the public Federation Entity signing keys.<a href="#section-7.5.2-2.6.1" class="pilcrow">Â¶</a></p>
<p id="section-7.5.2-2.6.2">
                  The JWK Set in the <code>jwks</code> claim,
                  in addition to what is defined in
                  <span><a href="#RFC7517" class="internal xref">JSON Web Key Set (JWKS)</a> [<a href="#RFC7517" class="cite xref">RFC7517</a>]</span>
                  also adopts the following claims:<a href="#section-7.5.2-2.6.2" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-7.5.2-2.6.3">
                <dt id="section-7.5.2-2.6.3.1">kid</dt>
                <dd style="margin-left: 1.5em" id="section-7.5.2-2.6.3.2">
                      REQUIRED. Parameter is used to match a specific key.
                      It is RECOMMENDED that the Key ID be the
                      JWK Thumbprint <span>[<a href="#RFC7638" class="cite xref">RFC7638</a>]</span> using
                      the SHA-256 hash function of the key.<a href="#section-7.5.2-2.6.3.2" class="pilcrow">Â¶</a>
</dd>
                <dd class="break"></dd>
<dt id="section-7.5.2-2.6.3.3">iat</dt>
                <dd style="margin-left: 1.5em" id="section-7.5.2-2.6.3.4">
                      REQUIRED. Time at which the JWK was issued,
                      using the time format defined for the
                      <code>iat</code> claim in
                      <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span>.<a href="#section-7.5.2-2.6.3.4" class="pilcrow">Â¶</a>
</dd>
                <dd class="break"></dd>
<dt id="section-7.5.2-2.6.3.5">exp</dt>
                <dd style="margin-left: 1.5em" id="section-7.5.2-2.6.3.6">
                      REQUIRED. Expiration time,
                      using the time format defined for the
                      <code>exp</code> claim in
                      <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span>,
                      on or after which the JWK MUST NOT be considered as valid.<a href="#section-7.5.2-2.6.3.6" class="pilcrow">Â¶</a>
</dd>
                <dd class="break"></dd>
<dt id="section-7.5.2-2.6.3.7">revoked</dt>
                <dd style="margin-left: 1.5em" id="section-7.5.2-2.6.3.8">
                  <p id="section-7.5.2-2.6.3.8.1">
                      OPTIONAL. JSON object that contains the
                      properties of the revocation, defined below.<a href="#section-7.5.2-2.6.3.8.1" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-7.5.2-2.6.3.8.2">
                    <dt id="section-7.5.2-2.6.3.8.2.1">revoked_at</dt>
                    <dd style="margin-left: 1.5em" id="section-7.5.2-2.6.3.8.2.2">
                          REQUIRED. Time at which the key was revoked
                          or must be considered revoked,
                          using the time format defined for the
                          <code>iat</code> claim in
                      <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span>.<a href="#section-7.5.2-2.6.3.8.2.2" class="pilcrow">Â¶</a>
</dd>
                    <dd class="break"></dd>
<dt id="section-7.5.2-2.6.3.8.2.3">reason</dt>
                    <dd style="margin-left: 1.5em" id="section-7.5.2-2.6.3.8.2.4">
                          REQUIRED. Human readable value
                          that identifies the reason
                          for the key revocation, as defined in
                          Section 5.3.1 of <span>[<a href="#RFC5280" class="cite xref">RFC5280</a>]</span>.<a href="#section-7.5.2-2.6.3.8.2.4" class="pilcrow">Â¶</a>
</dd>
                    <dd class="break"></dd>
<dt id="section-7.5.2-2.6.3.8.2.5">reason_code</dt>
                    <dd style="margin-left: 1.5em" id="section-7.5.2-2.6.3.8.2.6">
                          REQUIRED. Integer that identifies the reason
                          for the key revocation, as defined in
                          Section 5.3.1 of <span>[<a href="#RFC5280" class="cite xref">RFC5280</a>]</span>.<a href="#section-7.5.2-2.6.3.8.2.6" class="pilcrow">Â¶</a>
</dd>
                  <dd class="break"></dd>
</dl>
</dd>
              <dd class="break"></dd>
</dl>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-7.5.2-3" class="keepWithNext">
              The following is a non-normative example of a response, before serialization and adding a signature:<a href="#section-7.5.2-3" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.5.2-4">
<pre>
HTTP/1.1 200 OK
Content-Type: application/jwk-set+jwt

{
    "iss": "https://trust-anchor.federation.example.com",
    "iat": 123972394272,
    "keys":
        [
            {
                "kty":"RSA",
                "n":"5s4qi â€¦",
                "e":"AQAB",
                "kid":"2HnoFS3YnC9tjiCaivhWLVUJ3AxwGGz_98uRFaqMEEs",
                "iat": 123972394872,
                "exp": 123974395972
            },
            {
                "kty":"RSA",
                "n":"ng5jr â€¦",
                "e":"AQAB",
                "kid":"8KnoFS3YnC9tjiCaivhWLVUJ3AxwGGz_98uRFaqMJJr",
                "iat": 123972394872,
                "exp": 123974394972
                "revoked": {
                  "revoked_at": 123972495172,
                  "reason": "keyCompromise",
                  "reason_code": 1
                }
            }
        ]
}
</pre><a href="#section-7.5.2-4" class="pilcrow">Â¶</a>
</div>
</section>
<section id="section-7.5.3">
          <h4 id="name-rationale-for-the-federatio">
<a href="#section-7.5.3" class="section-number selfRef">7.5.3. </a><a href="#name-rationale-for-the-federatio" class="section-name selfRef">Rationale for the Federation Historical Keys endpoint</a>
          </h4>
<p id="section-7.5.3-1">
            The Federation Historical Keys endpoint
            solves the problem of verifying historical
            Trust Chains when the Federation Entity Keys
            are changed, due to expiry or revocation.<a href="#section-7.5.3-1" class="pilcrow">Â¶</a></p>
<p id="section-7.5.3-2">
            The Federation Historical Keys endpoint
            publishes the list of public keys used in the past by a Federation Entity.
            The given public keys are needed by all the Entities
            to verify the Trust Chains evaluated in the past with the
            Federation Entity Keys not published anymore in the Federation Entity's
            Entity Configuration.<a href="#section-7.5.3-2" class="pilcrow">Â¶</a></p>
<p id="section-7.5.3-3">
            Federation Historical Keys endpoint response contains a signed JWT
            that attests all the expired and revoked Federation Entity Keys.<a href="#section-7.5.3-3" class="pilcrow">Â¶</a></p>
<p id="section-7.5.3-4">
            On the basis of the attributes contained in the Entity Statements
            that form a Trust Chain, it MAY be also possible to verify
            the non-federation public keys used in the past by a Leaf for the
            signature operations related to the OpenID Connect
            requests and responses.
            For example an Entity Statement issued for a Leaf
            MAY also include the
            <code>jwks</code> claim,
            respectively in the claims
            <code>metadata</code> or
            <code>metadata_policy</code>.<a href="#section-7.5.3-4" class="pilcrow">Â¶</a></p>
<p id="section-7.5.3-5">
              A simple example: In the following Trust Chain the
              Federation Intermediate attests the Leaf's OpenID Connect
              <code>jwks</code>
              in the Entity Statement issued for the Leaf. The result is
              a Trust Chain that contains the Leaf's OIDC Core jwks,
              needed to verify historical signature on
              request objects, ID Tokens and any other signed JWT issued by the Leaf,
              if it is an RP or an OP.<a href="#section-7.5.3-5" class="pilcrow">Â¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-7.5.3-6">
<li id="section-7.5.3-6.1">
                  an Entity Configuration about the RP published by the RP,<a href="#section-7.5.3-6.1" class="pilcrow">Â¶</a>
</li>
            <li id="section-7.5.3-6.2">
                  an Entity Statement about the RP published by Organization A,
                  with the claim <code>jwks</code> contained in
                  <code>metadata</code> or
                  <code>metadata_policy</code> attesting the
                  Leaf's OpenID Core <code>jwks</code>.<a href="#section-7.5.3-6.2" class="pilcrow">Â¶</a>
</li>
            <li id="section-7.5.3-6.3">
                  an Entity Statement about Organization A published by Federation F.<a href="#section-7.5.3-6.3" class="pilcrow">Â¶</a>
</li>
          </ol>
</section>
</section>
<div id="error_response">
<section id="section-7.6">
        <h3 id="name-generic-error-response">
<a href="#section-7.6" class="section-number selfRef">7.6. </a><a href="#name-generic-error-response" class="section-name selfRef">Generic Error Response</a>
        </h3>
<p id="section-7.6-1">
          If the request was malformed, or some error occurred during
          the processing of the request,
          the response body SHOULD be a JSON object with the content type
          set to <code>application/json</code>.<a href="#section-7.6-1" class="pilcrow">Â¶</a></p>
<p id="section-7.6-2">
          In compliance with
          <span>[<a href="#RFC6749" class="cite xref">RFC6749</a>]</span>, the following
          standardized error format SHOULD be used:<a href="#section-7.6-2" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-7.6-3">
          <dt id="section-7.6-3.1">error</dt>
          <dd style="margin-left: 1.5em" id="section-7.6-3.2">
            <p id="section-7.6-3.2.1">
              REQUIRED. One of the following error codes SHOULD be used.<a href="#section-7.6-3.2.1" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-7.6-3.2.2">
              <dt id="section-7.6-3.2.2.1">invalid_request</dt>
              <dd style="margin-left: 1.5em" id="section-7.6-3.2.2.2">
                  The request is incomplete or does
                  not comply with current specifications.
                  The HTTP response status code SHOULD be 400 (Bad Request).<a href="#section-7.6-3.2.2.2" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-7.6-3.2.2.3">invalid_client</dt>
              <dd style="margin-left: 1.5em" id="section-7.6-3.2.2.4">
                  The Client can not be authorized or is not
                  a valid participant of the federation.
                  The HTTP response status code SHOULD be 401 (Unauthorized).<a href="#section-7.6-3.2.2.4" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-7.6-3.2.2.5">not_found</dt>
              <dd style="margin-left: 1.5em" id="section-7.6-3.2.2.6">
                  The requested Entity Identifier is "not found".
                  The HTTP response status code SHOULD be 404 (Not Found).<a href="#section-7.6-3.2.2.6" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-7.6-3.2.2.7">server_error</dt>
              <dd style="margin-left: 1.5em" id="section-7.6-3.2.2.8">
                  The server encountered an unexpected
                  condition that prevented it from fulfilling the request.
                  The HTTP response status code SHOULD be one in the 5xx range,
                  like 500 (Internal Server Error).<a href="#section-7.6-3.2.2.8" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-7.6-3.2.2.9">temporarily_unavailable</dt>
              <dd style="margin-left: 1.5em" id="section-7.6-3.2.2.10">
                  The server hosting the federation endpoint
                  is currently unable to handle
                  the request due to a temporary overloading or maintenance.
                  The HTTP response status code SHOULD be 503 (Service Unavailable).<a href="#section-7.6-3.2.2.10" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-7.6-3.2.2.11">unsupported_parameter</dt>
              <dd style="margin-left: 1.5em" id="section-7.6-3.2.2.12">
                  The server does not support the requested parameter.<a href="#section-7.6-3.2.2.12" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
</dl>
</dd>
          <dd class="break"></dd>
<dt id="section-7.6-3.3">error_description</dt>
          <dd style="margin-left: 1.5em" id="section-7.6-3.4">
              REQUIRED. A human-readable short text describing the error.<a href="#section-7.6-3.4" class="pilcrow">Â¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-7.6-4" class="keepWithNext">
            The following is a non-normative example of an error response:<a href="#section-7.6-4" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.6-5">
<pre>
400 Bad request
Content-Type: application/json

{
  "error": "invalid_request",
  "error_description":
    "Required request parameter [sub] was missing."
}
</pre><a href="#section-7.6-5" class="pilcrow">Â¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="resolving_trust">
<section id="section-8">
      <h2 id="name-resolving-trust-chain-and-m">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-resolving-trust-chain-and-m" class="section-name selfRef">Resolving Trust Chain and Metadata</a>
      </h2>
<p id="section-8-1">
        An Entity (e.g., the consumer) that wants to establish trust with a
        remote peer MUST have the remote peer's Entity Identifier and a list of
        Entity Identifiers of Trust Anchors together with the public version
        of their signing keys. The consumer will first have to fetch
        sufficient Entity Statements to establish at least one chain of trust
        from the remote peer to one or more of the configured Trust Anchors.
        After that, the Entity MUST validate the Trust Chains independently,
        and if there are multiple valid Trust Chains and if the
        application demands it, choose one.<a href="#section-8-1" class="pilcrow">Â¶</a></p>
<div id="fetching-es">
<section id="section-8.1">
        <h3 id="name-fetching-entity-statements-">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-fetching-entity-statements-" class="section-name selfRef">Fetching Entity Statements to Establish a Trust Chain</a>
        </h3>
<p id="section-8.1-1">
          Depending on the circumstances, the consumer MAY be
          handed the remote peer's Entity Configuration, or it may
          have to fetch it by itself. If it needs to fetch it, it will use the
          process described in <a href="#federation_configuration" class="auto internal xref">Section 6</a>
          based on the Entity Identifier of the remote peer.<a href="#section-8.1-1" class="pilcrow">Â¶</a></p>
<p id="section-8.1-2">
          The next step is to iterate through the list of
          Intermediates listed in
          <code>authority_hints</code>, ignoring the authority
          hints that end in an unknown Trust Anchor, requesting an Entity
          Configuration from each of the Intermediates.
          If the received Entity Configuration contains an authority hint, this
          process is repeated.<a href="#section-8.1-2" class="pilcrow">Â¶</a></p>
<p id="section-8.1-3">
          With the list of all Intermediates and the Trust Anchor, the respective
          federation API (see <a href="#federation_endpoints" class="auto internal xref">Section 7</a>) is used to fetch Entity
          Statements about the Intermediates and the remote peer.<a href="#section-8.1-3" class="pilcrow">Â¶</a></p>
<p id="section-8.1-4">
          Note: The consumer SHOULD NOT attempt to fetch
          Entity Statements it already has fetched during this
          process (loop prevention).<a href="#section-8.1-4" class="pilcrow">Â¶</a></p>
<p id="section-8.1-5">
          A successful operation will return one or more lists of
          Entity Statements. Each of the lists terminating in a self-signed
          Entity Statement is issued by a Trust Anchor.<a href="#section-8.1-5" class="pilcrow">Â¶</a></p>
<p id="section-8.1-6">
          If there is no path from the remote peer to at least one of the
          trusted Trust Anchors, then the list will be empty and there is no
          way of establishing trust in the remote peer's information. How the
          consumer deals with this is out of scope for this specification.<a href="#section-8.1-6" class="pilcrow">Â¶</a></p>
<p id="section-8.1-7" class="keepWithNext">
          Resolving Trust Chain and Metadata: the perspective of an OP.<a href="#section-8.1-7" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-8.1-8">
<pre>
+-----+                            +-----+                                    +-------------+
| RP  |                            | OP  |                                    | TrustAnchor |
+-----+                            +-----+                                    +-------------+
   |                                  |                                              |
   |     Entity Configuration Request |                                              |
   |&lt;---------------------------------|                                              |
   |                                  |                                              |
   | Entity Configuration Response    |                                              |
   |---------------------------------&gt;|                                              |
   |                                  |                                              |
   |                                  | Evaluates authority_hints                    |
   |                                  |--------------------------                    |
   |                                  |                         |                    |
   |                                  |&lt;-------------------------                    |
   |                                  |                                              |
   |                                  | Entity Configuration Request                 |
   |                                  |---------------------------------------------&gt;|
   |                                  |                                              |
   |                                  |                Entity Configuration Response |
   |                                  |&lt;---------------------------------------------|
   |                                  |                                              |
   |                                  | Obtains Fetch endpoint                       |
   |                                  |-----------------------                       |
   |                                  |                      |                       |
   |                                  |&lt;----------------------                       |
   |                                  |                                              |
   |                                  | Request Entity Statement about the RP        |
   |                                  |---------------------------------------------&gt;|
   |                                  |                                              |
   |                                  |                Entity Statement about the RP |
   |                                  |&lt;---------------------------------------------|
   |                                  |                                              |
   |                                  | Evaluates the Trust Chain                    |
   |                                  |--------------------------                    |
   |                                  |                         |                    |
   |                                  |&lt;-------------------------                    |
   |                                  |                                              |
   |                                  | Applies metadata policies                    |
   |                                  |--------------------------                    |
   |                                  |                         |                    |
   |                                  |&lt;-------------------------                    |
   |                                  |                                              |
   |                                  | Derivates the RP's final metadata            |
   |                                  |----------------------------------            |
   |                                  |                                 |            |
   |                                  |&lt;---------------------------------            |
   |                                  |                                              |
</pre><a href="#section-8.1-8" class="pilcrow">Â¶</a>
</div>
</section>
</div>
<div id="trust_chain_validation">
<section id="section-8.2">
        <h3 id="name-validating-a-trust-chain">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-validating-a-trust-chain" class="section-name selfRef">Validating a Trust Chain</a>
        </h3>
<p id="section-8.2-1">
          As described in <a href="#trust_chain" class="auto internal xref">Section 3.2</a>,
          a Trust Chain consists of an ordered list of Entity
          Statements. So whichever way the consumer has acquired the set of
          Entity Statements, it MUST now verify that it is a proper Trust Chain
          using the rules laid out in that section.<a href="#section-8.2-1" class="pilcrow">Â¶</a></p>
<p id="section-8.2-2">
          To validate the chain, the following MUST be done:<a href="#section-8.2-2" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.2-3.1">
            <p id="section-8.2-3.1.1">
              For each Entity Statement ES[j] j=i,..,0:<a href="#section-8.2-3.1.1" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.2-3.1.2.1">
                  Verify that the statement contains all the required claims.<a href="#section-8.2-3.1.2.1" class="pilcrow">Â¶</a>
</li>
              <li class="normal" id="section-8.2-3.1.2.2">
                  Verify that <code>iat</code> has a value in the
                  past.<a href="#section-8.2-3.1.2.2" class="pilcrow">Â¶</a>
</li>
              <li class="normal" id="section-8.2-3.1.2.3">
                  Verify that <code>exp</code> has a value that
                  is in the future.<a href="#section-8.2-3.1.2.3" class="pilcrow">Â¶</a>
</li>
            </ul>
</li>
          <li class="normal" id="section-8.2-3.2">
              For j=0 verify that <code>iss</code> ==
              <code>sub</code>.<a href="#section-8.2-3.2" class="pilcrow">Â¶</a>
</li>
          <li class="normal" id="section-8.2-3.3">
              For j=0,...,i-1: Verify that ES[j]['iss'] == ES[j+1]['sub']<a href="#section-8.2-3.3" class="pilcrow">Â¶</a>
</li>
          <li class="normal" id="section-8.2-3.4">
              For j=0,...,i-1: Verify the signature of ES[j] using a public
              key carried in ES[j+1]['jwks'].<a href="#section-8.2-3.4" class="pilcrow">Â¶</a>
</li>
          <li class="normal" id="section-8.2-3.5">
              For j == 0 verify the signature of ES[0] using a public
              key carried in ES[0]['jwks'].<a href="#section-8.2-3.5" class="pilcrow">Â¶</a>
</li>
          <li class="normal" id="section-8.2-3.6">
              For j == i: verify that a) the issuer matches the configured
              identifier of a Trust Anchor and b) its signature is valid with
              the likewise configured public key of said Trust Anchor.<a href="#section-8.2-3.6" class="pilcrow">Â¶</a>
</li>
        </ul>
<p id="section-8.2-4">
          Verifying the signature is a much more expensive
          operation than verifying the correctness of the statement and the
          timestamps. An implementer MAY therefore choose not to verify the
          signature until all the other checks have been done.<a href="#section-8.2-4" class="pilcrow">Â¶</a></p>
<p id="section-8.2-5">Consumers MAY cache Entity Statements or signature verification
          results for a given time until they expire, per
          <a href="#trust_lifetime" class="auto internal xref">Section 8.4</a>.<a href="#section-8.2-5" class="pilcrow">Â¶</a></p>
<p id="section-8.2-6">
          Note that the second bullet point means that, at each step in the
          Trust Chain resolution, it MUST be verified that the signing JWK is
          also present in the <code>jwks</code>
          statement claim issued by the superior.<a href="#section-8.2-6" class="pilcrow">Â¶</a></p>
</section>
</div>
<section id="section-8.3">
        <h3 id="name-choosing-one-of-the-valid-t">
<a href="#section-8.3" class="section-number selfRef">8.3. </a><a href="#name-choosing-one-of-the-valid-t" class="section-name selfRef">Choosing One of the Valid Trust Chains</a>
        </h3>
<p id="section-8.3-1">
          If multiple valid Trust Chains are found, the consumer will
          need to decide on which one to use.<a href="#section-8.3-1" class="pilcrow">Â¶</a></p>
<p id="section-8.3-2">
          One simple rule would be to prefer a shorter chain over a longer one.<a href="#section-8.3-2" class="pilcrow">Â¶</a></p>
<p id="section-8.3-3">Consumers MAY follow other rules according to local policy.<a href="#section-8.3-3" class="pilcrow">Â¶</a></p>
</section>
<div id="trust_lifetime">
<section id="section-8.4">
        <h3 id="name-calculating-the-expiration-">
<a href="#section-8.4" class="section-number selfRef">8.4. </a><a href="#name-calculating-the-expiration-" class="section-name selfRef">Calculating the Expiration Time of a Trust Chain</a>
        </h3>
<p id="section-8.4-1">
          Each Entity Statement in a Trust Chain is signed and MUST have an
          expiration time (<code>exp</code>) set.
          The expiration time of the whole Trust
          Chain is set to the minimum value of
          (<code>exp</code>) within the chain.<a href="#section-8.4-1" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<section id="section-9">
      <h2 id="name-updating-metadata-key-rollo">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-updating-metadata-key-rollo" class="section-name selfRef">Updating Metadata, Key Rollover, and Revocation</a>
      </h2>
<p id="section-9-1">
        This specification allows for a smooth process of updating metadata
        and public keys.<a href="#section-9-1" class="pilcrow">Â¶</a></p>
<p id="section-9-2">
        As described above in <a href="#trust_lifetime" class="auto internal xref">Section 8.4</a>,
        each Trust Chain has an expiration time.
        A consumer of metadata using this specification MUST support
        refreshing a Trust Chain when it expires.
        How often a consumer SHOULD re-evaluate the Trust Chain depends on
        how quickly the consumer wants to find out that something has changed
        in the Trust Chain.<a href="#section-9-2" class="pilcrow">Â¶</a></p>
<section id="section-9.1">
        <h3 id="name-protocol-key-rollover">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-protocol-key-rollover" class="section-name selfRef">Protocol Key Rollover</a>
        </h3>
<p id="section-9.1-1">
          If a Leaf Entity publishes its public keys in the metadata part
          using <code>jwks</code>, setting an expiration time on
          the self-signed Entity
          Statement can be used to control how often the receiving Entity is
          fetching an updated version of the public key.<a href="#section-9.1-1" class="pilcrow">Â¶</a></p>
</section>
<div id="key_rollover_anchor">
<section id="section-9.2">
        <h3 id="name-key-rollover-for-a-trust-an">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-key-rollover-for-a-trust-an" class="section-name selfRef">Key Rollover for a Trust Anchor</a>
        </h3>
<p id="section-9.2-1">
          A Trust Anchor MUST publish an Entity Configuration about
          itself. The Trust Anchor SHOULD set a reasonable expiration
          time on that Statement, such that the consumers will re-fetch the
          Entity Configuration at reasonable intervals. If the Trust Anchor wants to
          roll over its signing keys, it would have to:<a href="#section-9.2-1" class="pilcrow">Â¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-9.2-2">
<li id="section-9.2-2.1">
              Add the new keys to the <code>jwks</code> representing
              the Trust Anchor's signing keys.<a href="#section-9.2-2.1" class="pilcrow">Â¶</a>
</li>
          <li id="section-9.2-2.2">
              Keep signing the Entity Configuration and the Entity Statements using
              the old keys for a long enough time period to allow all
              Subordinates to have gotten access to the new keys.<a href="#section-9.2-2.2" class="pilcrow">Â¶</a>
</li>
          <li id="section-9.2-2.3">
              Switch to signing with the new keys.<a href="#section-9.2-2.3" class="pilcrow">Â¶</a>
</li>
          <li id="section-9.2-2.4">
              After a reasonable time period, remove the old keys. What is
              regarded as a reasonable time is dependent on the security profile
              and risk assessment of the Trust Anchor.<a href="#section-9.2-2.4" class="pilcrow">Â¶</a>
</li>
        </ol>
</section>
</div>
<div id="TrustAnchorKeys">
<section id="section-9.3">
        <h3 id="name-redundant-retrieval-of-trus">
<a href="#section-9.3" class="section-number selfRef">9.3. </a><a href="#name-redundant-retrieval-of-trus" class="section-name selfRef">Redundant Retrieval of Trust Anchor Keys</a>
        </h3>
<p id="section-9.3-1">
          It is RECOMMENDED that Federation Operators provide a means of retrieving the public keys
          for the Trust Anchors it administers that is independent of those Trust Anchors' Entity Configurations.
          This is intended to provide redundancy in the eventuality of the compromise of
          the Web PKI infrastructure underlying retrieval of public keys from Entity Configurations.<a href="#section-9.3-1" class="pilcrow">Â¶</a></p>
<p id="section-9.3-2">
          The keys retrieved via the independent mechanism specified by the Federation Operator
          SHOULD be compared to those retrieved via the Trust Anchor's Entity Configuration.
          If they do not match, both SHOULD be retrieved again.
          If they still do not match, it is indicative of a security or configuration problem.
          The appropriate remediation steps in that eventuality SHOULD be specified by the Federation Operator.<a href="#section-9.3-2" class="pilcrow">Â¶</a></p>
</section>
</div>
<section id="section-9.4">
        <h3 id="name-revocation">
<a href="#section-9.4" class="section-number selfRef">9.4. </a><a href="#name-revocation" class="section-name selfRef">Revocation</a>
        </h3>
<p id="section-9.4-1">
          Since the consumers are expected to check the Trust Chain at regular,
          reasonably frequent times, this specification does not specify a
          standard revocation process. Specific federations MAY make a
          different choice and will then have to add such a process.<a href="#section-9.4-1" class="pilcrow">Â¶</a></p>
</section>
</section>
<div id="client_registration">
<section id="section-10">
      <h2 id="name-openid-connect-communicatio">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-openid-connect-communicatio" class="section-name selfRef">OpenID Connect Communication</a>
      </h2>
<p id="section-10-1">
        This section describes how the trust framework in this specification
        is used to establish trust between an RP and an OP
        that have no explicit configuration or registration in advance.<a href="#section-10-1" class="pilcrow">Â¶</a></p>
<p id="section-10-2">
        There are two alternative approaches to establish trust between an
        RP and an OP, which we call Automatic and Explicit Registration.
        Members of a federation or a community
        SHOULD agree upon which one to use. While implementations should
        support both methods, deployments MAY choose to disable the use of one
        of them.<a href="#section-10-2" class="pilcrow">Â¶</a></p>
<p id="section-10-3">
        Independent of whether the RP uses Automatic or Explicit Registration,
        the way that the RP learns about the OP is the same.
        It will use the procedure that is
        described in <a href="#resolving_trust" class="auto internal xref">Section 8</a>.<a href="#section-10-3" class="pilcrow">Â¶</a></p>
<div id="automatic">
<section id="section-10.1">
        <h3 id="name-automatic-registration">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-automatic-registration" class="section-name selfRef">Automatic Registration</a>
        </h3>
<p id="section-10.1-1">
          Automatic Registration enables an RP to make Authentication Requests
          without a prior registration step with the OP.
          The OP resolves the RP's Entity Configuration from the Client ID in the Authentication Request,
          following the process defined in <a href="#resolving_trust" class="auto internal xref">Section 8</a>.<a href="#section-10.1-1" class="pilcrow">Â¶</a></p>
<p id="section-10.1-2">
          Automatic Registration has the following characteristics:<a href="#section-10.1-2" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-10.1-3.1">
              In all interactions with the OP, the RP employs its Entity Identifier as the Client ID.
              The OP retrieves the RP's Entity Configuration
              from a URL derived from the Entity Identifier, as
              described in <a href="#federation_configuration" class="auto internal xref">Section 6</a>.<a href="#section-10.1-3.1" class="pilcrow">Â¶</a>
</li>
          <li class="normal" id="section-10.1-3.2">
              Since there is no registration step prior to the Authentication Request,
              the RP MUST NOT be supplied with a Client Secret.
              Instead, the Automatic Registration model requires the RP to use
              asymmetric cryptography to authenticate its requests.<a href="#section-10.1-3.2" class="pilcrow">Â¶</a>
</li>
          <li class="normal" id="section-10.1-3.3">
              The OP MUST publish that it supports a request authentication
              method using the metadata claim
              <code>request_authentication_methods_supported</code>.<a href="#section-10.1-3.3" class="pilcrow">Â¶</a>
</li>
        </ul>
<section id="section-10.1.1">
          <h4 id="name-authentication-request">
<a href="#section-10.1.1" class="section-number selfRef">10.1.1. </a><a href="#name-authentication-request" class="section-name selfRef">Authentication Request</a>
          </h4>
<p id="section-10.1.1-1">
            The Authentication Request is performed by passing a
            Request Object by value as described in Section 6.1 in
            <span><a href="#OpenID.Core" class="internal xref">OpenID Connect Core 1.0</a> [<a href="#OpenID.Core" class="cite xref">OpenID.Core</a>]</span>
            or using pushed authorization as described in
            <span><a href="#RFC9126" class="internal xref">Pushed Authorization Requests</a> [<a href="#RFC9126" class="cite xref">RFC9126</a>]</span>.<a href="#section-10.1.1-1" class="pilcrow">Â¶</a></p>
<div id="UsingAuthzRequestObject">
<section id="section-10.1.1.1">
            <h5 id="name-using-a-request-object">
<a href="#section-10.1.1.1" class="section-number selfRef">10.1.1.1. </a><a href="#name-using-a-request-object" class="section-name selfRef">Using a Request Object</a>
            </h5>
<p id="section-10.1.1.1-1">
              In the case where a Request Object is used, the value of the
              <code>request</code>
              parameter is a JWT whose Claims are the request parameters
              specified in Section 3.1.2 in
              <span><a href="#OpenID.Core" class="internal xref">OpenID Connect Core 1.0</a> [<a href="#OpenID.Core" class="cite xref">OpenID.Core</a>]</span>.
              The JWT MUST be signed and MAY be encrypted.
              The following restrictions apply to the JWT:<a href="#section-10.1.1.1-1" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-10.1.1.1-2">
              <dt id="section-10.1.1.1-2.1">aud</dt>
              <dd style="margin-left: 1.5em" id="section-10.1.1.1-2.2">
                  REQUIRED. The Audience (aud) value MUST be or include
                  the OP's Issuer Identifier URL.<a href="#section-10.1.1.1-2.2" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-10.1.1.1-2.3">iss</dt>
              <dd style="margin-left: 1.5em" id="section-10.1.1.1-2.4">
                  REQUIRED. The claim <code>iss</code>
                  MUST contain the Client Identifier.<a href="#section-10.1.1.1-2.4" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-10.1.1.1-2.5">sub</dt>
              <dd style="margin-left: 1.5em" id="section-10.1.1.1-2.6">
                  MUST NOT be present. This, together with the value of
                  <code>aud</code>,
                  SHOULD make reuse of the statement for
                  <code>private_key_jwt</code>
                  client authentication not feasible.<a href="#section-10.1.1.1-2.6" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-10.1.1.1-2.7">jti</dt>
              <dd style="margin-left: 1.5em" id="section-10.1.1.1-2.8">
                  REQUIRED. JWT ID. A unique identifier for the JWT, which can
                  be used to prevent reuse of the token. These tokens MUST only
                  be used once, unless conditions for reuse were negotiated
                  between the parties; any such negotiation is beyond the scope
                  of this specification.<a href="#section-10.1.1.1-2.8" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-10.1.1.1-2.9">exp</dt>
              <dd style="margin-left: 1.5em" id="section-10.1.1.1-2.10">
                  REQUIRED. Expiration time on or after which the JWT MUST
                  NOT be accepted for processing.<a href="#section-10.1.1.1-2.10" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-10.1.1.1-2.11">iat</dt>
              <dd style="margin-left: 1.5em" id="section-10.1.1.1-2.12">
                  OPTIONAL. Time at which the JWT was issued.<a href="#section-10.1.1.1-2.12" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-10.1.1.1-2.13">trust_chain</dt>
              <dd id="section-10.1.1.1-2.14" style="margin-left: 1.5em">
<div id="trust_chain_param">
                  OPTIONAL. Array containing the sequence of the statements
                  that compose the Trust Chain between the RP that makes
                  the request and the selected Trust Anchor,
                  sorted as shown in <a href="#trust_chain" class="auto internal xref">Section 3.2</a>.
                  Due to the large size of a Trust Chain, it could be necessary
                  to use the HTTP POST method,
                  <code>request_uri</code>
                  or
                  <span><a href="#RFC9126" class="internal xref">Pushed Authorization Request</a> [<a href="#RFC9126" class="cite xref">RFC9126</a>]</span>
                  for the request.<a href="#trust_chain_param" class="pilcrow">Â¶</a>
</div>
            </dd>
<dd class="break"></dd>
</dl>
<p id="section-10.1.1.1-3" class="keepWithNext">
                The following is a non-normative example of the Claims in a
                Request Object before base64url encoding and signing:<a href="#section-10.1.1.1-3" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-10.1.1.1-4">
<pre>
{
  "aud": "https://op.example.org",
  "client_id": "https://rp.example.com",
  "exp": 1589699162,
  "iat": 1589699102,
  "iss": "https://rp.example.com",
  "jti": "4d3ec0f81f134ee9a97e0449be6d32be",
  "nonce": "4LX0mFMxdBjkGmtx7a8WIOnB",
  "redirect_uri": "https://rp.example.com/authz_cb",
  "response_type": "code",
  "scope": "openid profile email address phone",
  "state": "YmX8PM9I7WbNoMnnieKKBiptVW0sP2OZ",
  "trust_chain" : [
    "eyJhbGciOiJSUzI1NiIsImtpZCI6Ims1NEhRdERpYnlHY3M5WldWTWZ2aUhm ...",
    "eyJhbGciOiJSUzI1NiIsImtpZCI6IkJYdmZybG5oQU11SFIwN2FqVW1BY0JS ...",
    "eyJhbGciOiJSUzI1NiIsImtpZCI6IkJYdmZybG5oQU11SFIwN2FqVW1BY0JS ..."
  ]
}
</pre><a href="#section-10.1.1.1-4" class="pilcrow">Â¶</a>
</div>
<p id="section-10.1.1.1-5" class="keepWithNext">
                The following is a non-normative example of an Authentication
                Request using the request parameter (with line wraps within
                values for display purposes only):<a href="#section-10.1.1.1-5" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-10.1.1.1-6">
<pre>
https://server.example.com/authorize?
    redirect_uri=https%3A%2F%2Frp.example.com%2Fauthz_cb
    &amp;scope=openid+profile+email+address+phone
    &amp;response_type=code
    &amp;client_id=https%3A%2F%2Frp.example.com
    &amp;request=eyJhbGciOiJSUzI1NiIsImtpZCI6IlVyMTBiTkt3TXBRSUZvTnQtTkp4RE9PY1hh
      bHppMHNQLWdMSjAwZFJaalEifQ.eyJhdWQiOiJodHRwczovL29wLmV4YW1wbGUub
      3JnIiwiY2xpZW50X2lkIjoiaHR0cHM6Ly9ycC5leGFtcGxlLmNvbSIsImV4cCI6M
      TU4OTY5OTE2MiwiaWF0IjoxNTg5Njk5MTAyLCJpc3MiOiJodHRwczovL3JwLmV4Y
      W1wbGUuY29tIiwianRpIjoiNGQzZWMwZjgxZjEzNGVlOWE5N2UwNDQ5YmU2ZDMyY
      mUiLCJub25jZSI6IjRMWDBtRk14ZEJqa0dtdHg3YThXSU9uQiIsInJlZGlyZWN0X
      3VyaSI6Imh0dHBzOi8vcnAuZXhhbXBsZS5jb20vYXV0aHpfY2IiLCJyZXNwb25zZ
      V90eXBlIjoiY29kZSIsInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwgYWRkc
      mVzcyBwaG9uZSIsInN0YXRlIjoiWW1YOFBNOUk3V2JOb01ubmllS0tCaXB0Vlcwc
      1AyT1oiLCJzdWIiOiJodHRwczovL3JwLmV4YW1wbGUuY29tIiwidHJ1c3RfY2hha
      W4iOlsiZXlKaGJHY2lPaUpTVXpJMU5pSXNJbXRwWkNJNkltczFORWhSZEVScFlub
      EhZM001V2xkV1RXWjJhVWhtIC4uLiIsImV5SmhiR2NpT2lKU1V6STFOaUlzSW10c
      FpDSTZJa0pZZG1aeWJHNW9RVTExU0ZJd04yRnFWVzFCWTBKUyAuLi4iLCJleUpoY
      kdjaU9pSlNVekkxTmlJc0ltdHBaQ0k2SWtKWWRtWnliRzVvUVUxMVNGSXdOMkZxV
      lcxQlkwSlMgLi4uIl19.GQyzPEdaJ4qOzeUJyh-wU04GfiyFZTa2afk_VPX3mFmd
      gLl1VTzlapbSipyNLGNu6M_iQup6zYsAdfZSBWjNN-ARws0A6qJfb06uaR2ILoE-
      UtIKYJ_4NSnh3SLA_rW_MFS-flmZOf-YDvarbShh0-ashcH5L_D7ZGwDSTMlw4ll
      laiELKqggdXpVG6vz6itYOvTLo-2vipFeTSK0bZYs22ozAv6-npZlQO2_IZbvyXv
      S6IAgyw9dRIYZSUXoS2g0nJgBIMsnor2CFY79VH2iRMwi34K2R3hGA9jHqDtom5R
      DR5NraOtD06F5gPgB4vORG567hFkTq7uhtnz0W_21A
</pre><a href="#section-10.1.1.1-6" class="pilcrow">Â¶</a>
</div>
<div id="AuthzRequestProcessing">
<section id="section-10.1.1.1.1">
              <h6 id="name-processing-the-authenticati">
<a href="#section-10.1.1.1.1" class="section-number selfRef">10.1.1.1.1. </a><a href="#name-processing-the-authenticati" class="section-name selfRef">Processing the Authentication Request</a>
              </h6>
<p id="section-10.1.1.1.1-1">
                When the OP receives an incoming Authentication Request,
                the OP supports OpenID Connect Federation, the incoming
                Client ID
                is a valid URL, and the OP does not have the Client ID
                registered as a known
                client, then the OP SHOULD resolve the Trust
                Chains related to the requestor.<a href="#section-10.1.1.1.1-1" class="pilcrow">Â¶</a></p>
<p id="section-10.1.1.1.1-2">
                An RP MAY present to the OP a Trust Chain related to itself,
                using the <span><a href="#trust_chain_param" class="internal xref">trust_chain</a> (<a href="#trust_chain_param" class="auto internal xref">Section 10.1.1.1</a>)</span>
                parameter.

                If the OP doesn't have a valid registration for the RP or
                its registration has expired, the OP MAY use the received
                Trust Chain as a hint for which path to take from the
                Leaf Entity to the Trust Anchor.
                The OP MAY evaluate the statements in the
                <code>trust_chain</code>
                to make its Federation Entity Discovery procedure more efficient,
                especially if the RP shows more than a single authority hint in
                its Entity Configuration.

                If the OP already has a valid registration for the RP, it MAY
                use the received Trust Chain to update the RP's registration.

                Whenever the OP uses a Trust Chain submitted by an RP, the
                OP MUST fully verify it, with every statement contained in it.

                A Trust Chain may be relied upon by the OP because it has validated
                all of its statements. This is true whether these statements
                are retrieved from their URLs or whether they
                are provided via the <code>trust_chain</code>
                parameter.<a href="#section-10.1.1.1.1-2" class="pilcrow">Â¶</a></p>
<div id="TrustChainParamAbsent">
<p id="section-10.1.1.1.1-3">
                If the RP doesn't include the
                <span><a href="#trust_chain_param" class="internal xref">trust_chain</a> (<a href="#trust_chain_param" class="auto internal xref">Section 10.1.1.1</a>)</span>
                in the request or the OP doesn't support this feature, it then MUST
                validate the possible Trust Chains, starting with the RP's Entity
                Configuration as described in <a href="#fetching-es" class="auto internal xref">Section 8.1</a>,
                and resolve the RP metadata with type
                <code>openid_relying_party</code>.<a href="#section-10.1.1.1.1-3" class="pilcrow">Â¶</a></p>
</div>
<p id="section-10.1.1.1.1-4">
                The OP SHOULD furthermore consider the resolved metadata of the
                RP
                and verify that it complies with the client metadata
                specification
                in <span><a href="#OpenID.Registration" class="internal xref">OpenID Connect Dynamic
                Client
                Registration 1.0</a> [<a href="#OpenID.Registration" class="cite xref">OpenID.Registration</a>]</span>.<a href="#section-10.1.1.1.1-4" class="pilcrow">Â¶</a></p>
<p id="section-10.1.1.1.1-5">
                Once the OP has the RP's metadata, it can verify that the client
                was actually the one sending the Authentication Request by
                verifying the signature of the Request Object using the key
                material the client published through its metadata (underneath
                <code>metadata/openid_relying_party</code>).<a href="#section-10.1.1.1.1-5" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<section id="section-10.1.1.2">
            <h5 id="name-using-pushed-authorization">
<a href="#section-10.1.1.2" class="section-number selfRef">10.1.1.2. </a><a href="#name-using-pushed-authorization" class="section-name selfRef">Using Pushed Authorization</a>
            </h5>
<p id="section-10.1.1.2-1">
              <span><a href="#RFC9126" class="internal xref">Pushed Authorization Requests</a> [<a href="#RFC9126" class="cite xref">RFC9126</a>]</span>
              provide an
              interoperable way to push the payload of a Request Object
              directly to the AS in exchange for a
              <code>request_uri</code>.<a href="#section-10.1.1.2-1" class="pilcrow">Â¶</a></p>
<p id="section-10.1.1.2-2">
              When it comes to request authentication, the applicable
              methods are four:<a href="#section-10.1.1.2-2" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-10.1.1.2-3.1">Using a JWT for Client authentication as described
                  for <code>private_key_jwt</code> in Section 9
                  of
                  <span><a href="#OpenID.Core" class="internal xref">OpenID Connect Core 1.0</a> [<a href="#OpenID.Core" class="cite xref">OpenID.Core</a>]</span>.<a href="#section-10.1.1.2-3.1" class="pilcrow">Â¶</a>
</li>
              <li class="normal" id="section-10.1.1.2-3.2">
                  mTLS as described in Section 2.2 of
                  <span>[<a href="#RFC8705" class="cite xref">RFC8705</a>]</span>
                  based on self-signed certificates.
                  In this case, the self-signed certificate MUST be present as
                  the value of an <code>x5c</code>
                  claim for one key in the JWK Set describing
                  the RP's keys.<a href="#section-10.1.1.2-3.2" class="pilcrow">Â¶</a>
</li>
              <li class="normal" id="section-10.1.1.2-3.3">
                  mTLS as described in Section 2.1 of
                  <span>[<a href="#RFC8705" class="cite xref">RFC8705</a>]</span>
                  based on public key infrastructure (PKI).<a href="#section-10.1.1.2-3.3" class="pilcrow">Â¶</a>
</li>
              <li class="normal" id="section-10.1.1.2-3.4">
                  A request object as described in Section 6 of
                  <span><a href="#OpenID.Core" class="internal xref">OpenID Connect Core 1.0</a> [<a href="#OpenID.Core" class="cite xref">OpenID.Core</a>]</span><a href="#section-10.1.1.2-3.4" class="pilcrow">Â¶</a>
</li>
            </ul>
<p id="section-10.1.1.2-4">
              Note that if mTLS is used, TLS client authentication MUST be
              configured, and, in the case of self-signed certificates, the server must
              omit the certificate chain validation.<a href="#section-10.1.1.2-4" class="pilcrow">Â¶</a></p>
<p id="section-10.1.1.2-5">Using the example above, a request could look like this:<a href="#section-10.1.1.2-5" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-10.1.1.2-6">
<pre>
POST /par HTTP/1.1
Host: op.example.org
Content-Type: application/x-www-form-urlencoded

redirect_uri=https%3A%2F%2Frp.example.com%2Fauthz_cb
&amp;scope=openid+profile+email+address+phone
&amp;response_type=code
&amp;nonce=4LX0mFMxdBjkGmtx7a8WIOnB
&amp;state=YmX8PM9I7WbNoMnnieKKBiptVW0sP2OZ
&amp;client_id=https%3A%2F%2Frp.example.com
&amp;client_assertion_type=urn%3Aietf%3Aparams%3Aoauth%3A
  client-assertion-type%3Ajwt-bearer
&amp;client_assertion=eyJhbGciOiJSUzI1NiIsImtpZCI6ImRVTjJ
  hMDF3Umtoa1NXcGxRVGh2Y1ZCSU5VSXdUVWRPVUZVMlRtVnJTbW
  hFUVhnelpYbHBUemRRTkEifQ.eyJzdWIiOiAiaHR0cHM6Ly9ycC
  5leGFtcGxlLmNvbSIsICJpc3MiOiAiaHR0cHM6Ly9ycC5leGFtc
  GxlLmNvbSIsICJpYXQiOiAxNTg5NzA0NzAxLCAiZXhwIjogMTU4
  OTcwNDc2MSwgImF1ZCI6ICJodHRwczovL29wLmV4YW1wbGUub3J
  nL2F1dGhvcml6YXRpb24iLCAianRpIjogIjM5ZDVhZTU1MmQ5Yz
  Q4ZjBiOTEyZGM1NTY4ZWQ1MGQ2In0.oUt9Knx_lxb4V2S0tyNFH
  CNZeP7sImBy5XDsFxv1cUpGkAojNXSy2dnU5HEzscMgNW4wguz6
  KDkC01aq5OfN04SuVItS66bsx0h4Gs7grKAp_51bClzreBVzU4g
  _-dFTgF15T9VLIgM_juFNPA_g4Lx7Eb5r37rWTUrzXdmfxeou0X
  FC2p9BIqItU3m9gmH0ojdBCUX5Up0iDsys6_npYomqitAcvaBRD
  PiuUBa5Iar9HVR-H7FMAr7aq7s-dH5gx2CHIfM3-qlc2-_Apsy0
  BrQl6VePR6j-3q6JCWvNw7l4_F2UpHeanHb31fLKQbK-1yoXDNz
  DwA7B0ZqmuSmMFQ</pre><a href="#section-10.1.1.2-6" class="pilcrow">Â¶</a>
</div>
<section id="section-10.1.1.2.1">
              <h6 id="name-processing-the-authenticatio">
<a href="#section-10.1.1.2.1" class="section-number selfRef">10.1.1.2.1. </a><a href="#name-processing-the-authenticatio" class="section-name selfRef">Processing the Authentication Request</a>
              </h6>
<p id="section-10.1.1.2.1-1">
                All the assumptions and requirements already defined in
                <a href="#AuthzRequestProcessing" class="auto internal xref">Section 10.1.1.1.1</a>
                also apply to <span><a href="#RFC9126" class="internal xref">Pushed Authorization Requests</a> [<a href="#RFC9126" class="cite xref">RFC9126</a>]</span>.<a href="#section-10.1.1.2.1-1" class="pilcrow">Â¶</a></p>
<p id="section-10.1.1.2.1-2">
                Once the OP has the RP's metadata, it can verify the client
                using the keys published underneath the
                <code>metadata/openid_relying_party</code> element.
                This is where it diverges depending on which client
                authentication method was used.<a href="#section-10.1.1.2.1-2" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-10.1.1.2.1-3">
                <dt id="section-10.1.1.2.1-3.1">private_key_jwt</dt>
                <dd style="margin-left: 1.5em" id="section-10.1.1.2.1-3.2">
                    If this method is used, then the OP will try to verify the
                    signature of the signed JWT using the key material published
                    by the RP in its metadata. If the authentication is
                    successful, then the registration is regarded as correct.<a href="#section-10.1.1.2.1-3.2" class="pilcrow">Â¶</a>
</dd>
                <dd class="break"></dd>
<dt id="section-10.1.1.2.1-3.3">tls_client_auth</dt>
                <dd style="margin-left: 1.5em" id="section-10.1.1.2.1-3.4">
                    If mTLS is used and the certificate used was not
                    self-signed, then the Subject Alternative Name of the
                    certificate
                    MUST match the Entity Identifier of the RP.<a href="#section-10.1.1.2.1-3.4" class="pilcrow">Â¶</a>
</dd>
                <dd class="break"></dd>
<dt id="section-10.1.1.2.1-3.5">self_signed_tls_client_auth</dt>
                <dd style="margin-left: 1.5em" id="section-10.1.1.2.1-3.6">
                    If mTLS is using a self-signed
                    certificate, then the certificate MUST be present as the
                    value
                    of an <code>x5c</code>
                    claim for one key in the JWK Set describing the RP's
                    keys.<a href="#section-10.1.1.2.1-3.6" class="pilcrow">Â¶</a>
</dd>
              <dd class="break"></dd>
</dl>
</section>
</section>
</section>
<div id="AuthenticationError">
<section id="section-10.1.2">
          <h4 id="name-authentication-error-respon">
<a href="#section-10.1.2" class="section-number selfRef">10.1.2. </a><a href="#name-authentication-error-respon" class="section-name selfRef">Authentication Error Response</a>
          </h4>
<p id="section-10.1.2-1">
            If the OP fails to establish trust with the RP, it SHOULD use an
            appropriate error code and an
            <code>error_description</code>
            that aids the RP in understanding what is wrong.<a href="#section-10.1.2-1" class="pilcrow">Â¶</a></p>
<p id="section-10.1.2-2">
            In addition to the error codes defined in Section 3.1.2.6 of OpenID
            Connect Core, this specification also defines the following error
            codes:<a href="#section-10.1.2-2" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-10.1.2-3">
            <dt id="section-10.1.2-3.1">missing_trust_anchor</dt>
            <dd style="margin-left: 1.5em" id="section-10.1.2-3.2">
                No trusted Trust Anchor could be found.<a href="#section-10.1.2-3.2" class="pilcrow">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.2-3.3">validation_failed</dt>
            <dd style="margin-left: 1.5em" id="section-10.1.2-3.4">
                Trust chain validation failed.<a href="#section-10.1.2-3.4" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-10.1.2-4" class="keepWithNext">
              The following is a non-normative example error response:<a href="#section-10.1.2-4" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-10.1.2-5">
<pre>
HTTP/1.1 302 Found
  Location: https://client.example.org/cb?
    error=missing_trust_anchor
    &amp;error_description=
      Could%20not%20find%20a%20trusted%20anchor
    &amp;state=af0ifjsldkj
</pre><a href="#section-10.1.2-5" class="pilcrow">Â¶</a>
</div>
</section>
</div>
<div id="AutomaticRegistrationOtherUses">
<section id="section-10.1.3">
          <h4 id="name-possible-other-uses-of-auto">
<a href="#section-10.1.3" class="section-number selfRef">10.1.3. </a><a href="#name-possible-other-uses-of-auto" class="section-name selfRef">Possible Other Uses of Automatic Registration</a>
          </h4>
<p id="section-10.1.3-1">
            Note that we anticipate that Automatic Registration could be employed
            for use cases beyond OpenID Connect Federation.
            If used with pure OAuth 2.0, for instance,
            Automatic Registration would occur during Authorization Requests.
            If for a particular such use case, the client does not need to be securely identified,
            then the requirement for signed requests could be relaxed.<a href="#section-10.1.3-1" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="explicit">
<section id="section-10.2">
        <h3 id="name-explicit-registration">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-explicit-registration" class="section-name selfRef">Explicit Registration</a>
        </h3>
<p id="section-10.2-1">
          This method involves performing an explicit registration step for a new client
          before the RP interacts with an OP for the first time,
          similar to the process specified by
          <span><a href="#OpenID.Registration" class="internal xref">OpenID Connect Dynamic Client Registration 1.0</a> [<a href="#OpenID.Registration" class="cite xref">OpenID.Registration</a>]</span>,
          but where the client registration request contains the Entity Configuration
          or an entire Trust Chain.
   <a href="#ExplicitRegExample" class="auto internal xref">Appendix A.3.2</a> contains an example using explicit client registration.<a href="#section-10.2-1" class="pilcrow">Â¶</a></p>
<div id="Clireg">
<section id="section-10.2.1">
          <h4 id="name-client-registration">
<a href="#section-10.2.1" class="section-number selfRef">10.2.1. </a><a href="#name-client-registration" class="section-name selfRef">Client Registration</a>
          </h4>
<div id="Cliregreq">
<section id="section-10.2.1.1">
            <h5 id="name-client-registration-request">
<a href="#section-10.2.1.1" class="section-number selfRef">10.2.1.1. </a><a href="#name-client-registration-request" class="section-name selfRef">Client Registration Request</a>
            </h5>
<p id="section-10.2.1.1-1">
              An OP that supports OpenID Dynamic Client Registration as extended
              by this specification, signals this by having the claim
              <code>federation_registration_endpoint</code>
              in the OP's metadata.<a href="#section-10.2.1.1-1" class="pilcrow">Â¶</a></p>
<p id="section-10.2.1.1-2">
              Given that the OP supports Explicit Registration, the RP
              progresses as follows:<a href="#section-10.2.1.1-2" class="pilcrow">Â¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-10.2.1.1-3">
<li id="section-10.2.1.1-3.1">
                  Once it has a list of acceptable Trust Anchors to the OP,
                  it MUST choose the subset it wants to progress with. This
                  subset can be as small as one Trust Anchor, but it can also
                  contain more than one.<a href="#section-10.2.1.1-3.1" class="pilcrow">Â¶</a>
</li>
              <li id="section-10.2.1.1-3.2">
                  Using this subset of Trust Anchors, the RP will choose a set of
                  <code>authority_hints</code>
                  from the hints that are available to it. Each hint MUST,
                  when used as a starting point for Trust Chain collection,
                  lead to at least one of the Trust Anchors in the subset.<a href="#section-10.2.1.1-3.2" class="pilcrow">Â¶</a>
</li>
              <li id="section-10.2.1.1-3.3">
                  The RP will now construct its Entity Configuration
                  where the metadata statement chosen is influenced by the OP's
                  metadata and where the
                  <code>authority_hints</code>
                  included are picked by the process described above.<a href="#section-10.2.1.1-3.3" class="pilcrow">Â¶</a>
</li>
              <li id="section-10.2.1.1-3.4">
                  The RP MAY include its Entity Configuration
                  in a Trust Chain regarding itself.
                  The Registration Request will contain an
                  array containing the sequence of the
                  statements that compose the Trust Chain
                  between the RP that makes the request and the
                  selected Trust Anchor.<a href="#section-10.2.1.1-3.4" class="pilcrow">Â¶</a>
</li>
              <li id="section-10.2.1.1-3.5">
                  The Entity Configuration, or the entire Trust Chain,
                  is sent, using POST, to the
                  <code>federation_registration_endpoint</code>
                  defined in this document.
   There are no parameters in the POST;
   the Entity Configuration or Trust Chain is the entire POST body.<a href="#section-10.2.1.1-3.5" class="pilcrow">Â¶</a>
</li>
              <li id="section-10.2.1.1-3.6">
                  The content type of the Registration Request MUST be set to
                  <code>application/entity-statement+jwt</code>
                  if it contains only the Entity Configuration of the
                  requestor. Otherwise, if it contains the Trust Chain, the
                  content type of the Registration Request MUST be set to
                  <code>application/trust-chain+json</code>.<a href="#section-10.2.1.1-3.6" class="pilcrow">Â¶</a>
</li>
            </ol>
</section>
</div>
<div id="cliregresp">
<section id="section-10.2.1.2">
            <h5 id="name-client-registration-respons">
<a href="#section-10.2.1.2" class="section-number selfRef">10.2.1.2. </a><a href="#name-client-registration-respons" class="section-name selfRef">Client Registration Response</a>
            </h5>
<section id="section-10.2.1.2.1">
              <h6 id="name-op-constructing-the-respons">
<a href="#section-10.2.1.2.1" class="section-number selfRef">10.2.1.2.1. </a><a href="#name-op-constructing-the-respons" class="section-name selfRef">OP Constructing the Response</a>
              </h6>
<ol start="1" type="1" class="normal type-1" id="section-10.2.1.2.1-1">
<li id="section-10.2.1.2.1-1.1">
                    After the OP receives the registration request, it
                    checks if this contains an Entity Configuration or an
                    entire Trust Chain.<a href="#section-10.2.1.2.1-1.1" class="pilcrow">Â¶</a>
</li>
                <li id="section-10.2.1.2.1-1.2">
                    If the request contains an Entity Configuration, the OP
                    collects and
                    evaluates the Trust Chains starting with the
                    <code>authority_hints</code>
                    in the Entity Configuration of the requestor.
                    After it has verified at least one Trust Chain, it
                    MUST verify that the signature on the received registration
                    request is correct.
                    If the OP finds more than one acceptable Trust Chain,
                    it MUST choose one Trust Anchor from those chains as the one it will
                    proceed with.<a href="#section-10.2.1.2.1-1.2" class="pilcrow">Â¶</a>
</li>
                <li id="section-10.2.1.2.1-1.3">
                    If the request contains a Trust Chain,
                    the OP MAY evaluate the statements in the Trust Chain
                    to make its Federation Entity Discovery procedure more efficient,
                    especially if the RP shows more than a single authority
                    hint in its Entity Configuration.<a href="#section-10.2.1.2.1-1.3" class="pilcrow">Â¶</a>
</li>
                <li id="section-10.2.1.2.1-1.4">
                    At this point, if there already exists a client
                    registration under the same Entity Identifier, then that
                    registration MUST be regarded as invalid.
                    Note
                    that key material from the previous registration SHOULD be
                    kept to enable verifying signatures or decrypting
                    archived data.<a href="#section-10.2.1.2.1-1.4" class="pilcrow">Â¶</a>
</li>
                <li id="section-10.2.1.2.1-1.5">
                    The OP will now construct an Entity Statement with metadata
                    policies and assertions that when applied to the RP's
                    metadata statement will result in metadata that the OP
                    finds acceptable. Note that the Client ID the OP chooses
                    does not have to be the Entity Identifier of the RP. The
                    Entity Statement MUST include a
                    <code>trust_anchor_id</code> claim and a
                    single-valued <code>authority_hints</code>
                    claim that correspond to the Trust Chain chosen in step 2.<a href="#section-10.2.1.2.1-1.5" class="pilcrow">Â¶</a>
</li>
                <li id="section-10.2.1.2.1-1.6">
                    The OP will sign the Entity Statement and return it as the
                    registration response to the RP.<a href="#section-10.2.1.2.1-1.6" class="pilcrow">Â¶</a>
</li>
                <li id="section-10.2.1.2.1-1.7">
                    A successful response MUST have an HTTP status code 200 and
                    a content type set to
                    <code>application/entity-statement+jwt</code>.<a href="#section-10.2.1.2.1-1.7" class="pilcrow">Â¶</a>
</li>
                <li id="section-10.2.1.2.1-1.8">
                    If the response is negative, the response
                    SHOULD be produced in accordance with what is defined in
                    <a href="#error_response" class="auto internal xref">Section 7.6</a>.<a href="#section-10.2.1.2.1-1.8" class="pilcrow">Â¶</a>
</li>
              </ol>
</section>
<section id="section-10.2.1.2.2">
              <h6 id="name-rp-parsing-the-response">
<a href="#section-10.2.1.2.2" class="section-number selfRef">10.2.1.2.2. </a><a href="#name-rp-parsing-the-response" class="section-name selfRef">RP Parsing the Response</a>
              </h6>
<ol start="1" type="1" class="normal type-1" id="section-10.2.1.2.2-1">
<li id="section-10.2.1.2.2-1.1">
                    If the response is positive,
                    the RP verifies the correctness of the received Entity
                    Statement, making sure that one of the
                    <code>authority_hints</code>
                    it added to the registration request will lead to the
                    Trust Anchor the OP named using the claim
                    <code>trust_anchor_id</code>.<a href="#section-10.2.1.2.2-1.1" class="pilcrow">Â¶</a>
</li>
                <li id="section-10.2.1.2.2-1.2">
                    The RP MUST NOT apply metadata policies and assertions
                    from the Trust Chains that the OP provides because those
                    are not valid for the RP's metadata.
                    The RP MUST apply policies and assertions to the metadata
                    using one of its own Trust Chains that ends in the Trust
                    Anchor that the OP chose.
                    Once it has applied those policies and assertions, it can
                    then apply the policies and assertions returned from the OP.
                    This application of policies and assertions
                    is equivalent to adding the OP's metadata policies and
                    assertions to the Trust Chain in between the RP's and its
                    immediate superior's Entity Statements.
                    When the RP has applied all the metadata policies and
                    assertions to its metadata statement, it then stores
                    the result and will use the agreed-upon metadata when
                    talking to the OP.<a href="#section-10.2.1.2.2-1.2" class="pilcrow">Â¶</a>
</li>
                <li id="section-10.2.1.2.2-1.3">
                    At this point, the RP also knows which Trust Chain it should
                    use when evaluating the OP's metadata. It can therefore
                    apply the metadata policies and assertions on the OP's
                    metadata using the relevant Trust Chain and store the result
                    as the OP's metadata.<a href="#section-10.2.1.2.2-1.3" class="pilcrow">Â¶</a>
</li>
                <li id="section-10.2.1.2.2-1.4">
                    If the RP does not accept the received Entity Statement for
                    some reason, then it has the choice to restart the
                    registration process or to give up.<a href="#section-10.2.1.2.2-1.4" class="pilcrow">Â¶</a>
</li>
              </ol>
</section>
</section>
</div>
</section>
</div>
<div id="AfterExplicitReg">
<section id="section-10.2.2">
          <h4 id="name-after-explicit-client-regis">
<a href="#section-10.2.2" class="section-number selfRef">10.2.2. </a><a href="#name-after-explicit-client-regis" class="section-name selfRef">After Explicit Client Registration</a>
          </h4>
<p id="section-10.2.2-1">
            A client registration using the explicit method is not expected to
            be valid forever. The Entity Statements exchanged all have
            expiration times, which means that the registration will eventually
            time out. An OP can also, for administrative reasons, decide that a
            client registration is not valid anymore. An example of this could
            be the OP leaving the federation used to register an RP.<a href="#section-10.2.2-1" class="pilcrow">Â¶</a></p>
<p id="section-10.2.2-2">
            The temporary nature of explicit registration means that an RP must
            expect its registration to become invalidated at any time, causing
            RP requests to the OP, such as authorization, token or UserInfo
            requests, to fail. An RP MAY devise appropriate strategies to
            re-register with the OP and restart the transaction when such a
            condition occurs.<a href="#section-10.2.2-2" class="pilcrow">Â¶</a></p>
<section id="section-10.2.2.1">
            <h5 id="name-what-the-rp-must-do">
<a href="#section-10.2.2.1" class="section-number selfRef">10.2.2.1. </a><a href="#name-what-the-rp-must-do" class="section-name selfRef">What the RP MUST Do</a>
            </h5>
<p id="section-10.2.2.1-1">
              At regular intervals, the RP MUST:<a href="#section-10.2.2.1-1" class="pilcrow">Â¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-10.2.2.1-2">
<li id="section-10.2.2.1-2.1">
                  Starting with the OP's Entity Statement, resolve and verify
                  the Trust Chains it chooses to use when constructing the
                  registration request. If those Trust Chains do not exist
                  anymore or do not verify, then the registration SHOULD be
                  regarded as invalid, and a new registration process SHOULD be
                  started.<a href="#section-10.2.2.1-2.1" class="pilcrow">Â¶</a>
</li>
              <li id="section-10.2.2.1-2.2">
                  If the OP's Entity Statement was properly formed, the RP must
                  now verify that the Entity Statement it received about itself
                  from the OP is still valid.
                  Again, if that is not the case, the registration
                  SHOULD be regarded as invalid and a new registration process
                  SHOULD be started.<a href="#section-10.2.2.1-2.2" class="pilcrow">Â¶</a>
</li>
            </ol>
<p id="section-10.2.2.1-3">
              What is regarded as reasonable intervals will depend on
              federation policies and risk assessment by the maintainer of
              the RP.<a href="#section-10.2.2.1-3" class="pilcrow">Â¶</a></p>
</section>
<section id="section-10.2.2.2">
            <h5 id="name-what-the-op-must-do">
<a href="#section-10.2.2.2" class="section-number selfRef">10.2.2.2. </a><a href="#name-what-the-op-must-do" class="section-name selfRef">What the OP MUST Do</a>
            </h5>
<p id="section-10.2.2.2-1">
              At regular intervals, the OP MUST:<a href="#section-10.2.2.2-1" class="pilcrow">Â¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-10.2.2.2-2">
<li id="section-10.2.2.2-2.1">
                  If the signature on the registration request has expired, it
                  MUST mark the registration as invalid and demand that the
                  RP MUST re-register. Else<a href="#section-10.2.2.2-2.1" class="pilcrow">Â¶</a>
</li>
              <li id="section-10.2.2.2-2.2">
                  starting with the RP's client registration request, the OP
                  MUST
                  verify that there still is a valid Trust Chain terminating in
                  the Trust Anchor the OP chose during the registration process.<a href="#section-10.2.2.2-2.2" class="pilcrow">Â¶</a>
</li>
            </ol>
</section>
</section>
</div>
<section id="section-10.2.3">
          <h4 id="name-expiration-times">
<a href="#section-10.2.3" class="section-number selfRef">10.2.3. </a><a href="#name-expiration-times" class="section-name selfRef">Expiration Times</a>
          </h4>
<p id="section-10.2.3-1">
            An OP MUST NOT assign an expiration time
            to an RP's registration that is later than the trust
            chain's expiration time.<a href="#section-10.2.3-1" class="pilcrow">Â¶</a></p>
</section>
</section>
</div>
<div id="AutomaticVsExplicit">
<section id="section-10.3">
        <h3 id="name-differences-between-automat">
<a href="#section-10.3" class="section-number selfRef">10.3. </a><a href="#name-differences-between-automat" class="section-name selfRef">Differences between Automatic Registration and Explicit Registration</a>
        </h3>
<p id="section-10.3-1">
          The primary differences between Automatic Registration and Explicit Registration are:<a href="#section-10.3-1" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-10.3-2.1">
              With Automatic Registration, there is no registration step prior to the Authentication Request,
              whereas with Explicit Registration, there is.
              (<span><a href="#OpenID.Registration" class="internal xref">OpenID Connect Dynamic Client Registration 1.0</a> [<a href="#OpenID.Registration" class="cite xref">OpenID.Registration</a>]</span>
              and <span><a href="#RFC7591" class="internal xref">OAuth 2.0 Dynamic Client Registration</a> [<a href="#RFC7591" class="cite xref">RFC7591</a>]</span>)
              also employ a prior registration step.)<a href="#section-10.3-2.1" class="pilcrow">Â¶</a>
</li>
          <li class="normal" id="section-10.3-2.2">
              With Automatic Registration, the Client ID value is the RP's Entity Identifier
              and is supplied to the OP by the RP,
              whereas with Explicit Registration, a Client ID is assigned by the OP and supplied to the RP.<a href="#section-10.3-2.2" class="pilcrow">Â¶</a>
</li>
          <li class="normal" id="section-10.3-2.3">
              Instead of using a Client Secret to authenticate the client, with Automatic Registration,
              the client is authenticated by means of the RP proving that it controls a private key
              corresponding to one of its Entity Configuration's public keys.<a href="#section-10.3-2.3" class="pilcrow">Â¶</a>
</li>
        </ul>
</section>
</div>
<div id="TrustChainParamRationale">
<section id="section-10.4">
        <h3 id="name-rationale-for-the-trust-cha">
<a href="#section-10.4" class="section-number selfRef">10.4. </a><a href="#name-rationale-for-the-trust-cha" class="section-name selfRef">Rationale for the Trust Chain in the Request</a>
        </h3>
<p id="section-10.4-1">
          Both Automatic and Explicit Client Registration support
          the submission of the Trust Chain embedded in the Request,
          calculated by the requestor and related to itself.

          This enables the following benefits in
          a federation:<a href="#section-10.4-1" class="pilcrow">Â¶</a></p>
<div id="MetadataUpdateHint">
<p id="section-10.4-2">
            It solves the problem of OPs using RP metadata that has become stale.
            This stale data may occur when the OP uses cached RP metadata from a Trust Chain
            that hasn't reached its expiration time yet. 
            The RP MAY notify the OP that a change has taken place by passing 
            the <span><a href="#trust_chain_param" class="internal xref">trust_chain</a> (<a href="#trust_chain_param" class="auto internal xref">Section 10.1.1.1</a>)</span> 
            in the Request, thus letting the OP update its client
            registration and prevent potential temporary faults due to stale metadata.<a href="#section-10.4-2" class="pilcrow">Â¶</a></p>
</div>
<div id="TrustPathHint">
<p id="section-10.4-3">
            It enables the RP to pass a verifiable hint for which trust path to
            take in order to build the Trust Chain. This can reduce the costs
            of RP Federation Entity Discovery for OPs in complex federations where the
            RP has multiple Trust Anchors or the Trust Chain resolution may
            result in dead-ends.<a href="#section-10.4-3" class="pilcrow">Â¶</a></p>
</div>
<div id="ECHint">
<p id="section-10.4-4">
            It enables direct passing of the Entity Configuration, including
            any present Trust Marks, thus saving the OP from having to make
            an HTTP request to the RP
            <code>/.well-known/openid-federation</code>
            endpoint.<a href="#section-10.4-4" class="pilcrow">Â¶</a></p>
</div>
</section>
</div>
</section>
</div>
<div id="ClaimsLanguagesAndScripts">
<section id="section-11">
      <h2 id="name-claims-languages-and-script">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-claims-languages-and-script" class="section-name selfRef">Claims Languages and Scripts</a>
      </h2>
<p id="section-11-1">
        Human-readable Claim Values and Claim Values that reference human-readable values
        MAY be represented in multiple languages and scripts.
        This specification enables such representations in the same manner as defined in
        Section 5.2 of <span><a href="#OpenID.Core" class="internal xref">OpenID Connect Core 1.0</a> [<a href="#OpenID.Core" class="cite xref">OpenID.Core</a>]</span>.
        The paragraphs that follow are excerpted from there.<a href="#section-11-1" class="pilcrow">Â¶</a></p>
<p id="section-11-2">
        To specify the languages and scripts, <span><a href="#RFC5646" class="internal xref">BCP47</a> [<a href="#RFC5646" class="cite xref">RFC5646</a>]</span> language tags are added to member names,
        delimited by a <code>#</code> character.  For example,
        <code>family_name#ja-Kana-JP</code> expresses the
        Family Name in Katakana in Japanese, which is commonly used to index
        and represent the phonetics of the Kanji representation of the same
        represented as <code>family_name#ja-Hani-JP</code>.
        As another example, both <code>website</code> and
        <code>website#de</code> Claim Values might be returned,
        referencing a Web site in an unspecified language and a Web site
        in German.<a href="#section-11-2" class="pilcrow">Â¶</a></p>
<p id="section-11-3">
        Since Claim Names are case sensitive, it is strongly RECOMMENDED
        that language tag values used in Claim Names be spelled using the
        character case with which they are registered in the
        IANA "Language Subtag Registry" <span>[<a href="#IANA.Language" class="cite xref">IANA.Language</a>]</span>.
        In particular, language names are often spelled with lowercase characters,
        region names are spelled with uppercase characters, and
        scripts are spelled with mixed-case characters.
        However, since BCP47 language tag values are case-insensitive,
        implementations SHOULD interpret the language tag values supplied
        in a case-insensitive manner.<a href="#section-11-3" class="pilcrow">Â¶</a></p>
<p id="section-11-4">
        Per the recommendations in BCP47, language tag values for Claims
        SHOULD only be as specific as necessary.
        For instance, using <code>fr</code> might be sufficient
        in many contexts, rather than <code>fr-CA</code> or
        <code>fr-FR</code>.
        Where possible, OPs SHOULD try to match requested Claim locales with
        Claims it has.  For instance, if the Client asks for a Claim with
        a <code>de</code> (German) language tag and the OP
        has a value tagged with <code>de-CH</code> (Swiss German)
        and no generic German value, it would be appropriate for the OP
        to return the Swiss German value to the Client.
        (This intentionally moves as much of the complexity of language tag
        matching to the OP as possible to simplify Clients.)<a href="#section-11-4" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="IANA">
<section id="section-12">
      <h2 id="name-iana-considerations">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<div id="MetadataRegistry">
<section id="section-12.1">
        <h3 id="name-oauth-authorization-server-">
<a href="#section-12.1" class="section-number selfRef">12.1. </a><a href="#name-oauth-authorization-server-" class="section-name selfRef">OAuth Authorization Server Metadata Registry</a>
        </h3>
<p id="section-12.1-1">
          This specification registers the following metadata names in the
          IANA "OAuth Authorization Server Metadata" registry <span>[<a href="#IANA.OAuth.Parameters" class="cite xref">IANA.OAuth.Parameters</a>]</span>
          established by <span>[<a href="#RFC8414" class="cite xref">RFC8414</a>]</span>.<a href="#section-12.1-1" class="pilcrow">Â¶</a></p>
<div id="MetadataContents">
<section id="section-12.1.1">
          <h4 id="name-registry-contents">
<a href="#section-12.1.1" class="section-number selfRef">12.1.1. </a><a href="#name-registry-contents" class="section-name selfRef">Registry Contents</a>
          </h4>
<ul class="compact">
<li class="compact" id="section-12.1.1-1.1">
                Metadata Name:
                <code>client_registration_types_supported</code><a href="#section-12.1.1-1.1" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-1.2">
                Metadata Description: Client Registration Types Supported<a href="#section-12.1.1-1.2" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-1.3">
                Change Controller: OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net<a href="#section-12.1.1-1.3" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-1.4">
                Specification Document(s): Section <a href="#OP_metadata" class="auto internal xref">Section 4.3</a> of [[ this specification ]]<a href="#section-12.1.1-1.4" class="pilcrow">Â¶</a>
</li>
          </ul>
<ul class="compact">
<li class="compact" id="section-12.1.1-2.1">
                Metadata Name: <code>organization_name</code><a href="#section-12.1.1-2.1" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-2.2">
                Metadata Description:
                Human-readable name representing the organization owning the OP<a href="#section-12.1.1-2.2" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-2.3">
                Change Controller: OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net<a href="#section-12.1.1-2.3" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-2.4">
                Specification Document(s): <a href="#OP_metadata" class="auto internal xref">Section 4.3</a> of [[ this specification ]]<a href="#section-12.1.1-2.4" class="pilcrow">Â¶</a>
</li>
          </ul>
<ul class="compact">
<li class="compact" id="section-12.1.1-3.1">
                Metadata Name: <code>federation_registration_endpoint</code><a href="#section-12.1.1-3.1" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-3.2">
                Metadata Description:
                Federation Registration Endpoint<a href="#section-12.1.1-3.2" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-3.3">
                Change Controller: OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net<a href="#section-12.1.1-3.3" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-3.4">
                Specification Document(s): <a href="#OP_metadata" class="auto internal xref">Section 4.3</a> of [[ this specification ]]<a href="#section-12.1.1-3.4" class="pilcrow">Â¶</a>
</li>
          </ul>
<ul class="compact">
<li class="compact" id="section-12.1.1-4.1">
                Metadata Name: <code>request_authentication_methods_supported</code><a href="#section-12.1.1-4.1" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-4.2">
                Metadata Description:
                Authentication request authentication methods supported<a href="#section-12.1.1-4.2" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-4.3">
                Change Controller: OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net<a href="#section-12.1.1-4.3" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-4.4">
                Specification Document(s): <a href="#OP_metadata" class="auto internal xref">Section 4.3</a> of [[ this specification ]]<a href="#section-12.1.1-4.4" class="pilcrow">Â¶</a>
</li>
          </ul>
<ul class="compact">
<li class="compact" id="section-12.1.1-5.1">
                Metadata Name: <code>request_authentication_signing_alg_values_supported</code><a href="#section-12.1.1-5.1" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-5.2">
                Metadata Description:
                JSON array containing the JWS signing algorithms
                supported for the signature on
                the JWT used to authenticate the request<a href="#section-12.1.1-5.2" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-5.3">
                Change Controller: OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net<a href="#section-12.1.1-5.3" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-5.4">
                Specification Document(s): <a href="#OP_metadata" class="auto internal xref">Section 4.3</a> of [[ this specification ]]<a href="#section-12.1.1-5.4" class="pilcrow">Â¶</a>
</li>
          </ul>
<ul class="compact">
<li class="compact" id="section-12.1.1-6.1">
                Metadata Name: <code>signed_jwks_uri</code><a href="#section-12.1.1-6.1" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-6.2">
                Metadata Description:
                URI pointing to a signed JWT having the Entity's JWK Set as its payload<a href="#section-12.1.1-6.2" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-6.3">
                Change Controller: OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net<a href="#section-12.1.1-6.3" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-6.4">
                Specification Document(s): <a href="#OP_metadata" class="auto internal xref">Section 4.3</a> of [[ this specification ]]<a href="#section-12.1.1-6.4" class="pilcrow">Â¶</a>
</li>
          </ul>
<ul class="compact">
<li class="compact" id="section-12.1.1-7.1">
                Metadata Name: <code>jwks</code><a href="#section-12.1.1-7.1" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-7.2">
                Metadata Description:
                JSON Web Key Set document, passed by value<a href="#section-12.1.1-7.2" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-7.3">
                Change Controller: OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net<a href="#section-12.1.1-7.3" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.1.1-7.4">
                Specification Document(s): <a href="#OP_metadata" class="auto internal xref">Section 4.3</a> of [[ this specification ]]<a href="#section-12.1.1-7.4" class="pilcrow">Â¶</a>
</li>
          </ul>
</section>
</div>
</section>
</div>
<div id="DynRegRegistrations">
<section id="section-12.2">
        <h3 id="name-oauth-dynamic-client-regist">
<a href="#section-12.2" class="section-number selfRef">12.2. </a><a href="#name-oauth-dynamic-client-regist" class="section-name selfRef">OAuth Dynamic Client Registration Metadata Registration</a>
        </h3>
<p id="section-12.2-1">
          This specification registers the following client metadata definition
          in the IANA "OAuth Dynamic Client Registration Metadata" registry
          <span>[<a href="#IANA.OAuth.Parameters" class="cite xref">IANA.OAuth.Parameters</a>]</span>
          established by <span>[<a href="#RFC7591" class="cite xref">RFC7591</a>]</span>.<a href="#section-12.2-1" class="pilcrow">Â¶</a></p>
<div id="DynRegContents">
<section id="section-12.2.1">
          <h4 id="name-registry-contents-2">
<a href="#section-12.2.1" class="section-number selfRef">12.2.1. </a><a href="#name-registry-contents-2" class="section-name selfRef">Registry Contents</a>
          </h4>
<ul class="compact">
<li class="compact" id="section-12.2.1-1.1">
                Client Metadata Name: <code>client_registration_types</code><a href="#section-12.2.1-1.1" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.2.1-1.2">
                Client Metadata Description:
                An array of strings specifying the client registration types the RP wants to use<a href="#section-12.2.1-1.2" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.2.1-1.3">
                Change Controller: OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net<a href="#section-12.2.1-1.3" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.2.1-1.4">
                Specification Document(s): Section <a href="#RP_metadata" class="auto internal xref">Section 4.2</a> of [[ this specification ]]<a href="#section-12.2.1-1.4" class="pilcrow">Â¶</a>
</li>
          </ul>
<ul class="compact">
<li class="compact" id="section-12.2.1-2.1">
                Client Metadata Name: <code>organization_name</code><a href="#section-12.2.1-2.1" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.2.1-2.2">
                Client Metadata Description:
                Human-readable name representing the organization owning the RP<a href="#section-12.2.1-2.2" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.2.1-2.3">
                Change Controller: OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net<a href="#section-12.2.1-2.3" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.2.1-2.4">
                Specification Document(s): Section <a href="#RP_metadata" class="auto internal xref">Section 4.2</a> of [[ this specification ]]<a href="#section-12.2.1-2.4" class="pilcrow">Â¶</a>
</li>
          </ul>
<ul class="compact">
<li class="compact" id="section-12.2.1-3.1">
                Client Metadata Name: <code>signed_jwks_uri</code><a href="#section-12.2.1-3.1" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.2.1-3.2">
                Client Metadata Description:
                URI pointing to a signed JWT having the Entity's JWK Set as its payload<a href="#section-12.2.1-3.2" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.2.1-3.3">
                Change Controller: OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net<a href="#section-12.2.1-3.3" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.2.1-3.4">
                Specification Document(s): Section <a href="#RP_metadata" class="auto internal xref">Section 4.2</a> of [[ this specification ]]<a href="#section-12.2.1-3.4" class="pilcrow">Â¶</a>
</li>
          </ul>
</section>
</div>
</section>
</div>
<div id="ErrorReg">
<section id="section-12.3">
        <h3 id="name-oauth-extensions-error-regi">
<a href="#section-12.3" class="section-number selfRef">12.3. </a><a href="#name-oauth-extensions-error-regi" class="section-name selfRef">OAuth Extensions Error Registration</a>
        </h3>
<p id="section-12.3-1">
          This section registers the following values in the
          IANA "OAuth Extensions Error Registry" registry
          <span>[<a href="#IANA.OAuth.Parameters" class="cite xref">IANA.OAuth.Parameters</a>]</span>
          established by <span>[<a href="#RFC6749" class="cite xref">RFC6749</a>]</span>.<a href="#section-12.3-1" class="pilcrow">Â¶</a></p>
<div id="ErrorContents">
<section id="section-12.3.1">
          <h4 id="name-registry-contents-3">
<a href="#section-12.3.1" class="section-number selfRef">12.3.1. </a><a href="#name-registry-contents-3" class="section-name selfRef">Registry Contents</a>
          </h4>
<ul class="compact">
<li class="compact" id="section-12.3.1-1.1">Name: missing_trust_anchor<a href="#section-12.3.1-1.1" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.3.1-1.2">Usage Location: Authorization Request<a href="#section-12.3.1-1.2" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.3.1-1.3">Protocol Extension: OpenID Connect Federation<a href="#section-12.3.1-1.3" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.3.1-1.4">
                Change Controller: OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net<a href="#section-12.3.1-1.4" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.3.1-1.5">Reference: <a href="#AuthenticationError" class="auto internal xref">Section 10.1.2</a> of [[ this specification ]]<a href="#section-12.3.1-1.5" class="pilcrow">Â¶</a>
</li>
          </ul>
<ul class="compact">
<li class="compact" id="section-12.3.1-2.1">Name: validation_failed<a href="#section-12.3.1-2.1" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.3.1-2.2">Usage Location: Authorization Request<a href="#section-12.3.1-2.2" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.3.1-2.3">Protocol Extension: OpenID Connect Federation<a href="#section-12.3.1-2.3" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.3.1-2.4">
                Change Controller: OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net<a href="#section-12.3.1-2.4" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.3.1-2.5">Reference: <a href="#AuthenticationError" class="auto internal xref">Section 10.1.2</a> of [[ this specification ]]<a href="#section-12.3.1-2.5" class="pilcrow">Â¶</a>
</li>
          </ul>
</section>
</div>
</section>
</div>
<div id="MediaReg">
<section id="section-12.4">
        <h3 id="name-media-type-registration">
<a href="#section-12.4" class="section-number selfRef">12.4. </a><a href="#name-media-type-registration" class="section-name selfRef">Media Type Registration</a>
        </h3>
<p id="section-12.4-1">
          This section registers the following media types <span>[<a href="#RFC2046" class="cite xref">RFC2046</a>]</span>
          in the "Media Types" registry <span>[<a href="#IANA.MediaTypes" class="cite xref">IANA.MediaTypes</a>]</span>
          in the manner described in <span>[<a href="#RFC6838" class="cite xref">RFC6838</a>]</span>.<a href="#section-12.4-1" class="pilcrow">Â¶</a></p>
<div id="MediaContents">
<section id="section-12.4.1">
          <h4 id="name-registry-contents-4">
<a href="#section-12.4.1" class="section-number selfRef">12.4.1. </a><a href="#name-registry-contents-4" class="section-name selfRef">Registry Contents</a>
          </h4>
<ul class="compact">
<li class="compact" id="section-12.4.1-1.1">
                Type name: application<a href="#section-12.4.1-1.1" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-1.2">
                Subtype name: entity-statement+jwt<a href="#section-12.4.1-1.2" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-1.3">
                Required parameters: n/a<a href="#section-12.4.1-1.3" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-1.4">
                Optional parameters: n/a<a href="#section-12.4.1-1.4" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-1.5">
                Encoding considerations: binary;
                An Entity Statement is a JWT;
                JWT values are encoded as a
                series of base64url-encoded values (some of which may be the
                empty string) separated by period ('.') characters.<a href="#section-12.4.1-1.5" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-1.6">
                Security considerations: See <a href="#Security" class="auto internal xref">Section 13</a> of [[ this specification ]]<a href="#section-12.4.1-1.6" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-1.7">
                Interoperability considerations: n/a<a href="#section-12.4.1-1.7" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-1.8">
                Published specification: [[ this specification ]]<a href="#section-12.4.1-1.8" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-1.9">
                Applications that use this media type:
                Applications that use [[ this specification ]]<a href="#section-12.4.1-1.9" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-1.10">
                Fragment identifier considerations: n/a<a href="#section-12.4.1-1.10" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-1.11">
              <p id="section-12.4.1-1.11.1">
                Additional information:<a href="#section-12.4.1-1.11.1" class="pilcrow">Â¶</a></p>
<ul class="compact ulEmpty">
<li class="compact ulEmpty" id="section-12.4.1-1.11.2.1">Magic number(s): n/a<a href="#section-12.4.1-1.11.2.1" class="pilcrow">Â¶</a>
</li>
                <li class="compact ulEmpty" id="section-12.4.1-1.11.2.2">File extension(s): n/a<a href="#section-12.4.1-1.11.2.2" class="pilcrow">Â¶</a>
</li>
                <li class="compact ulEmpty" id="section-12.4.1-1.11.2.3">Macintosh file type code(s): n/a<a href="#section-12.4.1-1.11.2.3" class="pilcrow">Â¶</a>
</li>
              </ul>
<p id="section-12.4.1-1.11.3"></p>
</li>
            <li class="compact" id="section-12.4.1-1.12">
              <p id="section-12.4.1-1.12.1">
                Person &amp; email address to contact for further information:<a href="#section-12.4.1-1.12.1" class="pilcrow">Â¶</a></p>
<p id="section-12.4.1-1.12.2">
                Michael B. Jones, mbj@microsoft.com<a href="#section-12.4.1-1.12.2" class="pilcrow">Â¶</a></p>
</li>
            <li class="compact" id="section-12.4.1-1.13">
                Intended usage: COMMON<a href="#section-12.4.1-1.13" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-1.14">
                Restrictions on usage: none<a href="#section-12.4.1-1.14" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-1.15">
                Author: Michael B. Jones, mbj@microsoft.com<a href="#section-12.4.1-1.15" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-1.16">
                Change controller: OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net<a href="#section-12.4.1-1.16" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-1.17">
                Provisional registration? No<a href="#section-12.4.1-1.17" class="pilcrow">Â¶</a>
</li>
          </ul>
<ul class="compact">
<li class="compact" id="section-12.4.1-2.1">
                Type name: application<a href="#section-12.4.1-2.1" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-2.2">
                Subtype name: trust-mark+jwt<a href="#section-12.4.1-2.2" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-2.3">
                Required parameters: n/a<a href="#section-12.4.1-2.3" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-2.4">
                Optional parameters: n/a<a href="#section-12.4.1-2.4" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-2.5">
                Encoding considerations: binary;
                A Trust Mark is a JWT;
                JWT values are encoded as a
                series of base64url-encoded values (some of which may be the
                empty string) separated by period ('.') characters.<a href="#section-12.4.1-2.5" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-2.6">
                Security considerations: See <a href="#Security" class="auto internal xref">Section 13</a> of [[ this specification ]]<a href="#section-12.4.1-2.6" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-2.7">
                Interoperability considerations: n/a<a href="#section-12.4.1-2.7" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-2.8">
                Published specification: [[ this specification ]]<a href="#section-12.4.1-2.8" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-2.9">
                Applications that use this media type:
                Applications that use [[ this specification ]]<a href="#section-12.4.1-2.9" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-2.10">
                Fragment identifier considerations: n/a<a href="#section-12.4.1-2.10" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-2.11">
              <p id="section-12.4.1-2.11.1">
                Additional information:<a href="#section-12.4.1-2.11.1" class="pilcrow">Â¶</a></p>
<ul class="compact ulEmpty">
<li class="compact ulEmpty" id="section-12.4.1-2.11.2.1">Magic number(s): n/a<a href="#section-12.4.1-2.11.2.1" class="pilcrow">Â¶</a>
</li>
                <li class="compact ulEmpty" id="section-12.4.1-2.11.2.2">File extension(s): n/a<a href="#section-12.4.1-2.11.2.2" class="pilcrow">Â¶</a>
</li>
                <li class="compact ulEmpty" id="section-12.4.1-2.11.2.3">Macintosh file type code(s): n/a<a href="#section-12.4.1-2.11.2.3" class="pilcrow">Â¶</a>
</li>
              </ul>
<p id="section-12.4.1-2.11.3"></p>
</li>
            <li class="compact" id="section-12.4.1-2.12">
              <p id="section-12.4.1-2.12.1">
                Person &amp; email address to contact for further information:<a href="#section-12.4.1-2.12.1" class="pilcrow">Â¶</a></p>
<p id="section-12.4.1-2.12.2">
                Michael B. Jones, mbj@microsoft.com<a href="#section-12.4.1-2.12.2" class="pilcrow">Â¶</a></p>
</li>
            <li class="compact" id="section-12.4.1-2.13">
                Intended usage: COMMON<a href="#section-12.4.1-2.13" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-2.14">
                Restrictions on usage: none<a href="#section-12.4.1-2.14" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-2.15">
                Author: Michael B. Jones, mbj@microsoft.com<a href="#section-12.4.1-2.15" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-2.16">
                Change controller: OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net<a href="#section-12.4.1-2.16" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-2.17">
                Provisional registration? No<a href="#section-12.4.1-2.17" class="pilcrow">Â¶</a>
</li>
          </ul>
<ul class="compact">
<li class="compact" id="section-12.4.1-3.1">
                Type name: application<a href="#section-12.4.1-3.1" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-3.2">
                Subtype name: resolve-response+jwt<a href="#section-12.4.1-3.2" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-3.3">
                Required parameters: n/a<a href="#section-12.4.1-3.3" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-3.4">
                Optional parameters: n/a<a href="#section-12.4.1-3.4" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-3.5">
                Encoding considerations: binary;
                An Entity Resolve Response is a signed JWT;
                JWT values are encoded as a
                series of base64url-encoded values (some of which may be the
                empty string) separated by period ('.') characters.<a href="#section-12.4.1-3.5" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-3.6">
                Security considerations: See <a href="#Security" class="auto internal xref">Section 13</a> of [[ this specification ]]<a href="#section-12.4.1-3.6" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-3.7">
                Interoperability considerations: n/a<a href="#section-12.4.1-3.7" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-3.8">
                Published specification: [[ this specification ]]<a href="#section-12.4.1-3.8" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-3.9">
                Applications that use this media type:
                Applications that use [[ this specification ]]<a href="#section-12.4.1-3.9" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-3.10">
                Fragment identifier considerations: n/a<a href="#section-12.4.1-3.10" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-3.11">
              <p id="section-12.4.1-3.11.1">
                Additional information:<a href="#section-12.4.1-3.11.1" class="pilcrow">Â¶</a></p>
<ul class="compact ulEmpty">
<li class="compact ulEmpty" id="section-12.4.1-3.11.2.1">Magic number(s): n/a<a href="#section-12.4.1-3.11.2.1" class="pilcrow">Â¶</a>
</li>
                <li class="compact ulEmpty" id="section-12.4.1-3.11.2.2">File extension(s): n/a<a href="#section-12.4.1-3.11.2.2" class="pilcrow">Â¶</a>
</li>
                <li class="compact ulEmpty" id="section-12.4.1-3.11.2.3">Macintosh file type code(s): n/a<a href="#section-12.4.1-3.11.2.3" class="pilcrow">Â¶</a>
</li>
              </ul>
<p id="section-12.4.1-3.11.3"></p>
</li>
            <li class="compact" id="section-12.4.1-3.12">
              <p id="section-12.4.1-3.12.1">
                Person &amp; email address to contact for further information:<a href="#section-12.4.1-3.12.1" class="pilcrow">Â¶</a></p>
<p id="section-12.4.1-3.12.2">
                Michael B. Jones, mbj@microsoft.com<a href="#section-12.4.1-3.12.2" class="pilcrow">Â¶</a></p>
</li>
            <li class="compact" id="section-12.4.1-3.13">
                Intended usage: COMMON<a href="#section-12.4.1-3.13" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-3.14">
                Restrictions on usage: none<a href="#section-12.4.1-3.14" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-3.15">
                Author: Michael B. Jones, mbj@microsoft.com<a href="#section-12.4.1-3.15" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-3.16">
                Change controller: OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net<a href="#section-12.4.1-3.16" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-3.17">
                Provisional registration? No<a href="#section-12.4.1-3.17" class="pilcrow">Â¶</a>
</li>
          </ul>
<ul class="compact">
<li class="compact" id="section-12.4.1-4.1">
                Type name: application<a href="#section-12.4.1-4.1" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-4.2">
                Subtype name: trust-chain+json<a href="#section-12.4.1-4.2" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-4.3">
                Required parameters: n/a<a href="#section-12.4.1-4.3" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-4.4">
                Optional parameters: n/a<a href="#section-12.4.1-4.4" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-4.5">
                Encoding considerations: binary;
                A Trust Chain is a JSON array of JWTs;
                JWT values are encoded as a
                series of base64url-encoded values (some of which may be the
                empty string) separated by period ('.') characters.<a href="#section-12.4.1-4.5" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-4.6">
                Security considerations: See <a href="#Security" class="auto internal xref">Section 13</a> of [[ this specification ]]<a href="#section-12.4.1-4.6" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-4.7">
                Interoperability considerations: n/a<a href="#section-12.4.1-4.7" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-4.8">
                Published specification: [[ this specification ]]<a href="#section-12.4.1-4.8" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-4.9">
                Applications that use this media type:
                Applications that use [[ this specification ]]<a href="#section-12.4.1-4.9" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-4.10">
                Fragment identifier considerations: n/a<a href="#section-12.4.1-4.10" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-4.11">
              <p id="section-12.4.1-4.11.1">
                Additional information:<a href="#section-12.4.1-4.11.1" class="pilcrow">Â¶</a></p>
<ul class="compact ulEmpty">
<li class="compact ulEmpty" id="section-12.4.1-4.11.2.1">Magic number(s): n/a<a href="#section-12.4.1-4.11.2.1" class="pilcrow">Â¶</a>
</li>
                <li class="compact ulEmpty" id="section-12.4.1-4.11.2.2">File extension(s): n/a<a href="#section-12.4.1-4.11.2.2" class="pilcrow">Â¶</a>
</li>
                <li class="compact ulEmpty" id="section-12.4.1-4.11.2.3">Macintosh file type code(s): n/a<a href="#section-12.4.1-4.11.2.3" class="pilcrow">Â¶</a>
</li>
              </ul>
<p id="section-12.4.1-4.11.3"></p>
</li>
            <li class="compact" id="section-12.4.1-4.12">
              <p id="section-12.4.1-4.12.1">
                Person &amp; email address to contact for further information:<a href="#section-12.4.1-4.12.1" class="pilcrow">Â¶</a></p>
<p id="section-12.4.1-4.12.2">
                Michael B. Jones, mbj@microsoft.com<a href="#section-12.4.1-4.12.2" class="pilcrow">Â¶</a></p>
</li>
            <li class="compact" id="section-12.4.1-4.13">
                Intended usage: COMMON<a href="#section-12.4.1-4.13" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-4.14">
                Restrictions on usage: none<a href="#section-12.4.1-4.14" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-4.15">
                Author: Michael B. Jones, mbj@microsoft.com<a href="#section-12.4.1-4.15" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-4.16">
                Change controller: OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net<a href="#section-12.4.1-4.16" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.4.1-4.17">
                Provisional registration? No<a href="#section-12.4.1-4.17" class="pilcrow">Â¶</a>
</li>
          </ul>
</section>
</div>
</section>
</div>
<div id="ParameterRegistry">
<section id="section-12.5">
        <h3 id="name-oauth-parameter-registry">
<a href="#section-12.5" class="section-number selfRef">12.5. </a><a href="#name-oauth-parameter-registry" class="section-name selfRef">OAuth Parameter Registry</a>
        </h3>
<p id="section-12.5-1">
          This specification registers the following parameter name in the IANA "OAuth
          Parameters" registry <span>[<a href="#IANA.OAuth.Parameters" class="cite xref">IANA.OAuth.Parameters</a>]</span> established
          by <span>[<a href="#RFC6749" class="cite xref">RFC6749</a>]</span>.<a href="#section-12.5-1" class="pilcrow">Â¶</a></p>
<div id="ParameterContents">
<section id="section-12.5.1">
          <h4 id="name-registry-contents-5">
<a href="#section-12.5.1" class="section-number selfRef">12.5.1. </a><a href="#name-registry-contents-5" class="section-name selfRef">Registry Contents</a>
          </h4>
<ul class="compact">
<li class="compact" id="section-12.5.1-1.1">
                Parameter Name:
                <code>trust_chain</code><a href="#section-12.5.1-1.1" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.5.1-1.2">
                Parameter Usage Location: authorization request<a href="#section-12.5.1-1.2" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.5.1-1.3">
                Change Controller: OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net<a href="#section-12.5.1-1.3" class="pilcrow">Â¶</a>
</li>
            <li class="compact" id="section-12.5.1-1.4">
                Specification Document(s): Section <a href="#AuthzRequestProcessing" class="auto internal xref">Section 10.1.1.1.1</a> of [[ this specification ]]<a href="#section-12.5.1-1.4" class="pilcrow">Â¶</a>
</li>
          </ul>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="Security">
<section id="section-13">
      <h2 id="name-security-considerations">
<a href="#section-13" class="section-number selfRef">13. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<div id="DoS">
<section id="section-13.1">
        <h3 id="name-denial-of-service-attack-pr">
<a href="#section-13.1" class="section-number selfRef">13.1. </a><a href="#name-denial-of-service-attack-pr" class="section-name selfRef">Denial-of-Service Attack Prevention</a>
        </h3>
<p id="section-13.1-1">
          Some of the interfaces defined in this specification could be used for
          Denial-of-Service attacks (DoS), most notably, the Resolve endpoint
          (<a href="#entity_listing" class="auto internal xref">Section 7.3</a>), Explicit Client Registration
          (<a href="#explicit" class="auto internal xref">Section 10.2</a>), and
          Automatic Client Registration (<a href="#automatic" class="auto internal xref">Section 10.1</a>) can
          be exploited as vectors of HTTP propagation attacks.

          If these endpoints are provided, some adequate defense methods are required,
          such as those described below and in
          <span>[<a href="#RFC4732" class="cite xref">RFC4732</a>]</span>.<a href="#section-13.1-1" class="pilcrow">Â¶</a></p>
<p id="section-13.1-2">
          A Trust Mark can be statically validated using the public key of its issuer.
          The static validation of the Trust Marks represents a
          filter against propagation attacks. An attacker
          could exploit the Federation Entity Discovery mechanism and use an OIDC Federation
          to propagate many HTTP requests. For each authorization request crafted
          by an anonymous client, the OP would produce approximately three HTTP requests to third parties
          in the absence of Intermediates, and at least five HTTP requests with at
          least one Intermediate. If an OP doesn't find at least one
          valid Trust Mark in an Entity Configuration, it should reject the request and
          temporary ban the requestor.<a href="#section-13.1-2" class="pilcrow">Â¶</a></p>
<p id="section-13.1-3">
          If client authentication is not demanded at the Resolve endpoint
          then incoming requests should not result in the immediate
          collection (Federation Entity Discovery process) and evaluation of Trust Chains by default.<a href="#section-13.1-3" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="UnsignedError">
<section id="section-13.2">
        <h3 id="name-unsigned-error-messages">
<a href="#section-13.2" class="section-number selfRef">13.2. </a><a href="#name-unsigned-error-messages" class="section-name selfRef">Unsigned Error Messages</a>
        </h3>
<p id="section-13.2-1">
          One of the fundamental design goals of this protocol is to
          protect messages end-to-end. This can not be accomplished by demanding
          TLS since TLS, in lots of cases, is not end-to-end but ends in a HTTPS
          to HTTP Reverse Proxy.
          Allowing unsigned error messages therefore opens up an attack
          vector for someone who wants to run a Denial of Service attack.
          This is not specific to OpenID Connect Federation but equally valid for
          other protocols when HTTPS to HTTP reverse proxies are used.<a href="#section-13.2-1" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<section id="section-14">
      <h2 id="name-references">
<a href="#section-14" class="section-number selfRef">14. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-14.1">
        <h3 id="name-normative-references">
<a href="#section-14.1" class="section-number selfRef">14.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="OpenID.Core">[OpenID.Core]</dt>
        <dd>
<span class="refAuthor">Sakimura, N.</span>, <span class="refAuthor">Bradley, J.</span>, <span class="refAuthor">Jones, M.B.</span>, <span class="refAuthor">de Medeiros, B.</span>, and <span class="refAuthor">C. Mortimore</span>, <span class="refTitle">"OpenID Connect Discovery 1.0"</span>, <time datetime="2015-08-03" class="refDate">3 August 2015</time>, <span>&lt;<a href="http://openid.net/specs/openid-connect-core-1_0.html">http://openid.net/specs/openid-connect-core-1_0.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="OpenID.Discovery">[OpenID.Discovery]</dt>
        <dd>
<span class="refAuthor">Sakimura, N.</span>, <span class="refAuthor">Bradley, J.</span>, <span class="refAuthor">Jones, M.B.</span>, and <span class="refAuthor">E. Jay</span>, <span class="refTitle">"OpenID Connect Discovery 1.0"</span>, <time datetime="2015-08-03" class="refDate">3 August 2015</time>, <span>&lt;<a href="http://openid.net/specs/openid-connect-discovery-1_0.html">http://openid.net/specs/openid-connect-discovery-1_0.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="OpenID.Registration">[OpenID.Registration]</dt>
        <dd>
<span class="refAuthor">Sakimura, N.</span>, <span class="refAuthor">Bradley, J.</span>, and <span class="refAuthor">M.B. Jones</span>, <span class="refTitle">"OpenID Connect Dynamic Client Registration 1.0"</span>, <time datetime="2015-08-03" class="refDate">3 August 2015</time>, <span>&lt;<a href="http://openid.net/specs/openid-connect-registration-1_0.html">http://openid.net/specs/openid-connect-registration-1_0.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3339">[RFC3339]</dt>
        <dd>
<span class="refAuthor">Klyne, G.</span> and <span class="refAuthor">C. Newman</span>, <span class="refTitle">"Date and Time on the Internet: Timestamps"</span>, <span class="seriesInfo">RFC 3339</span>, <span class="seriesInfo">DOI 10.17487/RFC3339</span>, <time datetime="2002-07" class="refDate">July 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3339">https://www.rfc-editor.org/info/rfc3339</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4732">[RFC4732]</dt>
        <dd>
<span class="refAuthor">Handley, M., Ed.</span>, <span class="refAuthor">Rescorla, E., Ed.</span>, and <span class="refAuthor">IAB</span>, <span class="refTitle">"Internet Denial-of-Service Considerations"</span>, <span class="seriesInfo">RFC 4732</span>, <span class="seriesInfo">DOI 10.17487/RFC4732</span>, <time datetime="2006-12" class="refDate">December 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4732">https://www.rfc-editor.org/info/rfc4732</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5280">[RFC5280]</dt>
        <dd>
<span class="refAuthor">Cooper, D.</span>, <span class="refAuthor">Santesson, S.</span>, <span class="refAuthor">Farrell, S.</span>, <span class="refAuthor">Boeyen, S.</span>, <span class="refAuthor">Housley, R.</span>, and <span class="refAuthor">W. Polk</span>, <span class="refTitle">"Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile"</span>, <span class="seriesInfo">RFC 5280</span>, <span class="seriesInfo">DOI 10.17487/RFC5280</span>, <time datetime="2008-05" class="refDate">May 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5280">https://www.rfc-editor.org/info/rfc5280</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5646">[RFC5646]</dt>
        <dd>
<span class="refAuthor">Phillips, A., Ed.</span> and <span class="refAuthor">M. Davis, Ed.</span>, <span class="refTitle">"Tags for Identifying Languages"</span>, <span class="seriesInfo">BCP 47</span>, <span class="seriesInfo">RFC 5646</span>, <span class="seriesInfo">DOI 10.17487/RFC5646</span>, <time datetime="2009-09" class="refDate">September 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5646">https://www.rfc-editor.org/info/rfc5646</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7515">[RFC7515]</dt>
        <dd>
<span class="refAuthor">Jones, M.</span>, <span class="refAuthor">Bradley, J.</span>, and <span class="refAuthor">N. Sakimura</span>, <span class="refTitle">"JSON Web Signature (JWS)"</span>, <span class="seriesInfo">RFC 7515</span>, <span class="seriesInfo">DOI 10.17487/RFC7515</span>, <time datetime="2015-05" class="refDate">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7515">https://www.rfc-editor.org/info/rfc7515</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7517">[RFC7517]</dt>
        <dd>
<span class="refAuthor">Jones, M.</span>, <span class="refTitle">"JSON Web Key (JWK)"</span>, <span class="seriesInfo">RFC 7517</span>, <span class="seriesInfo">DOI 10.17487/RFC7517</span>, <time datetime="2015-05" class="refDate">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7517">https://www.rfc-editor.org/info/rfc7517</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7519">[RFC7519]</dt>
        <dd>
<span class="refAuthor">Jones, M.</span>, <span class="refAuthor">Bradley, J.</span>, and <span class="refAuthor">N. Sakimura</span>, <span class="refTitle">"JSON Web Token (JWT)"</span>, <span class="seriesInfo">RFC 7519</span>, <span class="seriesInfo">DOI 10.17487/RFC7519</span>, <time datetime="2015-05" class="refDate">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7519">https://www.rfc-editor.org/info/rfc7519</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7591">[RFC7591]</dt>
        <dd>
<span class="refAuthor">Richer, J., Ed.</span>, <span class="refAuthor">Jones, M.</span>, <span class="refAuthor">Bradley, J.</span>, <span class="refAuthor">Machulak, M.</span>, and <span class="refAuthor">P. Hunt</span>, <span class="refTitle">"OAuth 2.0 Dynamic Client Registration Protocol"</span>, <span class="seriesInfo">RFC 7591</span>, <span class="seriesInfo">DOI 10.17487/RFC7591</span>, <time datetime="2015-07" class="refDate">July 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7591">https://www.rfc-editor.org/info/rfc7591</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7638">[RFC7638]</dt>
        <dd>
<span class="refAuthor">Jones, M.</span> and <span class="refAuthor">N. Sakimura</span>, <span class="refTitle">"JSON Web Key (JWK) Thumbprint"</span>, <span class="seriesInfo">RFC 7638</span>, <span class="seriesInfo">DOI 10.17487/RFC7638</span>, <time datetime="2015-09" class="refDate">September 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7638">https://www.rfc-editor.org/info/rfc7638</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8414">[RFC8414]</dt>
        <dd>
<span class="refAuthor">Jones, M.</span>, <span class="refAuthor">Sakimura, N.</span>, and <span class="refAuthor">J. Bradley</span>, <span class="refTitle">"OAuth 2.0 Authorization Server Metadata"</span>, <span class="seriesInfo">RFC 8414</span>, <span class="seriesInfo">DOI 10.17487/RFC8414</span>, <time datetime="2018-06" class="refDate">June 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8414">https://www.rfc-editor.org/info/rfc8414</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8615">[RFC8615]</dt>
        <dd>
<span class="refAuthor">Nottingham, M.</span>, <span class="refTitle">"Well-Known Uniform Resource Identifiers (URIs)"</span>, <span class="seriesInfo">RFC 8615</span>, <span class="seriesInfo">DOI 10.17487/RFC8615</span>, <time datetime="2019-05" class="refDate">May 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8615">https://www.rfc-editor.org/info/rfc8615</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8705">[RFC8705]</dt>
        <dd>
<span class="refAuthor">Campbell, B.</span>, <span class="refAuthor">Bradley, J.</span>, <span class="refAuthor">Sakimura, N.</span>, and <span class="refAuthor">T. Lodderstedt</span>, <span class="refTitle">"OAuth 2.0 Mutual-TLS Client Authentication and Certificate-Bound Access Tokens"</span>, <span class="seriesInfo">RFC 8705</span>, <span class="seriesInfo">DOI 10.17487/RFC8705</span>, <time datetime="2020-02" class="refDate">February 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8705">https://www.rfc-editor.org/info/rfc8705</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9101">[RFC9101]</dt>
        <dd>
<span class="refAuthor">Sakimura, N.</span>, <span class="refAuthor">Bradley, J.</span>, and <span class="refAuthor">M. Jones</span>, <span class="refTitle">"The OAuth 2.0 Authorization Framework: JWT-Secured Authorization Request (JAR)"</span>, <span class="seriesInfo">RFC 9101</span>, <span class="seriesInfo">DOI 10.17487/RFC9101</span>, <time datetime="2021-08" class="refDate">August 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9101">https://www.rfc-editor.org/info/rfc9101</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9126">[RFC9126]</dt>
      <dd>
<span class="refAuthor">Lodderstedt, T.</span>, <span class="refAuthor">Campbell, B.</span>, <span class="refAuthor">Sakimura, N.</span>, <span class="refAuthor">Tonge, D.</span>, and <span class="refAuthor">F. Skokan</span>, <span class="refTitle">"OAuth 2.0 Pushed Authorization Requests"</span>, <span class="seriesInfo">RFC 9126</span>, <span class="seriesInfo">DOI 10.17487/RFC9126</span>, <time datetime="2021-09" class="refDate">September 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9126">https://www.rfc-editor.org/info/rfc9126</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-14.2">
        <h3 id="name-informative-references">
<a href="#section-14.2" class="section-number selfRef">14.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.jones-oauth-resource-metadata">[I-D.jones-oauth-resource-metadata]</dt>
        <dd>
<span class="refAuthor">Jones, M.</span> and <span class="refAuthor">P. Hunt</span>, <span class="refTitle">"OAuth 2.0 Protected Resource Metadata"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-jones-oauth-resource-metadata-01</span>, <time datetime="2017-01-19" class="refDate">19 January 2017</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-jones-oauth-resource-metadata-01.txt">https://www.ietf.org/archive/id/draft-jones-oauth-resource-metadata-01.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IANA.Language">[IANA.Language]</dt>
        <dd>
<span class="refAuthor">IANA</span>, <span class="refTitle">"Language Subtag Registry"</span>, <span>&lt;<a href="https://www.iana.org/assignments/language-subtag-registry">https://www.iana.org/assignments/language-subtag-registry</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IANA.MediaTypes">[IANA.MediaTypes]</dt>
        <dd>
<span class="refAuthor">IANA</span>, <span class="refTitle">"Media Types"</span>, <span>&lt;<a href="http://www.iana.org/assignments/media-types">http://www.iana.org/assignments/media-types</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IANA.OAuth.Parameters">[IANA.OAuth.Parameters]</dt>
        <dd>
<span class="refAuthor">IANA</span>, <span class="refTitle">"OAuth Parameters"</span>, <span>&lt;<a href="http://www.iana.org/assignments/oauth-parameters">http://www.iana.org/assignments/oauth-parameters</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2046">[RFC2046]</dt>
        <dd>
<span class="refAuthor">Freed, N.</span> and <span class="refAuthor">N. Borenstein</span>, <span class="refTitle">"Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types"</span>, <span class="seriesInfo">RFC 2046</span>, <span class="seriesInfo">DOI 10.17487/RFC2046</span>, <time datetime="1996-11" class="refDate">November 1996</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2046">https://www.rfc-editor.org/info/rfc2046</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6749">[RFC6749]</dt>
        <dd>
<span class="refAuthor">Hardt, D., Ed.</span>, <span class="refTitle">"The OAuth 2.0 Authorization Framework"</span>, <span class="seriesInfo">RFC 6749</span>, <span class="seriesInfo">DOI 10.17487/RFC6749</span>, <time datetime="2012-10" class="refDate">October 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6749">https://www.rfc-editor.org/info/rfc6749</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6838">[RFC6838]</dt>
        <dd>
<span class="refAuthor">Freed, N.</span>, <span class="refAuthor">Klensin, J.</span>, and <span class="refAuthor">T. Hansen</span>, <span class="refTitle">"Media Type Specifications and Registration Procedures"</span>, <span class="seriesInfo">BCP 13</span>, <span class="seriesInfo">RFC 6838</span>, <span class="seriesInfo">DOI 10.17487/RFC6838</span>, <time datetime="2013-01" class="refDate">January 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6838">https://www.rfc-editor.org/info/rfc6838</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8446">[RFC8446]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"The Transport Layer Security (TLS) Protocol Version 1.3"</span>, <span class="seriesInfo">RFC 8446</span>, <span class="seriesInfo">DOI 10.17487/RFC8446</span>, <time datetime="2018-08" class="refDate">August 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8446">https://www.rfc-editor.org/info/rfc8446</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8725">[RFC8725]</dt>
      <dd>
<span class="refAuthor">Sheffer, Y.</span>, <span class="refAuthor">Hardt, D.</span>, and <span class="refAuthor">M. Jones</span>, <span class="refTitle">"JSON Web Token Best Current Practices"</span>, <span class="seriesInfo">BCP 225</span>, <span class="seriesInfo">RFC 8725</span>, <span class="seriesInfo">DOI 10.17487/RFC8725</span>, <time datetime="2020-02" class="refDate">February 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8725">https://www.rfc-editor.org/info/rfc8725</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<section id="appendix-A">
      <h2 id="name-provider-information-discov">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-provider-information-discov" class="section-name selfRef">Provider Information Discovery and Client Registration in a Federation</a>
      </h2>
<p id="appendix-A-1">
        Let us assume the following: The project LIGO would like to offer access
        to its wiki to all OPs in eduGAIN. LIGO is registered with the InCommon
        federation.<a href="#appendix-A-1" class="pilcrow">Â¶</a></p>
<p id="appendix-A-2" class="keepWithNext">
          The players<a href="#appendix-A-2" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A-3">
<pre>
                       eduGAIN
                          |
       +------------------+------------------+
       |                                     |
    SWAMID                               InCommon
       |                                     |
     umu.se                                  |
       |                                     |
   op.umu.se                           wiki.ligo.org
</pre><a href="#appendix-A-3" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A-4">
        Both SWAMID and InCommon are identity federations in their own right.
        They also have in common that they are both members of
        the eduGAIN federation.<a href="#appendix-A-4" class="pilcrow">Â¶</a></p>
<p id="appendix-A-5">
        SWAMID and InCommon are different in how they register Entities.
        SWAMID registers organizations and lets the organizations register
        Entities that belong to the organization, while InCommon registers all
        Entities directly and not beneath any organization Entity.
        Hence the differences in depth in the federations.<a href="#appendix-A-5" class="pilcrow">Â¶</a></p>
<p id="appendix-A-6">
        Let us assume a researcher from Umea University would like to
        login to
        the LIGO Wiki. At the Wiki, the researcher will use some kind of
        discovery service to find the home identity provider (op.umu.se)<a href="#appendix-A-6" class="pilcrow">Â¶</a></p>
<p id="appendix-A-7">
        Once the RP part of the Wiki knows which OP it SHOULD talk to, it has
        to find out a couple of things about the OP. All of those things
        can be found in the metadata. But finding the metadata is not enough;
        the RP also has to trust the metadata.<a href="#appendix-A-7" class="pilcrow">Â¶</a></p>
<p id="appendix-A-8">
        Let us make a detour and start with what it takes to build a federation.<a href="#appendix-A-8" class="pilcrow">Â¶</a></p>
<div id="federation_intro">
<section id="appendix-A.1">
        <h3 id="name-setting-up-a-federation">
<a href="#appendix-A.1" class="section-number selfRef">A.1. </a><a href="#name-setting-up-a-federation" class="section-name selfRef">Setting Up a Federation</a>
        </h3>
<p id="appendix-A.1-1">
          These are the steps to set up a federation infrastructure:<a href="#appendix-A.1-1" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-A.1-2.1">
              Generation of signing keys. These must be public/private key pairs.<a href="#appendix-A.1-2.1" class="pilcrow">Â¶</a>
</li>
          <li class="compact" id="appendix-A.1-2.2">
              Set up a signing service that can sign JWTs/Entity Statements
              using the Federation Entity Keys.<a href="#appendix-A.1-2.2" class="pilcrow">Â¶</a>
</li>
          <li class="compact" id="appendix-A.1-2.3">
              Set up web services that can publish signed Entity Statements,
              one for the URL corresponding to the federation's Entity Identifier returning
              an Entity Configuration and the other one providing the fetch
              Entity Statement endpoint, as described in
              <a href="#fetch_statement" class="auto internal xref">Section 7.1.1</a>.<a href="#appendix-A.1-2.3" class="pilcrow">Â¶</a>
</li>
        </ul>
<p id="appendix-A.1-3">
          Once the previous requirements have been satisfied, a Federation Operator
          can add Entities to the federation.
          Adding an Entity comes down to:<a href="#appendix-A.1-3" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-A.1-4.1">
              Providing the Entity with the
              federation's Entity Identifier and the public part of the key pairs used
              by the federation operator for signing Entity Statements.<a href="#appendix-A.1-4.1" class="pilcrow">Â¶</a>
</li>
          <li class="compact" id="appendix-A.1-4.2">
              Getting the Entity's Entity Identifier and the JWKS that the Entity
              plans to publish in its Entity Configuration.<a href="#appendix-A.1-4.2" class="pilcrow">Â¶</a>
</li>
        </ul>
<p id="appendix-A.1-5">
          Before the federation operator starts adding Entities, there must
          be policies on who can be part of the federation and the
          layout of the federation. Is it supposed to be a one-layer federation
          like InCommon, a two-layer one like the SWAMID federation,
          or a multi-layer federation?
          The federation may also want to think about implementing other
          policies using the federation policy framework,
          as described in <a href="#federation_policy" class="auto internal xref">Section 5</a>.<a href="#appendix-A.1-5" class="pilcrow">Â¶</a></p>
<p id="appendix-A.1-6">
          With the federation in place, things can start happening.<a href="#appendix-A.1-6" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="op_discovery">
<section id="appendix-A.2">
        <h3 id="name-the-ligo-wiki-discovers-the">
<a href="#appendix-A.2" class="section-number selfRef">A.2. </a><a href="#name-the-ligo-wiki-discovers-the" class="section-name selfRef">The LIGO Wiki Discovers the OP's Metadata</a>
        </h3>
<p id="appendix-A.2-1">
          Federation Entity Discovery is a sequence of steps that starts with the RP
          fetching the Entity Configuration of the Leaf Entity (in this case,
          https://op.umu.se) using the process defined in
          <a href="#federation_configuration" class="auto internal xref">Section 6</a>.
          What follows after that is this sequence of steps:<a href="#appendix-A.2-1" class="pilcrow">Â¶</a></p>
<ol start="1" type="1" class="compact type-1" id="appendix-A.2-2">
<li id="appendix-A.2-2.1">Pick out the immediate superior Entities using the authority
              hints<a href="#appendix-A.2-2.1" class="pilcrow">Â¶</a>
</li>
          <li id="appendix-A.2-2.2">
              Fetch the configuration for each such Entity. This uses the
              process defined in
              <a href="#federation_configuration" class="auto internal xref">Section 6</a><a href="#appendix-A.2-2.2" class="pilcrow">Â¶</a>
</li>
          <li id="appendix-A.2-2.3">
              Using the fetch endpoint of the superiors to
              ask for information about the Subordinate Entity
              <a href="#fetch_statement" class="auto internal xref">Section 7.1.1</a>.<a href="#appendix-A.2-2.3" class="pilcrow">Â¶</a>
</li>
        </ol>
<p id="appendix-A.2-3">
          How many times this has to be repeated depends on the depth of the
          federation. What follows below is the result of each step the RP
          has to take to find the OP's metadata using the federation setup
          described above.<a href="#appendix-A.2-3" class="pilcrow">Â¶</a></p>
<p id="appendix-A.2-4">
          When building the Trust Chain, the Entity Statements issued
          by a superior about its Subordinate are used together with the
          Entity Configuration issued by the Leaf.<a href="#appendix-A.2-4" class="pilcrow">Â¶</a></p>
<p id="appendix-A.2-5">
          The Entity Configuration concerning Intermediates is not
          part of the Trust Chain.<a href="#appendix-A.2-5" class="pilcrow">Â¶</a></p>
<section id="appendix-A.2.1">
          <h4 id="name-configuration-information-f">
<a href="#appendix-A.2.1" class="section-number selfRef">A.2.1. </a><a href="#name-configuration-information-f" class="section-name selfRef">Configuration Information for op.umu.se</a>
          </h4>
<p id="appendix-A.2.1-1">The LIGO WIKI RP fetches the Entity Configuration from the
            OP (op.umu.se)
            using the process defined in <a href="#federation_configuration" class="auto internal xref">Section 6</a>.<a href="#appendix-A.2.1-1" class="pilcrow">Â¶</a></p>
<p id="appendix-A.2.1-2" class="keepWithNext">The result is this Entity Configuration.<a href="#appendix-A.2.1-2" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.2.1-3">
<pre>
{
  "authority_hints": [
    "https://umu.se"
  ],
  "exp": 1568397247,
  "iat": 1568310847,
  "iss": "https://op.umu.se",
  "sub": "https://op.umu.se",
  "jwks": {
    "keys": [
      {
        "e": "AQAB",
        "kid": "dEEtRjlzY3djcENuT01wOGxrZlkxb3RIQVJlMTY0...",
        "kty": "RSA",
        "n": "x97YKqc9Cs-DNtFrQ7_vhXoH9bwkDWW6En2jJ044yH..."
      }
    ]
  },
  "metadata": {
    "openid_provider": {
      "issuer": "https://op.umu.se/openid",
      "signed_jwks_uri": "https://op.umu.se/openid/jwks.jose",
      "authorization_endpoint":
        "https://op.umu.se/openid/authorization",
      "client_registration_types_supported": [
        "automatic",
        "explicit"
      ],
      "request_parameter_supported": true,
      "grant_types_supported": [
        "authorization_code",
        "implicit",
        "urn:ietf:params:oauth:grant-type:jwt-bearer"
      ],
      "id_token_signing_alg_values_supported": [
        "ES256", "RS256"
      ],
      "logo_uri":
        "https://www.umu.se/img/umu-logo-left-neg-SE.svg",
      "op_policy_uri":
        "https://www.umu.se/en/website/legal-information/",
      "response_types_supported": [
        "code",
        "code id_token",
        "token"
      ],
      "subject_types_supported": [
        "pairwise",
        "public"
      ],
      "token_endpoint": "https://op.umu.se/openid/token",
      "federation_registration_endpoint":
        "https://op.umu.se/openid/fedreg",
      "token_endpoint_auth_methods_supported": [
        "client_secret_post",
        "client_secret_basic",
        "client_secret_jwt",
        "private_key_jwt"
      ]
    }
  }
}
</pre><a href="#appendix-A.2.1-3" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.2.1-4">
            The <code>authority_hints</code> points to the
            Intermediate Entity <code>https://umu.se</code>.
            So that is the next step.<a href="#appendix-A.2.1-4" class="pilcrow">Â¶</a></p>
<p id="appendix-A.2.1-5">
            This Entity Configuration is the first link in the Trust Chain.<a href="#appendix-A.2.1-5" class="pilcrow">Â¶</a></p>
</section>
<section id="appendix-A.2.2">
          <h4 id="name-configuration-information-fo">
<a href="#appendix-A.2.2" class="section-number selfRef">A.2.2. </a><a href="#name-configuration-information-fo" class="section-name selfRef">Configuration Information for 'https://umu.se'</a>
          </h4>
<p id="appendix-A.2.2-1">The LIGO RP fetches the Entity Configuration from
            "https://umu.se" using the process defined in
            <a href="#federation_configuration" class="auto internal xref">Section 6</a>.<a href="#appendix-A.2.2-1" class="pilcrow">Â¶</a></p>
<p id="appendix-A.2.2-2">The request will look like this:<a href="#appendix-A.2.2-2" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.2.2-3">
<pre>
GET /.well-known/openid-federation HTTP/1.1
Host: umu.se
</pre><a href="#appendix-A.2.2-3" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.2.2-4">And the GET will return:<a href="#appendix-A.2.2-4" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.2.2-5">
<pre>
{
  "authority_hints": [
    "https://swamid.se"
  ],
  "exp": 1568397247,
  "iat": 1568310847,
  "iss": "https://umu.se",
  "sub": "https://umu.se",
  "jwks": {
    "keys": [
      {
        "e": "AQAB",
        "kid": "endwNUZrNTJsX2NyQlp4bjhVcTFTTVltR2gxV2RV...",
        "kty": "RSA",
        "n": "vXdXzZwQo0hxRSmZEcDIsnpg-CMEkor50SOG-1XUlM..."
      }
    ]
  },
  "metadata": {
    "federation_entity": {
      "contacts": "ops@umu.se",
      "federation_fetch_endpoint": "https://umu.se/oidc/fedapi",
      "homepage_uri": "https://www.umu.se",
      "organization_name": "UmU"
    }
  }
}
</pre><a href="#appendix-A.2.2-5" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.2.2-6">
            The only piece of information that is used from this Entity
            Statement is
            the <code>federation_fetch_endpoint</code>,
            which is used in the next step.<a href="#appendix-A.2.2-6" class="pilcrow">Â¶</a></p>
</section>
<section id="appendix-A.2.3">
          <h4 id="name-entity-statement-published-">
<a href="#appendix-A.2.3" class="section-number selfRef">A.2.3. </a><a href="#name-entity-statement-published-" class="section-name selfRef">Entity Statement Published by 'https://umu.se' about 'https://op.umu.se'</a>
          </h4>
<p id="appendix-A.2.3-1">
            The RP uses the fetch endpoint provided by https://umu.se
            as defined in <a href="#fetch_statement" class="auto internal xref">Section 7.1.1</a>
            to fetch information about
            "https://op.umu.se".<a href="#appendix-A.2.3-1" class="pilcrow">Â¶</a></p>
<p id="appendix-A.2.3-2">The request will look like this:<a href="#appendix-A.2.3-2" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.2.3-3">
<pre>
GET /oidc/fedapi?sub=https%3A%2F%2Fop.umu.se&amp;
iss=https%3A%2F%2Fumu.se HTTP/1.1
Host: umu.se
</pre><a href="#appendix-A.2.3-3" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.2.3-4">and the result is this:<a href="#appendix-A.2.3-4" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.2.3-5">
<pre>
{
  "exp": 1568397247,
  "iat": 1568310847,
  "iss": "https://umu.se",
  "jwks": {
    "keys": [
      {
        "e": "AQAB",
        "kid": "dEEtRjlzY3djcENuT01wOGxrZlkxb3RIQVJlMTY0...",
        "kty": "RSA",
        "n": "x97YKqc9Cs-DNtFrQ7_vhXoH9bwkDWW6En2jJ044yH..."
      }
    ]
  },
  "metadata_policy": {
    "openid_provider": {
      "contacts": {
        "add": [
          "ops@swamid.se"
        ]
      },
      "organization_name": {
        "value": "University of Ume\u00e5"
      },
      "subject_types_supported": {
        "value": [
          "pairwise"
        ]
      },
      "token_endpoint_auth_methods_supported": {
        "default": [
          "private_key_jwt"
        ],
        "subset_of": [
          "private_key_jwt",
          "client_secret_jwt"
        ],
        "superset_of": [
          "private_key_jwt"
        ]
      }
    }
  },
  "sub": "https://op.umu.se"
}
</pre><a href="#appendix-A.2.3-5" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.2.3-6">
            This is the second link in the Trust Chain.<a href="#appendix-A.2.3-6" class="pilcrow">Â¶</a></p>
<p id="appendix-A.2.3-7">
            Notable here is that this path leads to two Trust Anchors using the
            same next step ("https://swamid.se").<a href="#appendix-A.2.3-7" class="pilcrow">Â¶</a></p>
</section>
<section id="appendix-A.2.4">
          <h4 id="name-configuration-information-for">
<a href="#appendix-A.2.4" class="section-number selfRef">A.2.4. </a><a href="#name-configuration-information-for" class="section-name selfRef">Configuration Information for 'https://swamid.se'</a>
          </h4>
<p id="appendix-A.2.4-1">The LIGO Wiki RP fetches the Entity Configuration from
            "https://swamid.se" using the process defined in
            <a href="#federation_configuration" class="auto internal xref">Section 6</a>.<a href="#appendix-A.2.4-1" class="pilcrow">Â¶</a></p>
<p id="appendix-A.2.4-2">The request will look like this:<a href="#appendix-A.2.4-2" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.2.4-3">
<pre>
GET /.well-known/openid-federation HTTP/1.1
Host: swamid.se
</pre><a href="#appendix-A.2.4-3" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.2.4-4">And the GET will return:<a href="#appendix-A.2.4-4" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.2.4-5">
<pre>
{
  "authority_hints": [
    "https://edugain.geant.org"
  ],
  "exp": 1568397247,
  "iat": 1568310847,
  "iss": "https://swamid.se",
  "jwks": {
    "keys": [
      {
        "e": "AQAB",
        "kid": "N1pQTzFxUXZ1RXVsUkVuMG5uMnVDSURGRVdhUzdO...",
        "kty": "RSA",
        "n": "3EQc6cR_GSBq9km9-WCHY_lWJZWkcn0M05TGtH6D9S..."
      }
    ]
  },
  "metadata": {
    "federation_entity": {
      "contacts": "ops@swamid.se",
      "federation_fetch_endpoint":
        "https://swamid.se/fedapi",
      "homepage_uri": "https://www.sunet.se/swamid/",
      "organization_name": "SWAMID"
    }
  },
  "sub": "https://swamid.se"
}
</pre><a href="#appendix-A.2.4-5" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.2.4-6">
            The only piece of information that is used from this Entity
            Statement is
            the <code>federation_fetch_endpoint</code>,
            which is used in the next step.<a href="#appendix-A.2.4-6" class="pilcrow">Â¶</a></p>
</section>
<section id="appendix-A.2.5">
          <h4 id="name-entity-statement-published-b">
<a href="#appendix-A.2.5" class="section-number selfRef">A.2.5. </a><a href="#name-entity-statement-published-b" class="section-name selfRef">Entity Statement Published by 'https://swamid.se' about 'https://umu.se'</a>
          </h4>
<p id="appendix-A.2.5-1">
            The LIGO Wiki RP uses the fetch endpoint provided by
            "https://swamid.se" as defined in
            <a href="#fetch_statement" class="auto internal xref">Section 7.1.1</a>
            to fetch information about
            "https://umu.se".<a href="#appendix-A.2.5-1" class="pilcrow">Â¶</a></p>
<p id="appendix-A.2.5-2">The request will look like this:<a href="#appendix-A.2.5-2" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.2.5-3">
<pre>
GET /fedapi?sub=https%3A%2F%2Fumu.se&amp;
iss=https%3A%2F%2Fswamid.se HTTP/1.1
Host: swamid.se
</pre><a href="#appendix-A.2.5-3" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.2.5-4">and the result is this:<a href="#appendix-A.2.5-4" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.2.5-5">
<pre>
{
  "exp": 1568397247,
  "iat": 1568310847,
  "iss": "https://swamid.se",
  "jwks": {
    "keys": [
      {
        "e": "AQAB",
        "kid": "endwNUZrNTJsX2NyQlp4bjhVcTFTTVltR2gxV2RV...",
        "kty": "RSA",
        "n": "vXdXzZwQo0hxRSmZEcDIsnpg-CMEkor50SOG-1XUlM..."
      }
    ]
  },
  "metadata_policy": {
    "openid_provider": {
      "id_token_signing_alg_values_supported": {
        "subset_of": [
          "RS256",
          "ES256",
          "ES384",
          "ES512"
        ]
      },
      "token_endpoint_auth_methods_supported": {
        "subset_of": [
          "client_secret_jwt",
          "private_key_jwt"
        ]
      },
      "userinfo_signing_alg_values_supported": {
        "subset_of": [
          "ES256",
          "ES384",
          "ES512"
        ]
      }
    }
  },
  "sub": "https://umu.se"
}
</pre><a href="#appendix-A.2.5-5" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.2.5-6">
            This is the third link in the Trust Chain.<a href="#appendix-A.2.5-6" class="pilcrow">Â¶</a></p>
<p id="appendix-A.2.5-7">
            If we assume that the issuer of this Entity Statement is not in the
            list of Trust Anchors the LIGO Wiki RP has access to, we have to go
            one step further.<a href="#appendix-A.2.5-7" class="pilcrow">Â¶</a></p>
</section>
<section id="appendix-A.2.6">
          <h4 id="name-configuration-information-for-">
<a href="#appendix-A.2.6" class="section-number selfRef">A.2.6. </a><a href="#name-configuration-information-for-" class="section-name selfRef">Configuration Information for 'https://edugain.geant.org'</a>
          </h4>
<p id="appendix-A.2.6-1">RP fetches the Entity Configuration from
            "https://edugain.geant.org" using the process defined in
            <a href="#federation_configuration" class="auto internal xref">Section 6</a>.<a href="#appendix-A.2.6-1" class="pilcrow">Â¶</a></p>
<p id="appendix-A.2.6-2">The request will look like this:<a href="#appendix-A.2.6-2" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.2.6-3">
<pre>
GET /.well-known/openid-federation HTTP/1.1
Host: edugain.geant.org
</pre><a href="#appendix-A.2.6-3" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.2.6-4">And the GET will return:<a href="#appendix-A.2.6-4" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.2.6-5">
<pre>
{
  "exp": 1568397247,
  "iat": 1568310847,
  "iss": "https://edugain.geant.org",
  "sub": "https://edugain.geant.org",
  "jwks": {
    "keys": [
      {
        "e": "AQAB",
        "kid": "Sl9DcjFxR3hrRGdabUNIR21KT3dvdWMyc2VUM2Fr...",
        "kty": "RSA",
        "n": "xKlwocDXUw-mrvDSO4oRrTRrVuTwotoBFpozvlq-1q..."
      }
    ]
  },
  "metadata": {
    "federation_entity": {
      "federation_fetch_endpoint": "https://geant.org/edugain/api"
    }
  }
}

</pre><a href="#appendix-A.2.6-5" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.2.6-6">
            Within the Trust Anchor Entity Configuration, the Relying Party
            looks for the <code>federation_fetch_endpoint</code>
            and gets the updated Federation Entity Keys of the Trust Anchor.
            Each Entity within a
            Federation may change their Federation Entity Keys,
            or any other attributes, at any time. See
            <a href="#key_rollover_anchor" class="auto internal xref">Section 9.2</a> for futhers details.<a href="#appendix-A.2.6-6" class="pilcrow">Â¶</a></p>
</section>
<section id="appendix-A.2.7">
          <h4 id="name-entity-statement-published-by">
<a href="#appendix-A.2.7" class="section-number selfRef">A.2.7. </a><a href="#name-entity-statement-published-by" class="section-name selfRef">Entity Statement Published by 'https://edugain.geant.org' about 'https://swamid.se'</a>
          </h4>
<p id="appendix-A.2.7-1">
            The LIGO Wiki RP uses the fetch endpoint of
            https://edugain.geant.org as
            defined in <a href="#fetch_statement" class="auto internal xref">Section 7.1.1</a>
            to fetch information about
            "https://swamid.se".<a href="#appendix-A.2.7-1" class="pilcrow">Â¶</a></p>
<p id="appendix-A.2.7-2">The request will look like this:<a href="#appendix-A.2.7-2" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.2.7-3">
<pre>
GET /edugain/api?sub=https%3A%2F%2Fswamid.se&amp;
iss=https%3A%2F%2Fedugain.geant.org HTTP/1.1
Host: geant.org
</pre><a href="#appendix-A.2.7-3" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.2.7-4">and the result is this:<a href="#appendix-A.2.7-4" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.2.7-5">
<pre>
{
  "exp": 1568397247,
  "iat": 1568310847,
  "iss": "https://edugain.geant.org",
  "jwks": {
    "keys": [
      {
        "e": "AQAB",
        "kid": "N1pQTzFxUXZ1RXVsUkVuMG5uMnVDSURGRVdhUzdO...",
        "kty": "RSA",
        "n": "3EQc6cR_GSBq9km9-WCHY_lWJZWkcn0M05TGtH6D9S..."
      }
    ]
  },
  "metadata_policy": {
    "openid_provider": {
      "contacts": {
        "add": "ops@edugain.geant.org"
      }
    },
    "openid_relying_party": {
      "contacts": {
        "add": "ops@edugain.geant.org"
      }
    }
  },
  "sub": "https://swamid.se"
}
</pre><a href="#appendix-A.2.7-5" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.2.7-6">
            If we assume that the issuer of this statement appears in the list
            of Trust Anchors the LIGO Wiki RP has access to, this would be
            the fourth and final Entity Statement in the Trust Chain.<a href="#appendix-A.2.7-6" class="pilcrow">Â¶</a></p>
<p id="appendix-A.2.7-7">
            We now have the whole chain from the Entity Configuration of
            the
            Leaf Entity up until the last one that is issued by a Trust Anchor. All in
            all,
            we have:<a href="#appendix-A.2.7-7" class="pilcrow">Â¶</a></p>
<ol start="1" type="1" class="compact type-1" id="appendix-A.2.7-8">
<li id="appendix-A.2.7-8.1">Entity Configuration by the Leaf Entity (https://op.umu.se)<a href="#appendix-A.2.7-8.1" class="pilcrow">Â¶</a>
</li>
            <li id="appendix-A.2.7-8.2">Entity Configuration by https://umu.se<a href="#appendix-A.2.7-8.2" class="pilcrow">Â¶</a>
</li>
            <li id="appendix-A.2.7-8.3">Statement issued by https://umu.se about https://op.umu.se<a href="#appendix-A.2.7-8.3" class="pilcrow">Â¶</a>
</li>
            <li id="appendix-A.2.7-8.4">Entity Configuration by https://swamid.se<a href="#appendix-A.2.7-8.4" class="pilcrow">Â¶</a>
</li>
            <li id="appendix-A.2.7-8.5">Statement issued by https://swamid.se about https://umu.se<a href="#appendix-A.2.7-8.5" class="pilcrow">Â¶</a>
</li>
            <li id="appendix-A.2.7-8.6">Entity Configuration by https://edugain.geant.org<a href="#appendix-A.2.7-8.6" class="pilcrow">Â¶</a>
</li>
            <li id="appendix-A.2.7-8.7">Statement issued by https://edugain.geant.org about
                https://swamid.se<a href="#appendix-A.2.7-8.7" class="pilcrow">Â¶</a>
</li>
          </ol>
<p id="appendix-A.2.7-9">
            Using the public keys of the Trust Anchor that the LIGO Wiki RP has
            been
            provided within some secure out-of-band way, it can now verify the
            Trust Chain as described in
            <a href="#trust_chain_validation" class="auto internal xref">Section 8.2</a>.<a href="#appendix-A.2.7-9" class="pilcrow">Â¶</a></p>
</section>
<section id="appendix-A.2.8">
          <h4 id="name-verified-metadata-for-opumu">
<a href="#appendix-A.2.8" class="section-number selfRef">A.2.8. </a><a href="#name-verified-metadata-for-opumu" class="section-name selfRef">Verified Metadata for op.umu.se</a>
          </h4>
<p id="appendix-A.2.8-1">Having verified the chain, the LIGO Wiki RP can proceed with the
            next step.<a href="#appendix-A.2.8-1" class="pilcrow">Â¶</a></p>
<p id="appendix-A.2.8-2">Combining the metadata policies from the tree Entity Statements we
            have by
            a superior about its Subordinate and applying the combined policy
            to the
            metadata statement that the Leaf Entity presented, we get:<a href="#appendix-A.2.8-2" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.2.8-3">
<pre>
{
  "authorization_endpoint":
    "https://op.umu.se/openid/authorization",
  "claims_parameter_supported": false,
  "contacts": [
    "ops@swamid.se"
  ],
  "federation_registration_endpoint":
    "https://op.umu.se/openid/fedreg",
  "client_registration_types_supported": [
    "automatic",
    "explicit"
  ],
  "grant_types_supported": [
    "authorization_code",
    "implicit",
    "urn:ietf:params:oauth:grant-type:jwt-bearer"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256",
    "ES256"
  ],
  "issuer": "https://op.umu.se/openid",
  "signed_jwks_uri": "https://op.umu.se/openid/jwks.jose",
  "logo_uri":
    "https://www.umu.se/img/umu-logo-left-neg-SE.svg",
  "organization_name": "University of Ume\u00e5",
  "op_policy_uri":
    "https://www.umu.se/en/website/legal-information/",
  "request_parameter_supported": true,
  "request_uri_parameter_supported": true,
  "require_request_uri_registration": true,
  "response_types_supported": [
    "code",
    "code id_token",
    "token"
  ],
  "subject_types_supported": [
    "pairwise"
  ],
  "token_endpoint": "https://op.umu.se/openid/token",
  "token_endpoint_auth_methods_supported": [
    "private_key_jwt",
    "client_secret_jwt"
  ]
}

</pre><a href="#appendix-A.2.8-3" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.2.8-4">
            We have now reached the end of the Provider Discovery process.<a href="#appendix-A.2.8-4" class="pilcrow">Â¶</a></p>
</section>
</section>
</div>
<section id="appendix-A.3">
        <h3 id="name-the-two-ways-of-doing-clien">
<a href="#appendix-A.3" class="section-number selfRef">A.3. </a><a href="#name-the-two-ways-of-doing-clien" class="section-name selfRef">The Two Ways of Doing Client Registration</a>
        </h3>
<p id="appendix-A.3-1">
          As described in
          <a href="#client_registration" class="auto internal xref">Section 10</a>,
          there are two
          ways that can be used to do client registration:<a href="#appendix-A.3-1" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlCompact dlNewline" id="appendix-A.3-2">
          <dt id="appendix-A.3-2.1">Automatic</dt>
          <dd style="margin-left: 1.5em" id="appendix-A.3-2.2">
              No negotiation between the RP and the OP is made regarding
              what features the client SHOULD use in future communication are
              done. The RP's published metadata filtered by the chosen trust
              chain's
              metadata policies defines the metadata that is to be used.<a href="#appendix-A.3-2.2" class="pilcrow">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="appendix-A.3-2.3">Explicit</dt>
          <dd style="margin-left: 1.5em" id="appendix-A.3-2.4">
              The RP will access the
              <code>federation_registration_endpoint</code>,
              which provides the RP's metadata. The OP MAY return a
              metadata policy that adds restrictions over and above what the
              Trust Chain already has defined.<a href="#appendix-A.3-2.4" class="pilcrow">Â¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<div id="AutomaticRegExample">
<section id="appendix-A.3.1">
          <h4 id="name-rp-sends-authentication-req">
<a href="#appendix-A.3.1" class="section-number selfRef">A.3.1. </a><a href="#name-rp-sends-authentication-req" class="section-name selfRef">RP Sends Authentication Request (Automatic Registration)</a>
          </h4>
<p id="appendix-A.3.1-1">
            The LIGO Wiki RP does not do any registration but goes directly to
            sending an Authentication Request.<a href="#appendix-A.3.1-1" class="pilcrow">Â¶</a></p>
<p id="appendix-A.3.1-2">
            Here is an example of such an Authentication Request:<a href="#appendix-A.3.1-2" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.3.1-3">
<pre>
GET /openid/authorization?
  request=eyJhbGciOiJSUzI1NiIsImtpZCI6ImRVTjJhMDF3Umtoa1NXc
    GxRVGh2Y1ZCSU5VSXdUVWRPVUZVMlRtVnJTbWhFUVhnelpYbHBUemRR
    TkEifQ.eyJyZXNwb25zZV90eXBlIjogImNvZGUiLCAic2NvcGUiOiAi
    b3BlbmlkIHByb2ZpbGUgZW1haWwiLCAiY2xpZW50X2lkIjogImh0dHB
    zOi8vd2lraS5saWdvLm9yZyIsICJzdGF0ZSI6ICIyZmY3ZTU4OS0zOD
    Q4LTQ2ZGEtYTNkMi05NDllMTIzNWU2NzEiLCAibm9uY2UiOiAiZjU4M
    WExODYtYWNhNC00NmIzLTk0ZmMtODA0ODQwODNlYjJjIiwgInJlZGly
    ZWN0X3VyaSI6ICJodHRwczovL3dpa2kubGlnby5vcmcvb3BlbmlkL2N
    hbGxiYWNrIiwgImlzcyI6ICIiLCAiaWF0IjogMTU5MzU4ODA4NSwgIm
    F1ZCI6ICJodHRwczovL29wLnVtdS5zZSJ9.cRwSFNcDx6VsacAQDcIx
    5OAt_Pj30I_uUKRh04N4QJd6MZ0f50sETRv8uspSt9fMa-5yV3uzthX
    _v8OtQrV33gW1vzgOSRCdHgeCN40StbzjFk102seDwtU_Uzrcsy7KrX
    YSBp8U0dBDjuxC6h18L8ExjeR-NFjcrhy0wwua7Tnb4QqtN0QCia6DD
    8QBNVTL1Ga0YPmMdT25wS26wug23IgpbZB20VUosmMGgGtS5yCI5AwK
    Bhozv-oBH5KxxHzH1Oss-RkIGiQnjRnaWwEOTITmfZWra1eHP254wFF
    2se-EnWtz1q2XwsD9NSsOEJwWJPirPPJaKso8ng6qrrOSgw
  &amp;response_type=code
  &amp;client_id=https%3A%2F%2Fwiki.ligo.org
  &amp;redirect_uri=https%3A%2F%2Fwiki.ligo.org/openid/callback
  &amp;scope=openid+profile+email
  HTTP/1.1
Host: op.umu.se
</pre><a href="#appendix-A.3.1-3" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.3.1-4">
            The OP receiving this Authentication Request will, unless the
            RP is already registered, start to dynamically fetch
            and
            establish trust with the RP.<a href="#appendix-A.3.1-4" class="pilcrow">Â¶</a></p>
<section id="appendix-A.3.1.1">
            <h5 id="name-op-fetches-entity-statement">
<a href="#appendix-A.3.1.1" class="section-number selfRef">A.3.1.1. </a><a href="#name-op-fetches-entity-statement" class="section-name selfRef">OP Fetches Entity Statements</a>
            </h5>
<p id="appendix-A.3.1.1-1">
              The OP needs to establish a Trust Chain for the RP
              (wiki.ligo.org).
              The OP in this example is configured with public keys of two
              federations:<a href="#appendix-A.3.1.1-1" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-A.3.1.1-2.1">https://edugain.geant.org<a href="#appendix-A.3.1.1-2.1" class="pilcrow">Â¶</a>
</li>
              <li class="compact" id="appendix-A.3.1.1-2.2">https://swamid.se<a href="#appendix-A.3.1.1-2.2" class="pilcrow">Â¶</a>
</li>
            </ul>
<p id="appendix-A.3.1.1-3">
              The OP starts to resolve metadata for the Client Identifier
              https://wiki.ligo.org by fetching the Entity Configuration
              using
              the process described in <a href="#federation_configuration" class="auto internal xref">Section 6</a>.<a href="#appendix-A.3.1.1-3" class="pilcrow">Â¶</a></p>
<p id="appendix-A.3.1.1-4">
              The process is the same as described in
              <a href="#op_discovery" class="auto internal xref">Appendix A.2</a>
              and will result in a Trust Chain with the following Entity
              Statements:<a href="#appendix-A.3.1.1-4" class="pilcrow">Â¶</a></p>
<ol start="1" type="1" class="compact type-1" id="appendix-A.3.1.1-5">
<li id="appendix-A.3.1.1-5.1">Entity Configuration by the Leaf Entity
                  https://wiki.ligo.org<a href="#appendix-A.3.1.1-5.1" class="pilcrow">Â¶</a>
</li>
              <li id="appendix-A.3.1.1-5.2">Statement issued by https://incommon.org about
                  https://wiki.ligo.org<a href="#appendix-A.3.1.1-5.2" class="pilcrow">Â¶</a>
</li>
              <li id="appendix-A.3.1.1-5.3">Statement issued by https://edugain.geant.org about
                  https://incommon.org<a href="#appendix-A.3.1.1-5.3" class="pilcrow">Â¶</a>
</li>
            </ol>
</section>
<div id="rp_metadata_eval">
<section id="appendix-A.3.1.2">
            <h5 id="name-op-evaluates-the-rp-metadat">
<a href="#appendix-A.3.1.2" class="section-number selfRef">A.3.1.2. </a><a href="#name-op-evaluates-the-rp-metadat" class="section-name selfRef">OP Evaluates the RP Metadata</a>
            </h5>
<p id="appendix-A.3.1.2-1">
              Using the public keys of the Trust Anchor that the LIGO Wiki RP
              has
              been
              provided within some secure out-of-band way, it can now verify
              the
              Trust Chain as described in
              <a href="#trust_chain_validation" class="auto internal xref">Section 8.2</a>.<a href="#appendix-A.3.1.2-1" class="pilcrow">Â¶</a></p>
<p id="appendix-A.3.1.2-2">
              We will not list the complete Entity Statements but only the
              <code>metadata</code>
              and <code>metadata_policy</code> parts.
              There are two metadata policies:<a href="#appendix-A.3.1.2-2" class="pilcrow">Â¶</a></p>
<span class="break"></span><dl class="dlCompact dlParallel" id="appendix-A.3.1.2-3">
              <dt id="appendix-A.3.1.2-3.1">edugain.geant.org</dt>
              <dd style="margin-left: 1.5em" id="appendix-A.3.1.2-3.2">
                <div class="alignLeft art-text artwork" id="appendix-A.3.1.2-3.2.1">
<pre>
"metadata_policy": {
  "openid_provider": {
    "contacts": {
      "add": "ops@edugain.geant.org"
    }
  },
  "openid_relying_party": {
    "contacts": {
      "add": "ops@edugain.geant.org"
    }
  }
}
</pre><a href="#appendix-A.3.1.2-3.2.1" class="pilcrow">Â¶</a>
</div>
</dd>
            <dd class="break"></dd>
</dl>
<span class="break"></span><dl class="dlCompact dlParallel" id="appendix-A.3.1.2-4">
              <dt id="appendix-A.3.1.2-4.1">incommon.org</dt>
              <dd style="margin-left: 1.5em" id="appendix-A.3.1.2-4.2">
                <div class="alignLeft art-text artwork" id="appendix-A.3.1.2-4.2.1">
<pre>
"metadata_policy": {
  "openid_relying_party": {
    "application_type": {
      "one_of": [
        "web",
        "native"
      ]
    },
    "contacts": {
      "add": "ops@incommon.org"
    },
    "grant_types": {
      "subset_of": [
        "authorization_code",
        "refresh_token"
      ]
    }
  }
}
</pre><a href="#appendix-A.3.1.2-4.2.1" class="pilcrow">Â¶</a>
</div>
</dd>
            <dd class="break"></dd>
</dl>
<p id="appendix-A.3.1.2-5">
              Combining these and apply them to the metadata for
              wiki.ligo.org:<a href="#appendix-A.3.1.2-5" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.3.1.2-6">
<pre>
"metadata": {
  "application_type": "web",
  "client_name": "LIGO Wiki",
  "contacts": [
    "ops@ligo.org"
  ],
  "grant_types": [
    "authorization_code",
    "refresh_token"
  ],
  "id_token_signed_response_alg": "RS256",
  "signed_jwks_uri": "https://wiki.ligo.org/jwks.jose",
  "redirect_uris": [
    "https://wiki.ligo.org/openid/callback"
  ],
  "response_types": [
    "code"
  ],
  "subject_type": "public"
}
</pre><a href="#appendix-A.3.1.2-6" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.3.1.2-7">
              The final result is:<a href="#appendix-A.3.1.2-7" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.3.1.2-8">
<pre>
{
  "application_type": "web",
  "client_name": "LIGO Wiki",
  "contacts": [
    "ops@ligo.org",
    "ops@edugain.geant.org",
    "ops@incommon.org"
  ],
  "grant_types": [
    "refresh_token",
    "authorization_code"
  ],
  "id_token_signed_response_alg": "RS256",
  "signed_jwks_uri": "https://wiki.ligo.org/jwks.jose",
  "redirect_uris": [
    "https://wiki.ligo.org/openid/callback"
  ],
  "response_types": [
    "code"
  ],
  "subject_type": "public"
}
</pre><a href="#appendix-A.3.1.2-8" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.3.1.2-9">
              Once the Trust Chain and the final Relying Party metadata
              have been obtained, the OpenID Provider has
              everything needed to validate the signature of the
              Request Object in the Authentication Request, using the
              public keys made available at the
              <code>signed_jwks_uri</code> endpoint.<a href="#appendix-A.3.1.2-9" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="ExplicitRegExample">
<section id="appendix-A.3.2">
          <h4 id="name-client-starts-with-registra">
<a href="#appendix-A.3.2" class="section-number selfRef">A.3.2. </a><a href="#name-client-starts-with-registra" class="section-name selfRef">Client Starts with Registration (Explicit Client Registration)</a>
          </h4>
<p id="appendix-A.3.2-1">
            Here the LIGO Wiki RP sends a client registration request to the
            <code>federation_registration_endpoint</code>
            of the OP (op.umu.se).
            What it sends is an Entity Configuration.<a href="#appendix-A.3.2-1" class="pilcrow">Â¶</a></p>
<p id="appendix-A.3.2-2">
            The JWT Claims Set of that Entity Configuration might look like this:<a href="#appendix-A.3.2-2" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.3.2-3">
<pre>
{
  "iss": "https://wiki.ligo.org",
  "sub": "https://wiki.ligo.org",
  "iat": 1676045527,
  "exp": 1676063610,
  "aud": "https://op.umu.se",
  "metadata": {
    "openid_relying_party": {
      "application_type": "web",
      "client_name": "LIGO Wiki",
      "contacts": ["ops@ligo.org"],
      "grant_types": ["authorization_code"],
      "id_token_signed_response_alg": "RS256",
      "signed_jwks_uri": "https://wiki.ligo.org/jwks.jose",
      "redirect_uris": [
        "https://wiki.ligo.org/openid/callback"
      ],
      "response_types": ["code"],
      "subject_type": "public"
    }
  },
  "jwks": {
    "keys": [
      {
        "kty": "RSA",
        "use": "sig",
        "kid":
          "U2JTWHY0VFg0a2FEVVdTaHptVDJsNDNiSDk5MXRBVEtNSFVkeXZwb",
        "e": "AQAB",
        "n":
          "4AZjgqFwMhTVSLrpzzNcwaCyVD88C_Hb3Bmor97vH-2AzldhuVb8K..."
      }
    ]
  },
  "authority_hints": ["https://incommon.org"]
}
</pre><a href="#appendix-A.3.2-3" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.3.2-4">
            Once the OP has the Entity Configuration, it proceeds with the same
            sequence of steps as laid out in <a href="#op_discovery" class="auto internal xref">Appendix A.2</a>.<a href="#appendix-A.3.2-4" class="pilcrow">Â¶</a></p>
<p id="appendix-A.3.2-5">
            The OP will end up with the same RP metadata described in
            <a href="#rp_metadata_eval" class="auto internal xref">Appendix A.3.1.2</a>, but it now can
            return a metadata policy that it wants to be applied to the RP's
            metadata. This metadata policy will be combined with the
            Trust Chain's combined metadata policy before being applied to the
            RP's metadata.<a href="#appendix-A.3.2-5" class="pilcrow">Â¶</a></p>
<p id="appendix-A.3.2-6">
            If we assume that the OP does not support refresh tokens,
            it MAY want to add a metadata policy that says:<a href="#appendix-A.3.2-6" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.3.2-7">
<pre>
"metadata_policy": {
  "openid_relying_party": {
    "grant_types": {
      "subset_of": [
        "authorization_code"
      ]
    }
  }
}
</pre><a href="#appendix-A.3.2-7" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.3.2-8">
            Thus, the Entity Statement returned by the OP to the RP MAY look
            like this:<a href="#appendix-A.3.2-8" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.3.2-9">
<pre>

{
  "trust_anchor_id": "https://edugain.geant.org",
  "metadata_policy": {
    "openid_relying_party": {
      "application_type": {
        "one_of": [
          "web",
          "native"
        ]
      },
      "contacts": {
        "add": [
          "ops@incommon.org",
          "ops@edugain.geant.org"
        ]
      },
      "grant_types": {
        "subset_of": [
          "authorization_code",
          "refresh_token"
        ]
      }
    }
  },
  "metadata": {
    "openid_relying_party": {
      "client_id": "m3GyHw",
      "client_secret_expires_at": 1604049619,
      "client_secret":
        "cb44eed577f3b5edf3e08362d47a0dc44630b3dc6ea99f7a79205"
      "client_id_issued_at": 1601457619,
    }
  },
  "authority_hints": [
    "https://incommon.org"
  ],
  "aud": "https://wiki.ligo.org",
  "jwks": {
    "keys": [
      {
        "kty": "RSA",
        "use": "sig",
        "kid":
          "U2JTWHY0VFg0a2FEVVdTaHptVDJsNDNiSDk5MXRBVEtNSFVkeXZwb",
        "e": "AQAB",
        "n":
          "4AZjgqFwMhTVSLrpzzNcwaCyVD88C_Hb3Bmor97vH-2AzldhuVb8K..."
      },
      {
        "kty": "EC",
        "use": "sig",
        "kid": "LWtFcklLOGdrW",
        "crv": "P-256",
        "x": "X2S1dFE7zokQDST0bfHdlOWxOc8FC1l4_sG1Kwa4l4s",
        "y": "812nU6OCKxgc2ZgSPt_dkXbYldG_smHJi4wXByDHc6g"
      }
    ]
  },
  "iss": "https://op.umu.se",
  "iat": 1601457619,
  "exp": 1601544019
}
</pre><a href="#appendix-A.3.2-9" class="pilcrow">Â¶</a>
</div>
<p id="appendix-A.3.2-10">
            And the resulting metadata used by the RP could look like:<a href="#appendix-A.3.2-10" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A.3.2-11">
<pre>
{
  "application_type": "web",
  "client_name": "LIGO Wiki",
  "client_id": "m3GyHw",
  "client_secret_expires_at": 1604049619,
  "client_secret": "cb44eed577f3b5edf3e08362d47a0dc44630b3dc6ea99f7a79205"
  "client_id_issued_at": 1601457619,
  "contacts": [
    "ops@edugain.geant.org",
    "ops@incommon.org",
    "ops@ligo.org"
  ],
  "grant_types": [
    "authorization_code"
  ],
  "id_token_signed_response_alg": "RS256",
  "signed_jwks_uri": "https://wiki.ligo.org/jwks.jose",
  "redirect_uris": [
    "https://wiki.ligo.org/openid/callback"
  ],
  "response_types": [
    "code"
  ],
  "subject_type": "public"
}
</pre><a href="#appendix-A.3.2-11" class="pilcrow">Â¶</a>
</div>
</section>
</div>
</section>
</section>
<div id="Notices">
<section id="appendix-B">
      <h2 id="name-notices">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-notices" class="section-name selfRef">Notices</a>
      </h2>
<p id="appendix-B-1">
        Copyright (c) 2023 The OpenID Foundation.<a href="#appendix-B-1" class="pilcrow">Â¶</a></p>
<p id="appendix-B-2">
        The OpenID Foundation (OIDF) grants to any Contributor, developer,
        implementer, or other interested party a non-exclusive, royalty free,
        worldwide copyright license to reproduce, prepare derivative works from,
        distribute, perform and display, this Implementers Draft or Final
        Specification solely for the purposes of (i) developing specifications,
        and (ii) implementing Implementers Drafts and Final Specifications based
        on such documents, provided that attribution be made to the OIDF as the
        source of the material, but that such attribution does not indicate an
        endorsement by the OIDF.<a href="#appendix-B-2" class="pilcrow">Â¶</a></p>
<p id="appendix-B-3">
        The technology described in this specification was made available
        from contributions from various sources, including members of the OpenID
        Foundation and others. Although the OpenID Foundation has taken steps to
        help ensure that the technology is available for distribution, it takes
        no position regarding the validity or scope of any intellectual property
        or other rights that might be claimed to pertain to the implementation
        or use of the technology described in this specification or the extent
        to which any license under such rights might or might not be available;
        neither does it represent that it has made any independent effort to
        identify any such rights. The OpenID Foundation and the contributors to
        this specification make no (and hereby expressly disclaim any)
        warranties (express, implied, or otherwise), including implied
        warranties of merchantability, non-infringement, fitness for a
        particular purpose, or title, related to this specification, and the
        entire risk as to implementing this specification is assumed by the
        implementer. The OpenID Intellectual Property Rights policy requires
        contributors to offer a patent promise not to assert certain patent
        claims against other contributors and against implementers. The OpenID
        Foundation invites any interested party to bring to its attention any
        copyrights, patents, patent applications, or other proprietary rights
        that MAY cover technology that MAY be required to practice this
        specification.<a href="#appendix-B-3" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="Acknowledgements">
<section id="appendix-C">
      <h2 id="name-acknowledgements">
<a href="#appendix-C" class="section-number selfRef">Appendix C. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="appendix-C-1">
        The authors wish to acknowledge the contributions of the following
        individuals and organizations to this specification:
        Heather Flanagan,
        Samuel Gulliksson,
        Takahiko Kawasaki,
        Torsten Lodderstedt,
        Roberto Polli,
        Jouke Roorda,
        Mischa SallÃ©,
        Marcos Sanz,
        Peter Schober,
        Michael Schwartz,
        Kristina Yasuda,
        and
        the JRA3T3 task force of GEANT4-2.<a href="#appendix-C-1" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="History">
<section id="appendix-D">
      <h2 id="name-document-history">
<a href="#appendix-D" class="section-number selfRef">Appendix D. </a><a href="#name-document-history" class="section-name selfRef">Document History</a>
      </h2>
<p id="appendix-D-1">[[ To be removed from the final specification ]]<a href="#appendix-D-1" class="pilcrow">Â¶</a></p>
<p id="appendix-D-2">
        -27<a href="#appendix-D-2" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-3.1">
            Fixed #1756: Clarified that the authority_hints in the Entity
            Statement of an explicit registration response is single-valued.<a href="#appendix-D-3.1" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-3.2">
            Added text about the usage of metadata besides metadata_policy.<a href="#appendix-D-3.2" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-3.3">
            Fixed #1745 #1746: Non normative example of Trust Mark status endpoint.<a href="#appendix-D-3.3" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-3.4">
            Fixed #1747: Client Registration Response content-type set to application/entity-statement+jwt.<a href="#appendix-D-3.4" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-3.5">
            Fixed #1740: Metadata policy example for OIDC, removed scopes.<a href="#appendix-D-3.5" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-3.6">
            Fixed #1755: clarification on the key to be used for Federation operations.<a href="#appendix-D-3.6" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-3.7">
              The "essential" policy operator can be used in conjunction with
              one_of, subset_of, superset_of to make their presence optional.<a href="#appendix-D-3.7" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-3.8">
            Fixed #1779: Entity Type as defined term.<a href="#appendix-D-3.8" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-3.9">
            Added Sequence Diagram representing a Federation Entity Discovery and metadata evaluation.<a href="#appendix-D-3.9" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-3.10">
            Fixed #1757: Federation Historical Keys endpoint support for revocation status. Endpoint enabled for all the Federation Entities.<a href="#appendix-D-3.10" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-3.11">
            Fixed #1803: Subordinate is a defined term and other small editorial changes after Heather's revision.<a href="#appendix-D-3.11" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-3.12">
     Added Cryptographic Trust Mechanism description.<a href="#appendix-D-3.12" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-3.13">
     Fixed #1660: Clarified that Explicit Registration uses no parameters and added Explicit Registration example.<a href="#appendix-D-3.13" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-3.14">
     Fixed #1782: Reference protected resource metadata draft.<a href="#appendix-D-3.14" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-3.15">
     Fixed #1809: Replaced use of "trust issuers" terminology.<a href="#appendix-D-3.15" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-3.16">
     Fixed #1661: Tightened descriptions of metadata standards used.<a href="#appendix-D-3.16" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-3.17">
     Fixed #1801: Better described function of "essential" metadata operator.<a href="#appendix-D-3.17" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-4">
        -26<a href="#appendix-D-4" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-5.1">
            Applied editorial improvements by Heather Flanagan.<a href="#appendix-D-5.1" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-6">
        -25<a href="#appendix-D-6" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-7.1">
            Fixed #1684: disambiguation on the role federation_entity.<a href="#appendix-D-7.1" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-7.2">
            Fixed #1703: Unsigned error response.<a href="#appendix-D-7.2" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-7.3">
            Fixed #1693: Trust mark status endpoint HTTP method changed to POST.<a href="#appendix-D-7.3" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-7.4">
            Fixed #1681: RS256 is not mandatory anymore for federation operations signatures.<a href="#appendix-D-7.4" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-7.5">
            Fixed #1701: trust_chain parameter with PAR and redirect_uri.<a href="#appendix-D-7.5" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-7.6">
            Fixed #1695: entity_type url paramenter for Listing endpoint.<a href="#appendix-D-7.6" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-7.7">
            Fixed #1712: federation_entity claims: organization_name is recommended, logo_uri is added.<a href="#appendix-D-7.7" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-7.8">
            Fixed #1702: removal of metadata type trust_mark_issuer, federation_status_endpoint moved in the federation_entity metadata and renamed to federation_trust_mark_status_endpoint.<a href="#appendix-D-7.8" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-7.9">
            Fixed #1716: Clarified how to retrieve the RP's Entity Configuration when using Automatic Registration.<a href="#appendix-D-7.9" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-7.10">
            Fixed #1656: Introductionary text review.<a href="#appendix-D-7.10" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-8">
        -24<a href="#appendix-D-8" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-9.1">
            Fixed #1654: Text cleanup on how and who publishes the Entity Configuration.<a href="#appendix-D-9.1" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-9.2">
            Relaxed JWK Set representations: jwks, signed_jwks_uri and jwks_uri can coexist in the same Metadata for interoperability purposes across different Federations.<a href="#appendix-D-9.2" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-9.3">
            Fixed #1641: Federation Historical Keys endpoint.<a href="#appendix-D-9.3" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-9.4">
            Fixed #1673: added resolve endpoint JWT claims.<a href="#appendix-D-9.4" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-9.5">
            Fixed #1663: clarifications on the http status codes returning from /.well-known/openid-federation.<a href="#appendix-D-9.5" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-9.6">
            Fixed #1667: serialization format for federation endpoint made explicit.<a href="#appendix-D-9.6" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-9.7">
            Fixed #1662: ID Token section removed.<a href="#appendix-D-9.7" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-9.8">
            Fixed #1680: removal of the claim operation in Generic Errors.<a href="#appendix-D-9.8" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-9.9">
            Fixed #1669: error types in the section Generic Error Response.<a href="#appendix-D-9.9" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-9.10">
            Added Vladimir Dzhuvinov as an editor.<a href="#appendix-D-9.10" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-10">
        -23<a href="#appendix-D-10" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-11.1">
            Text on max_path_length<a href="#appendix-D-11.1" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-11.2">
            Fixed #1634: Trust Chain explanatory text.<a href="#appendix-D-11.2" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-11.3">
            Federation Entity Discovery as defined term.<a href="#appendix-D-11.3" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-11.4">
            Fixed #1645: Federation Entity Keys as defined term.<a href="#appendix-D-11.4" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-11.5">
            Fixed #1633: Explaination text about who signs the Trust Mark and how.<a href="#appendix-D-11.5" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-11.6">
            Fixed #1650: typo in signed_jws_uri and jwks metadata claims.<a href="#appendix-D-11.6" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-12">
        -22<a href="#appendix-D-12" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-13.1">
            Rewritten text about metadata processing when doing Explicit Client Registration.<a href="#appendix-D-13.1" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-13.2">
            Fixed #1581: OP metadata claims enabled for AS.<a href="#appendix-D-13.2" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-13.3">
            Fixed #1594: self-issued trust_chain in the Authorization Request.<a href="#appendix-D-13.3" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-13.4">
            Fixed #1583: metadata policy one_of operator, explanatory text for multiple values.<a href="#appendix-D-13.4" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-13.5">
            Fixed #1584: Stated that domain name constraints are as specified in Section 4.2.1.10 of <span>[<a href="#RFC5280" class="cite xref">RFC5280</a>]</span>.<a href="#appendix-D-13.5" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-13.6">
            Added more text on considerations when using the resolve endpoint.<a href="#appendix-D-13.6" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-13.7">
            Removal of aud parameter in the fetch endpoint request.<a href="#appendix-D-13.7" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-13.8">
            General rewording with the terms Leaf Entity and Entity Configuration.<a href="#appendix-D-13.8" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-13.9">
            Fixed #1588: Explicitly described the differences between Automatic and Explicit Registration.<a href="#appendix-D-13.9" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-13.10">
            Fixed #1606: Described situation in which the requirement for signed requests with Automatic Registration could be relaxed.<a href="#appendix-D-13.10" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-13.11">
            Fixed #1629: authz request object, audience explanatory text.<a href="#appendix-D-13.11" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-13.12">
            Fixed #1630: Resolve endpoint response content type.<a href="#appendix-D-13.12" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-13.13">
            Fixed #1608: submission of the Trust Chain in the Explicit Client Registration Request.<a href="#appendix-D-13.13" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-14">
        -21<a href="#appendix-D-14" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-15.1">
            Fixed #1547: Metadata section restructured.<a href="#appendix-D-15.1" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-15.2">
            Fixed #1548: request_authentication_signing_alg_values_supported clarification text about the usage of private_key_jwt and request_object.<a href="#appendix-D-15.2" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-15.3">
            Added a new constraint, allowed_leaf_entity_types.<a href="#appendix-D-15.3" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-15.4">
            Resolve endpoint: Removed iss paramenter in the request and specified the usage of the aud claim in the response.<a href="#appendix-D-15.4" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-15.5">
            Fixed #1513: request_authentication_methods_supported according to IANA OAuth2 AS metadata registered names.<a href="#appendix-D-15.5" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-15.6">
            Fixed #1527: Defined the Trust Mark term and added non-normative examples.<a href="#appendix-D-15.6" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-15.7">
            Added Security Considerations regarding the role of the Trust Marks.<a href="#appendix-D-15.7" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-15.8">
            Editorial review, normative language, and typos.<a href="#appendix-D-15.8" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-15.9">
            Fixed #1535: Removed the sub claim from the non-normative example of the Authorization Request Object.<a href="#appendix-D-15.9" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-15.10">
            Fixed #1528: Added Claims Languages and Scripts section.<a href="#appendix-D-15.10" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-15.11">
            Fixed #1456: Added language about space-delimited string parameters from RFC 6749.<a href="#appendix-D-15.11" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-16">
        -20<a href="#appendix-D-16" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-17.1">
            Updated example for Resolve endpoint.<a href="#appendix-D-17.1" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-17.2">
            Recommended that Key IDs be the JWK Thumbprint of the key.<a href="#appendix-D-17.2" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-17.3">
            Fixed #1502 - Corrected usage of <code>id_token_signed_response_alg</code>.<a href="#appendix-D-17.3" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-17.4">
            Fixed #1506 - Referenced RFC 9126 for Pushed Authorization Requests.<a href="#appendix-D-17.4" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-17.5">
            Added Giuseppe De Marco as an editor and removed Samuel Gulliksson as an editor.<a href="#appendix-D-17.5" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-17.6">
            Fixed #1508 - Editorial review.<a href="#appendix-D-17.6" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-17.7">
            Fixed #1505 - Defined that <code>signed_jwks_uri</code> is preferred over
            <code>jwks_uri</code> and <code>jwks</code>.<a href="#appendix-D-17.7" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-17.8">
            Fixed #1514 - Corrected RP metadata examples to use <code>id_token_signed_response_alg</code>.<a href="#appendix-D-17.8" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-17.9">
            Fixed #1512 - Registered the error codes <code>missing_trust_anchor</code>
            and <code>validation_failed</code>.<a href="#appendix-D-17.9" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-17.10">
            Also registered the OP Metadata parameters
            <code>organization_name</code>,
            <code>request_authentication_methods_supported</code>,
            <code>request_authentication_signing_alg_values_supported</code>,
            <code>signed_jwks_uri</code>,
            and
            <code>jwks</code>
            and the RP Metadata parameters
            <code>client_registration_types</code> (which was previously misregistered as <code>client_registration_type</code>),
            <code>organization_name</code>,
            and
            <code>signed_jwks_uri</code>.<a href="#appendix-D-17.10" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-17.11">
            Defined the term Federation Operator and described redundant retrieval of Trust Anchor keys.<a href="#appendix-D-17.11" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-17.12">
            Fixed #1519 - Corrected instances of <code>client_registration_type</code>
            to <code>client_registration_types_supported</code>.<a href="#appendix-D-17.12" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-17.13">
            Fixed #1520 - Renamed <code>federation_api_endpoint</code>
            to <code>federation_fetch_endpoint</code>.<a href="#appendix-D-17.13" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-17.14">
            Fixed #1521 - Changed swamid.sunet.se to swamid.se in examples.<a href="#appendix-D-17.14" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-17.15">
            Fixed #1523 - Added <code>request_parameter_supported</code> to examples.<a href="#appendix-D-17.15" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-17.16">
            Capitalized defined terms.<a href="#appendix-D-17.16" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-18">
        -19<a href="#appendix-D-18" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-19.1">
            Fixed #1497 - Removed <code>trust_mark</code> claim from federation entity metadata.<a href="#appendix-D-19.1" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-19.2">
            Fixed #1446 - Added <code>trust_chain</code> and removed <code>is_leaf</code>.<a href="#appendix-D-19.2" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-19.3">
            Fixed #1479 - Added <code>jwks</code> claim in OP metadata.<a href="#appendix-D-19.3" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-19.4">
            Fixed #1477 - Added <code>request_authentication_methods_supported</code>.<a href="#appendix-D-19.4" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-19.5">
            Fixed #1474 - Added the <code>request_authentication_signing_alg_values_supported</code> OP metadata parameter.<a href="#appendix-D-19.5" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-19.6">
            Rewrote <code>trust_marks</code> definition.<a href="#appendix-D-19.6" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-20">
        -18<a href="#appendix-D-20" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-21.1">
            Added the jwks claim name for OP Metadata.<a href="#appendix-D-21.1" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-21.2">
            Moved from a federation API to separate endpoints per operation.<a href="#appendix-D-21.2" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-21.3">
            Added descriptions of the list, resolve and status federation endpoints.<a href="#appendix-D-21.3" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-21.4">
            Registered the <code>client_registration_types_supported</code> and
            <code>federation_registration_endpoint</code>
            authorization server metadata parameters.<a href="#appendix-D-21.4" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-21.5">
            Registered the <code>client_registration_type</code>
            dynamic client registration parameter.<a href="#appendix-D-21.5" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-21.6">
            Registered and used the <code>application/entity-statement+jwt</code> media type.<a href="#appendix-D-21.6" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-21.7">
            Registered the <code>application/trust-mark+jwt</code> media type.<a href="#appendix-D-21.7" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-21.8">
            Trust marks: the claim <code>mark</code> has been renamed to <code>logo_uri</code>.<a href="#appendix-D-21.8" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-21.9">
            New federation endpoint: Resolve Entity Statement.<a href="#appendix-D-21.9" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-21.10">
            New federation endpoint: Trust Mark Status.<a href="#appendix-D-21.10" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-21.11">
            Federation API, Fetch: <code>iss</code> parameter is optional.<a href="#appendix-D-21.11" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-21.12">
            Trust Marks: added non-normative examples.<a href="#appendix-D-21.12" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-21.13">
            Expanded Section 8.1: Included Entity configurations.<a href="#appendix-D-21.13" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-21.14">
            Fixed #1373 - More clearly defined the term Entity Statement,
            both in the Terminology section and in the Entity Statement section.<a href="#appendix-D-21.14" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-22">
        -17<a href="#appendix-D-22" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-23.1">
            Addressed many working group review comments.
            Changes included adding the Overall Architecture section,
            the <code>trust_marks_issuers</code> claim,
            and the Setting Up a Federation section.<a href="#appendix-D-23.1" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-24">
        -16<a href="#appendix-D-24" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-25.1">
            Added Security Considerations section on Denial-of-Service attacks.<a href="#appendix-D-25.1" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-26">
        -15<a href="#appendix-D-26" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-27.1">
            Added <code>signed_jwks_uri</code>,
            which had been lost somewhere along the road.<a href="#appendix-D-27.1" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-28">
        -14<a href="#appendix-D-28" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-29.1">
            Rewrote the federation policy section.<a href="#appendix-D-29.1" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-29.2">
            What previously was referred to as
            <code>client authentication</code> in connection
            with automatic client registration is now changed to be
            <code>request authentication</code>.<a href="#appendix-D-29.2" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-29.3">
            Made a distinction between parameters and claims.<a href="#appendix-D-29.3" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-29.4">
            Corrected the description of the intended behavior when
            <code>essential</code> is absent.<a href="#appendix-D-29.4" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-30">
        -13<a href="#appendix-D-30" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-31.1">
            Added 'trust_marks' as a parameter in the Entity Statement.<a href="#appendix-D-31.1" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-31.2">
            An RP's self-signed Entity Statement MUST have the OP's issuer
            identifier
            as the value of 'aud'.<a href="#appendix-D-31.2" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-31.3">
            Added RS256 as default signing algorithm for Entity Statements.<a href="#appendix-D-31.3" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-31.4">
            Specified that the value of 'aud' in the Entity Statement use in
            automatic client registration MUST have the ASs authorization
            endpoint
            URL as value. Also, the 'sub' claim MUST NOT be present.<a href="#appendix-D-31.4" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-31.5">
            Separating the usage of merge and combine as proposed by Vladimir
            Dzhuvinov in Bitbucket issue #1157.<a href="#appendix-D-31.5" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-31.6">
            An RP doing only explicit client registration are not required to
            publish and support a
            <code>/.well-known/openid-federation</code>.<a href="#appendix-D-31.6" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-31.7">
            Every key in a JWK Set in an Entity Statement MUST have a kid.<a href="#appendix-D-31.7" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-32">
        -12<a href="#appendix-D-32" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-33.1">
            Made JWK Set OPTIONAL in an Entity Statement returned by OP as response
            of an explicit client registration<a href="#appendix-D-33.1" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-33.2">
            Renamed Entity type to client registration type.<a href="#appendix-D-33.2" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-33.3">
            Added more text describing
            client_registration_auth_methods_supported.<a href="#appendix-D-33.3" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-33.4">
            Made "Processing the Authentication Request" into two separate
            sections:
            one for Authentication Request and one for Pushed Authorization
            Request.<a href="#appendix-D-33.4" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-33.5">
            Added example of URLs to some examples in the appendix.<a href="#appendix-D-33.5" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-33.6">
            Changed the automatic client registration example in the appendix to
            use
            Request Object instead of a client_assertion.<a href="#appendix-D-33.6" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-34">
        -11<a href="#appendix-D-34" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-35.1">
            Added section on trust marks.<a href="#appendix-D-35.1" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-35.2">
            Clarified private_key_jwt usage in the authentication request.<a href="#appendix-D-35.2" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-35.3">
            Fixed Bitbucket issues #1150 and #1155 by Vladimir Dzhuvinov.<a href="#appendix-D-35.3" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-35.4">
            Fixed some examples to make them syntactically correct.<a href="#appendix-D-35.4" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-36">
        -10<a href="#appendix-D-36" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-37.1">
            Incorporated additional review feedback from Marcos Sanz.
            The primary change was moving constraints to their own section of
            the
            Entity Statement.<a href="#appendix-D-37.1" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-38">
        -09<a href="#appendix-D-38" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-39.1">
            Incorporated review feedback from Marcos Sanz.
            Major changes were as follows.<a href="#appendix-D-39.1" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-39.2">
            Separated Entity configuration discovery from operations provided
            by the federation API.<a href="#appendix-D-39.2" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-39.3">
            Defined new authentication error codes.<a href="#appendix-D-39.3" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-39.4">
            Also incorporated review feedback from Michael B. Jones.<a href="#appendix-D-39.4" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-40">
        -08<a href="#appendix-D-40" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-41.1">
            Incorporated review feedback from Michael B. Jones.
            Major changes were as follows.<a href="#appendix-D-41.1" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-41.2">
            Deleted <code>sub_is_leaf</code> Entity Statement
            since it was redundant.<a href="#appendix-D-41.2" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-41.3">
            Added <code>client_registration_type</code> RP registration
            metadata value
            and <code>client_registration_types_supported</code> OP
            metadata value.<a href="#appendix-D-41.3" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-41.4">
            Deleted <code>openid_discovery</code> metadata type
            identifier
            since its purpose is already served by
            <code>openid_provider</code>.<a href="#appendix-D-41.4" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-41.5">
            Entity identifier paths are now included when using the Federation
            API,
            enabling use in multi-tenant deployments sharing a common domain
            name.<a href="#appendix-D-41.5" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-41.6">
            Renamed <code>sub_is_leaf</code> to
            <code>is_leaf</code>
            in the Entity Listings Request operation parameters.<a href="#appendix-D-41.6" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-41.7">
            Added <code>crit</code> and
            <code>policy_language_crit</code>,
            enabling control over which Entity Statement and policy language
            extensions
            MUST be understood and processed.<a href="#appendix-D-41.7" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-41.8">
            Renamed <code>openid_client</code> to
            <code>openid_relying_party</code>.<a href="#appendix-D-41.8" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-41.9">
            Renamed <code>oauth_service</code> to
            <code>oauth_authorization_server</code>.<a href="#appendix-D-41.9" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-41.10">
            Renamed <code>implicit</code> registration to
            <code>automatic</code>
            registration
            to avoid naming confusion with the implicit grant type.<a href="#appendix-D-41.10" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-41.11">
            Renamed <code>op</code> to
            <code>operation</code>
            to avoid naming confusion with the use of "OP" as an acronym for
            "OpenID Provider".<a href="#appendix-D-41.11" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-41.12">
            Renamed <code>url</code> to
            <code>uri</code>
            in several identifiers.<a href="#appendix-D-41.12" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-41.13">
            Restored Open Issues appendix.<a href="#appendix-D-41.13" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-41.14">
            Corrected document formatting issues.<a href="#appendix-D-41.14" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-42">
        -07<a href="#appendix-D-42" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-43.1">
            Split metadata into metadata and metadata_policy<a href="#appendix-D-43.1" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-43.2">
            Updated example<a href="#appendix-D-43.2" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-44">
        -06<a href="#appendix-D-44" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-45.1">
            Some rewrites<a href="#appendix-D-45.1" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-45.2">
            Added example of explicit client registration<a href="#appendix-D-45.2" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-46">
        -05<a href="#appendix-D-46" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-47.1">
            A major rewrite.<a href="#appendix-D-47.1" class="pilcrow">Â¶</a>
</li>
      </ul>
<p id="appendix-D-48">
        -04<a href="#appendix-D-48" class="pilcrow">Â¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-D-49.1">
            Changed client metadata names
            <code>scopes</code>
            to <code>rp_scopes</code> and
            <code>claims</code>
            to <code>rp_claims</code>.<a href="#appendix-D-49.1" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-49.2">
            Added Open Issues appendix.<a href="#appendix-D-49.2" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-49.3">
            Added additional references.<a href="#appendix-D-49.3" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-49.4">
            Editorial improvements.<a href="#appendix-D-49.4" class="pilcrow">Â¶</a>
</li>
        <li class="compact" id="appendix-D-49.5">
            Added standard Notices section, which is present in all OpenID
            specifications.<a href="#appendix-D-49.5" class="pilcrow">Â¶</a>
</li>
      </ul>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-E">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Roland Hedberg (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">independent</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:roland@catalogix.se" class="email">roland@catalogix.se</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Michael B. Jones</span></div>
<div dir="auto" class="left"><span class="org">Microsoft</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mbj@microsoft.com" class="email">mbj@microsoft.com</a>
</div>
<div class="url">
<span>URI:</span>
<a href="https://self-issued.info/" class="url">https://self-issued.info/</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Andreas Ã…kre Solberg</span></div>
<div dir="auto" class="left"><span class="org">Sikt</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:Andreas.Solberg@sikt.no" class="email">Andreas.Solberg@sikt.no</a>
</div>
<div class="url">
<span>URI:</span>
<a href="https://www.linkedin.com/in/andreassolberg/" class="url">https://www.linkedin.com/in/andreassolberg/</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">John Bradley</span></div>
<div dir="auto" class="left"><span class="org">Yubico</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ve7jtb@ve7jtb.com" class="email">ve7jtb@ve7jtb.com</a>
</div>
<div class="url">
<span>URI:</span>
<a href="http://www.thread-safe.com/" class="url">http://www.thread-safe.com/</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Giuseppe De Marco</span></div>
<div dir="auto" class="left"><span class="org">independent</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:demarcog83@gmail.com" class="email">demarcog83@gmail.com</a>
</div>
<div class="url">
<span>URI:</span>
<a href="https://www.linkedin.com/in/giuseppe-de-marco-bb054245/" class="url">https://www.linkedin.com/in/giuseppe-de-marco-bb054245/</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Vladimir Dzhuvinov</span></div>
<div dir="auto" class="left"><span class="org">Connect2id</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:vladimir@connect2id.com" class="email">vladimir@connect2id.com</a>
</div>
<div class="url">
<span>URI:</span>
<a href="https://twitter.com/dzhuvi" class="url">https://twitter.com/dzhuvi</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
